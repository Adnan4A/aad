var C_=t=>{throw TypeError(t)};var Mp=(t,e,n)=>e.has(t)||C_("Cannot "+n);var L=(t,e,n)=>(Mp(t,e,"read from private field"),n?n.call(t):e.get(t)),pe=(t,e,n)=>e.has(t)?C_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ne=(t,e,n,r)=>(Mp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ce=(t,e,n)=>(Mp(t,e,"access private method"),n);var Ud=(t,e,n,r)=>({set _(s){ne(t,e,s,n)},get _(){return L(t,e,r)}});function B4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function LE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VE={exports:{}},tm={},FE={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),H4=Symbol.for("react.portal"),W4=Symbol.for("react.fragment"),q4=Symbol.for("react.strict_mode"),K4=Symbol.for("react.profiler"),G4=Symbol.for("react.provider"),Q4=Symbol.for("react.context"),Y4=Symbol.for("react.forward_ref"),X4=Symbol.for("react.suspense"),J4=Symbol.for("react.memo"),Z4=Symbol.for("react.lazy"),I_=Symbol.iterator;function eD(t){return t===null||typeof t!="object"?null:(t=I_&&t[I_]||t["@@iterator"],typeof t=="function"?t:null)}var UE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$E=Object.assign,zE={};function zl(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||UE}zl.prototype.isReactComponent={};zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BE(){}BE.prototype=zl.prototype;function qy(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||UE}var Ky=qy.prototype=new BE;Ky.constructor=qy;$E(Ky,zl.prototype);Ky.isPureReactComponent=!0;var A_=Array.isArray,HE=Object.prototype.hasOwnProperty,Gy={current:null},WE={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)HE.call(e,r)&&!WE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Qu,type:t,key:a,ref:o,props:s,_owner:Gy.current}}function tD(t,e){return{$$typeof:Qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qu}function nD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k_=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nD(""+t.key):e.toString(36)}function bh(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qu:case H4:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Op(o,0):r,A_(s)?(n="",t!=null&&(n=t.replace(k_,"$&/")+"/"),bh(s,e,n,"",function(u){return u})):s!=null&&(Qy(s)&&(s=tD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(k_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",A_(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+Op(a,l);o+=bh(a,e,n,c,s)}else if(c=eD(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+Op(a,l++),o+=bh(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $d(t,e,n){if(t==null)return t;var r=[],s=0;return bh(t,r,"","",function(a){return e.call(n,a,s++)}),r}function rD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Nh={transition:null},sD={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Nh,ReactCurrentOwner:Gy};function KE(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:$d,forEach:function(t,e,n){$d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $d(t,function(){e++}),e},toArray:function(t){return $d(t,function(e){return e})||[]},only:function(t){if(!Qy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=zl;Oe.Fragment=W4;Oe.Profiler=K4;Oe.PureComponent=qy;Oe.StrictMode=q4;Oe.Suspense=X4;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sD;Oe.act=KE;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$E({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Gy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)HE.call(e,c)&&!WE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Qu,type:t.type,key:s,ref:a,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:Q4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G4,_context:t},t.Consumer=t};Oe.createElement=qE;Oe.createFactory=function(t){var e=qE.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:Y4,render:t}};Oe.isValidElement=Qy;Oe.lazy=function(t){return{$$typeof:Z4,_payload:{_status:-1,_result:t},_init:rD}};Oe.memo=function(t,e){return{$$typeof:J4,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Nh.transition;Nh.transition={};try{t()}finally{Nh.transition=e}};Oe.unstable_act=KE;Oe.useCallback=function(t,e){return mn.current.useCallback(t,e)};Oe.useContext=function(t){return mn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return mn.current.useEffect(t,e)};Oe.useId=function(){return mn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return mn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Oe.useRef=function(t){return mn.current.useRef(t)};Oe.useState=function(t){return mn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return mn.current.useTransition()};Oe.version="18.3.1";FE.exports=Oe;var p=FE.exports;const ms=LE(p),GE=B4({__proto__:null,default:ms},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD=p,aD=Symbol.for("react.element"),oD=Symbol.for("react.fragment"),lD=Object.prototype.hasOwnProperty,cD=iD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uD={key:!0,ref:!0,__self:!0,__source:!0};function QE(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lD.call(e,r)&&!uD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aD,type:t,key:a,ref:o,props:s,_owner:cD.current}}tm.Fragment=oD;tm.jsx=QE;tm.jsxs=QE;VE.exports=tm;var i=VE.exports,YE={exports:{}},zn={},XE={exports:{}},JE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,U){var G=V.length;V.push(U);e:for(;0<G;){var X=G-1>>>1,oe=V[X];if(0<s(oe,U))V[X]=U,V[G]=oe,G=X;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var U=V[0],G=V.pop();if(G!==U){V[0]=G;e:for(var X=0,oe=V.length,_e=oe>>>1;X<_e;){var De=2*(X+1)-1,ke=V[De],ze=De+1,re=V[ze];if(0>s(ke,G))ze<oe&&0>s(re,ke)?(V[X]=re,V[ze]=G,X=ze):(V[X]=ke,V[De]=G,X=De);else if(ze<oe&&0>s(re,G))V[X]=re,V[ze]=G,X=ze;else break e}}return U}function s(V,U){var G=V.sortIndex-U.sortIndex;return G!==0?G:V.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,y=!1,j=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=V)r(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(u)}}function I(V){if(w=!1,E(V),!j)if(n(c)!==null)j=!0,W(O);else{var U=n(u);U!==null&&le(I,U.startTime-V)}}function O(V,U){j=!1,w&&(w=!1,v(_),_=-1),y=!0;var G=m;try{for(E(U),f=n(c);f!==null&&(!(f.expirationTime>U)||V&&!P());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var oe=X(f.expirationTime<=U);U=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(c)&&r(c),E(U)}else r(c);f=n(c)}if(f!==null)var _e=!0;else{var De=n(u);De!==null&&le(I,De.startTime-U),_e=!1}return _e}finally{f=null,m=G,y=!1}}var D=!1,C=null,_=-1,T=5,S=-1;function P(){return!(t.unstable_now()-S<T)}function M(){if(C!==null){var V=t.unstable_now();S=V;var U=!0;try{U=C(!0,V)}finally{U?A():(D=!1,C=null)}}else D=!1}var A;if(typeof x=="function")A=function(){x(M)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=M,A=function(){te.postMessage(null)}}else A=function(){N(M,0)};function W(V){C=V,D||(D=!0,A())}function le(V,U){_=N(function(){V(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){j||y||(j=!0,W(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var G=m;m=U;try{return V()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,U){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=m;m=V;try{return U()}finally{m=G}},t.unstable_scheduleCallback=function(V,U,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,V={id:h++,callback:U,priorityLevel:V,startTime:G,expirationTime:oe,sortIndex:-1},G>X?(V.sortIndex=G,e(u,V),n(c)===null&&V===n(u)&&(w?(v(_),_=-1):w=!0,le(I,G-X))):(V.sortIndex=oe,e(c,V),j||y||(j=!0,W(O))),V},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(V){var U=m;return function(){var G=m;m=U;try{return V.apply(this,arguments)}finally{m=G}}}})(JE);XE.exports=JE;var dD=XE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD=p,$n=dD;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZE=new Set,pu={};function Ja(t,e){wl(t,e),wl(t+"Capture",e)}function wl(t,e){for(pu[t]=e,t=0;t<e.length;t++)ZE.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,fD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R_={},P_={};function mD(t){return Hg.call(P_,t)?!0:Hg.call(R_,t)?!1:fD.test(t)?P_[t]=!0:(R_[t]=!0,!1)}function pD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gD(t,e,n,r){if(e===null||typeof e>"u"||pD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Xy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yy,Xy);Qt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yy,Xy);Qt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yy,Xy);Qt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jy(t,e,n,r){var s=Qt.hasOwnProperty(e)?Qt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gD(e,n,s,r)&&(n=null),r||s===null?mD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ws=hD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zd=Symbol.for("react.element"),Io=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Wg=Symbol.for("react.profiler"),ej=Symbol.for("react.provider"),tj=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),qg=Symbol.for("react.suspense"),Kg=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),nj=Symbol.for("react.offscreen"),D_=Symbol.iterator;function Nc(t){return t===null||typeof t!="object"?null:(t=D_&&t[D_]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,Lp;function Mc(t){if(Lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lp=e&&e[1]||""}return`
`+Lp+t}var Vp=!1;function Fp(t,e){if(!t||Vp)return"";Vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mc(t):""}function xD(t){switch(t.tag){case 5:return Mc(t.type);case 16:return Mc("Lazy");case 13:return Mc("Suspense");case 19:return Mc("SuspenseList");case 0:case 2:case 15:return t=Fp(t.type,!1),t;case 11:return t=Fp(t.type.render,!1),t;case 1:return t=Fp(t.type,!0),t;default:return""}}function Gg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case Io:return"Portal";case Wg:return"Profiler";case Zy:return"StrictMode";case qg:return"Suspense";case Kg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tj:return(t.displayName||"Context")+".Consumer";case ej:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:Gg(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return Gg(t(e))}catch{}}return null}function yD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gg(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vD(t){var e=rj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bd(t){t._valueTracker||(t._valueTracker=vD(t))}function sj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qg(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ij(t,e){e=e.checked,e!=null&&Jy(t,"checked",e,!1)}function Yg(t,e){ij(t,e);var n=Di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xg(t,e.type,Di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function O_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xg(t,e,n){(e!=="number"||Yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oc=Array.isArray;function Ho(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Di(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Oc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Di(n)}}function aj(t,e){var n=Di(e.value),r=Di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hd,lj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hd=Hd||document.createElement("div"),Hd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wD=["Webkit","ms","Moz","O"];Object.keys(Yc).forEach(function(t){wD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yc[e]=Yc[t]})});function cj(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yc.hasOwnProperty(t)&&Yc[t]?(""+e).trim():e+"px"}function uj(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cj(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _D=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ex(t,e){if(e){if(_D[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function tx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nx=null;function nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rx=null,Wo=null,qo=null;function F_(t){if(t=Ju(t)){if(typeof rx!="function")throw Error(K(280));var e=t.stateNode;e&&(e=am(e),rx(t.stateNode,t.type,e))}}function dj(t){Wo?qo?qo.push(t):qo=[t]:Wo=t}function hj(){if(Wo){var t=Wo,e=qo;if(qo=Wo=null,F_(t),e)for(t=0;t<e.length;t++)F_(e[t])}}function fj(t,e){return t(e)}function mj(){}var Up=!1;function pj(t,e,n){if(Up)return t(e,n);Up=!0;try{return fj(t,e,n)}finally{Up=!1,(Wo!==null||qo!==null)&&(mj(),hj())}}function xu(t,e){var n=t.stateNode;if(n===null)return null;var r=am(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var sx=!1;if(Ds)try{var Ec={};Object.defineProperty(Ec,"passive",{get:function(){sx=!0}}),window.addEventListener("test",Ec,Ec),window.removeEventListener("test",Ec,Ec)}catch{sx=!1}function bD(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Xc=!1,Xh=null,Jh=!1,ix=null,ND={onError:function(t){Xc=!0,Xh=t}};function ED(t,e,n,r,s,a,o,l,c){Xc=!1,Xh=null,bD.apply(ND,arguments)}function jD(t,e,n,r,s,a,o,l,c){if(ED.apply(this,arguments),Xc){if(Xc){var u=Xh;Xc=!1,Xh=null}else throw Error(K(198));Jh||(Jh=!0,ix=u)}}function Za(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U_(t){if(Za(t)!==t)throw Error(K(188))}function TD(t){var e=t.alternate;if(!e){if(e=Za(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return U_(s),t;if(a===r)return U_(s),e;a=a.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function xj(t){return t=TD(t),t!==null?yj(t):null}function yj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yj(t);if(e!==null)return e;t=t.sibling}return null}var vj=$n.unstable_scheduleCallback,$_=$n.unstable_cancelCallback,SD=$n.unstable_shouldYield,CD=$n.unstable_requestPaint,bt=$n.unstable_now,ID=$n.unstable_getCurrentPriorityLevel,rv=$n.unstable_ImmediatePriority,wj=$n.unstable_UserBlockingPriority,Zh=$n.unstable_NormalPriority,AD=$n.unstable_LowPriority,_j=$n.unstable_IdlePriority,nm=null,Hr=null;function kD(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(nm,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:DD,RD=Math.log,PD=Math.LN2;function DD(t){return t>>>=0,t===0?32:31-(RD(t)/PD|0)|0}var Wd=64,qd=4194304;function Lc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ef(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Lc(l):(a&=o,a!==0&&(r=Lc(a)))}else o=n&~s,o!==0?r=Lc(o):a!==0&&(r=Lc(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_r(e),s=1<<n,r|=t[n],e&=~s;return r}function MD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-_r(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=MD(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function ax(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bj(){var t=Wd;return Wd<<=1,!(Wd&4194240)&&(Wd=64),t}function $p(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_r(e),t[e]=n}function LD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_r(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function sv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_r(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function Nj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ej,iv,jj,Tj,Sj,ox=!1,Kd=[],wi=null,_i=null,bi=null,yu=new Map,vu=new Map,ai=[],VD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z_(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":yu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(e.pointerId)}}function jc(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Ju(e),e!==null&&iv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FD(t,e,n,r,s){switch(e){case"focusin":return wi=jc(wi,t,e,n,r,s),!0;case"dragenter":return _i=jc(_i,t,e,n,r,s),!0;case"mouseover":return bi=jc(bi,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return yu.set(a,jc(yu.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,vu.set(a,jc(vu.get(a)||null,t,e,n,r,s)),!0}return!1}function Cj(t){var e=pa(t.target);if(e!==null){var n=Za(e);if(n!==null){if(e=n.tag,e===13){if(e=gj(n),e!==null){t.blockedOn=e,Sj(t.priority,function(){jj(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nx=r,n.target.dispatchEvent(r),nx=null}else return e=Ju(n),e!==null&&iv(e),t.blockedOn=n,!1;e.shift()}return!0}function B_(t,e,n){Eh(t)&&n.delete(e)}function UD(){ox=!1,wi!==null&&Eh(wi)&&(wi=null),_i!==null&&Eh(_i)&&(_i=null),bi!==null&&Eh(bi)&&(bi=null),yu.forEach(B_),vu.forEach(B_)}function Tc(t,e){t.blockedOn===e&&(t.blockedOn=null,ox||(ox=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,UD)))}function wu(t){function e(s){return Tc(s,t)}if(0<Kd.length){Tc(Kd[0],t);for(var n=1;n<Kd.length;n++){var r=Kd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Tc(wi,t),_i!==null&&Tc(_i,t),bi!==null&&Tc(bi,t),yu.forEach(e),vu.forEach(e),n=0;n<ai.length;n++)r=ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)Cj(n),n.blockedOn===null&&ai.shift()}var Ko=Ws.ReactCurrentBatchConfig,tf=!0;function $D(t,e,n,r){var s=Ge,a=Ko.transition;Ko.transition=null;try{Ge=1,av(t,e,n,r)}finally{Ge=s,Ko.transition=a}}function zD(t,e,n,r){var s=Ge,a=Ko.transition;Ko.transition=null;try{Ge=4,av(t,e,n,r)}finally{Ge=s,Ko.transition=a}}function av(t,e,n,r){if(tf){var s=lx(t,e,n,r);if(s===null)Xp(t,e,r,nf,n),z_(t,r);else if(FD(s,t,e,n,r))r.stopPropagation();else if(z_(t,r),e&4&&-1<VD.indexOf(t)){for(;s!==null;){var a=Ju(s);if(a!==null&&Ej(a),a=lx(t,e,n,r),a===null&&Xp(t,e,r,nf,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Xp(t,e,r,null,n)}}var nf=null;function lx(t,e,n,r){if(nf=null,t=nv(r),t=pa(t),t!==null)if(e=Za(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gj(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nf=t,null}function Ij(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ID()){case rv:return 1;case wj:return 4;case Zh:case AD:return 16;case _j:return 536870912;default:return 16}default:return 16}}var xi=null,ov=null,jh=null;function Aj(){if(jh)return jh;var t,e=ov,n=e.length,r,s="value"in xi?xi.value:xi.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return jh=s.slice(t,1<r?1-r:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gd(){return!0}function H_(){return!1}function Bn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gd:H_,this.isPropagationStopped=H_,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gd)},persist:function(){},isPersistent:Gd}),e}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=Bn(Bl),Xu=mt({},Bl,{view:0,detail:0}),BD=Bn(Xu),zp,Bp,Sc,rm=mt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sc&&(Sc&&t.type==="mousemove"?(zp=t.screenX-Sc.screenX,Bp=t.screenY-Sc.screenY):Bp=zp=0,Sc=t),zp)},movementY:function(t){return"movementY"in t?t.movementY:Bp}}),W_=Bn(rm),HD=mt({},rm,{dataTransfer:0}),WD=Bn(HD),qD=mt({},Xu,{relatedTarget:0}),Hp=Bn(qD),KD=mt({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),GD=Bn(KD),QD=mt({},Bl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YD=Bn(QD),XD=mt({},Bl,{data:0}),q_=Bn(XD),JD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eM[t])?!!e[t]:!1}function cv(){return tM}var nM=mt({},Xu,{key:function(t){if(t.key){var e=JD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rM=Bn(nM),sM=mt({},rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K_=Bn(sM),iM=mt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),aM=Bn(iM),oM=mt({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),lM=Bn(oM),cM=mt({},rm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uM=Bn(cM),dM=[9,13,27,32],uv=Ds&&"CompositionEvent"in window,Jc=null;Ds&&"documentMode"in document&&(Jc=document.documentMode);var hM=Ds&&"TextEvent"in window&&!Jc,kj=Ds&&(!uv||Jc&&8<Jc&&11>=Jc),G_=" ",Q_=!1;function Rj(t,e){switch(t){case"keyup":return dM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function fM(t,e){switch(t){case"compositionend":return Pj(e);case"keypress":return e.which!==32?null:(Q_=!0,G_);case"textInput":return t=e.data,t===G_&&Q_?null:t;default:return null}}function mM(t,e){if(ko)return t==="compositionend"||!uv&&Rj(t,e)?(t=Aj(),jh=ov=xi=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kj&&e.locale!=="ko"?null:e.data;default:return null}}var pM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pM[t.type]:e==="textarea"}function Dj(t,e,n,r){dj(r),e=rf(e,"onChange"),0<e.length&&(n=new lv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zc=null,_u=null;function gM(t){Wj(t,0)}function sm(t){var e=Do(t);if(sj(e))return t}function xM(t,e){if(t==="change")return e}var Mj=!1;if(Ds){var Wp;if(Ds){var qp="oninput"in document;if(!qp){var X_=document.createElement("div");X_.setAttribute("oninput","return;"),qp=typeof X_.oninput=="function"}Wp=qp}else Wp=!1;Mj=Wp&&(!document.documentMode||9<document.documentMode)}function J_(){Zc&&(Zc.detachEvent("onpropertychange",Oj),_u=Zc=null)}function Oj(t){if(t.propertyName==="value"&&sm(_u)){var e=[];Dj(e,_u,t,nv(t)),pj(gM,e)}}function yM(t,e,n){t==="focusin"?(J_(),Zc=e,_u=n,Zc.attachEvent("onpropertychange",Oj)):t==="focusout"&&J_()}function vM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sm(_u)}function wM(t,e){if(t==="click")return sm(e)}function _M(t,e){if(t==="input"||t==="change")return sm(e)}function bM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:bM;function bu(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hg.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function Z_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eb(t,e){var n=Z_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z_(n)}}function Lj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vj(){for(var t=window,e=Yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yh(t.document)}return e}function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NM(t){var e=Vj(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lj(n.ownerDocument.documentElement,n)){if(r!==null&&dv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=eb(n,a);var o=eb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EM=Ds&&"documentMode"in document&&11>=document.documentMode,Ro=null,cx=null,eu=null,ux=!1;function tb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ux||Ro==null||Ro!==Yh(r)||(r=Ro,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eu&&bu(eu,r)||(eu=r,r=rf(cx,"onSelect"),0<r.length&&(e=new lv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ro)))}function Qd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Po={animationend:Qd("Animation","AnimationEnd"),animationiteration:Qd("Animation","AnimationIteration"),animationstart:Qd("Animation","AnimationStart"),transitionend:Qd("Transition","TransitionEnd")},Kp={},Fj={};Ds&&(Fj=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function im(t){if(Kp[t])return Kp[t];if(!Po[t])return t;var e=Po[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fj)return Kp[t]=e[n];return t}var Uj=im("animationend"),$j=im("animationiteration"),zj=im("animationstart"),Bj=im("transitionend"),Hj=new Map,nb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){Hj.set(t,e),Ja(e,[t])}for(var Gp=0;Gp<nb.length;Gp++){var Qp=nb[Gp],jM=Qp.toLowerCase(),TM=Qp[0].toUpperCase()+Qp.slice(1);Gi(jM,"on"+TM)}Gi(Uj,"onAnimationEnd");Gi($j,"onAnimationIteration");Gi(zj,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(Bj,"onTransitionEnd");wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);Ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vc));function rb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jD(r,e,void 0,t),t.currentTarget=null}function Wj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;rb(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;rb(s,l,u),a=c}}}if(Jh)throw t=ix,Jh=!1,ix=null,t}function st(t,e){var n=e[px];n===void 0&&(n=e[px]=new Set);var r=t+"__bubble";n.has(r)||(qj(e,t,2,!1),n.add(r))}function Yp(t,e,n){var r=0;e&&(r|=4),qj(n,t,r,e)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[Yd]){t[Yd]=!0,ZE.forEach(function(n){n!=="selectionchange"&&(SM.has(n)||Yp(n,!1,t),Yp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yd]||(e[Yd]=!0,Yp("selectionchange",!1,e))}}function qj(t,e,n,r){switch(Ij(e)){case 1:var s=$D;break;case 4:s=zD;break;default:s=av}n=s.bind(null,e,n,t),s=void 0,!sx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xp(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=pa(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}pj(function(){var u=a,h=nv(n),f=[];e:{var m=Hj.get(t);if(m!==void 0){var y=lv,j=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":y=rM;break;case"focusin":j="focus",y=Hp;break;case"focusout":j="blur",y=Hp;break;case"beforeblur":case"afterblur":y=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=W_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=WD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=aM;break;case Uj:case $j:case zj:y=GD;break;case Bj:y=lM;break;case"scroll":y=BD;break;case"wheel":y=uM;break;case"copy":case"cut":case"paste":y=YD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=K_}var w=(e&4)!==0,N=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var x=u,E;x!==null;){E=x;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,v!==null&&(I=xu(x,v),I!=null&&w.push(Eu(x,I,E)))),N)break;x=x.return}0<w.length&&(m=new y(m,j,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==nx&&(j=n.relatedTarget||n.fromElement)&&(pa(j)||j[Ms]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=u,j=j?pa(j):null,j!==null&&(N=Za(j),j!==N||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=u),y!==j)){if(w=W_,I="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=K_,I="onPointerLeave",v="onPointerEnter",x="pointer"),N=y==null?m:Do(y),E=j==null?m:Do(j),m=new w(I,x+"leave",y,n,h),m.target=N,m.relatedTarget=E,I=null,pa(h)===u&&(w=new w(v,x+"enter",j,n,h),w.target=E,w.relatedTarget=N,I=w),N=I,y&&j)t:{for(w=y,v=j,x=0,E=w;E;E=vo(E))x++;for(E=0,I=v;I;I=vo(I))E++;for(;0<x-E;)w=vo(w),x--;for(;0<E-x;)v=vo(v),E--;for(;x--;){if(w===v||v!==null&&w===v.alternate)break t;w=vo(w),v=vo(v)}w=null}else w=null;y!==null&&sb(f,m,y,w,!1),j!==null&&N!==null&&sb(f,N,j,w,!0)}}e:{if(m=u?Do(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var O=xM;else if(Y_(m))if(Mj)O=_M;else{O=vM;var D=yM}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=wM);if(O&&(O=O(t,u))){Dj(f,O,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Xg(m,"number",m.value)}switch(D=u?Do(u):window,t){case"focusin":(Y_(D)||D.contentEditable==="true")&&(Ro=D,cx=u,eu=null);break;case"focusout":eu=cx=Ro=null;break;case"mousedown":ux=!0;break;case"contextmenu":case"mouseup":case"dragend":ux=!1,tb(f,n,h);break;case"selectionchange":if(EM)break;case"keydown":case"keyup":tb(f,n,h)}var C;if(uv)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ko?Rj(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(kj&&n.locale!=="ko"&&(ko||_!=="onCompositionStart"?_==="onCompositionEnd"&&ko&&(C=Aj()):(xi=h,ov="value"in xi?xi.value:xi.textContent,ko=!0)),D=rf(u,_),0<D.length&&(_=new q_(_,t,null,n,h),f.push({event:_,listeners:D}),C?_.data=C:(C=Pj(n),C!==null&&(_.data=C)))),(C=hM?fM(t,n):mM(t,n))&&(u=rf(u,"onBeforeInput"),0<u.length&&(h=new q_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=C))}Wj(f,e)})}function Eu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=xu(t,n),a!=null&&r.unshift(Eu(t,a,s)),a=xu(t,e),a!=null&&r.push(Eu(t,a,s))),t=t.return}return r}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sb(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=xu(n,a),c!=null&&o.unshift(Eu(n,c,l))):s||(c=xu(n,a),c!=null&&o.push(Eu(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CM=/\r\n?/g,IM=/\u0000|\uFFFD/g;function ib(t){return(typeof t=="string"?t:""+t).replace(CM,`
`).replace(IM,"")}function Xd(t,e,n){if(e=ib(e),ib(t)!==e&&n)throw Error(K(425))}function sf(){}var dx=null,hx=null;function fx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mx=typeof setTimeout=="function"?setTimeout:void 0,AM=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,kM=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(t){return ab.resolve(null).then(t).catch(RM)}:mx;function RM(t){setTimeout(function(){throw t})}function Jp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wu(e)}function Ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ob(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hl=Math.random().toString(36).slice(2),zr="__reactFiber$"+Hl,ju="__reactProps$"+Hl,Ms="__reactContainer$"+Hl,px="__reactEvents$"+Hl,PM="__reactListeners$"+Hl,DM="__reactHandles$"+Hl;function pa(t){var e=t[zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ms]||n[zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ob(t);t!==null;){if(n=t[zr])return n;t=ob(t)}return e}t=n,n=t.parentNode}return null}function Ju(t){return t=t[zr]||t[Ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function am(t){return t[ju]||null}var gx=[],Mo=-1;function Qi(t){return{current:t}}function it(t){0>Mo||(t.current=gx[Mo],gx[Mo]=null,Mo--)}function tt(t,e){Mo++,gx[Mo]=t.current,t.current=e}var Mi={},on=Qi(Mi),Tn=Qi(!1),Da=Mi;function _l(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function af(){it(Tn),it(on)}function lb(t,e,n){if(on.current!==Mi)throw Error(K(168));tt(on,e),tt(Tn,n)}function Kj(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,yD(t)||"Unknown",s));return mt({},n,r)}function of(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,Da=on.current,tt(on,t),tt(Tn,Tn.current),!0}function cb(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=Kj(t,e,Da),r.__reactInternalMemoizedMergedChildContext=t,it(Tn),it(on),tt(on,t)):it(Tn),tt(Tn,n)}var gs=null,om=!1,Zp=!1;function Gj(t){gs===null?gs=[t]:gs.push(t)}function MM(t){om=!0,Gj(t)}function Yi(){if(!Zp&&gs!==null){Zp=!0;var t=0,e=Ge;try{var n=gs;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gs=null,om=!1}catch(s){throw gs!==null&&(gs=gs.slice(t+1)),vj(rv,Yi),s}finally{Ge=e,Zp=!1}}return null}var Oo=[],Lo=0,lf=null,cf=0,Zn=[],er=0,Ma=null,Ns=1,Es="";function oa(t,e){Oo[Lo++]=cf,Oo[Lo++]=lf,lf=t,cf=e}function Qj(t,e,n){Zn[er++]=Ns,Zn[er++]=Es,Zn[er++]=Ma,Ma=t;var r=Ns;t=Es;var s=32-_r(r)-1;r&=~(1<<s),n+=1;var a=32-_r(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ns=1<<32-_r(e)+s|n<<s|r,Es=a+t}else Ns=1<<a|n<<s|r,Es=t}function hv(t){t.return!==null&&(oa(t,1),Qj(t,1,0))}function fv(t){for(;t===lf;)lf=Oo[--Lo],Oo[Lo]=null,cf=Oo[--Lo],Oo[Lo]=null;for(;t===Ma;)Ma=Zn[--er],Zn[er]=null,Es=Zn[--er],Zn[er]=null,Ns=Zn[--er],Zn[er]=null}var Fn=null,Ln=null,at=!1,gr=null;function Yj(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ub(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fn=t,Ln=Ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fn=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ma!==null?{id:Ns,overflow:Es}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fn=t,Ln=null,!0):!1;default:return!1}}function xx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yx(t){if(at){var e=Ln;if(e){var n=e;if(!ub(t,e)){if(xx(t))throw Error(K(418));e=Ni(n.nextSibling);var r=Fn;e&&ub(t,e)?Yj(r,n):(t.flags=t.flags&-4097|2,at=!1,Fn=t)}}else{if(xx(t))throw Error(K(418));t.flags=t.flags&-4097|2,at=!1,Fn=t}}}function db(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fn=t}function Jd(t){if(t!==Fn)return!1;if(!at)return db(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fx(t.type,t.memoizedProps)),e&&(e=Ln)){if(xx(t))throw Xj(),Error(K(418));for(;e;)Yj(t,e),e=Ni(e.nextSibling)}if(db(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=Ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=Fn?Ni(t.stateNode.nextSibling):null;return!0}function Xj(){for(var t=Ln;t;)t=Ni(t.nextSibling)}function bl(){Ln=Fn=null,at=!1}function mv(t){gr===null?gr=[t]:gr.push(t)}var OM=Ws.ReactCurrentBatchConfig;function Cc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Zd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hb(t){var e=t._init;return e(t._payload)}function Jj(t){function e(v,x){if(t){var E=v.deletions;E===null?(v.deletions=[x],v.flags|=16):E.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Si(v,x),v.index=0,v.sibling=null,v}function a(v,x,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<x?(v.flags|=2,x):E):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,x,E,I){return x===null||x.tag!==6?(x=ag(E,v.mode,I),x.return=v,x):(x=s(x,E),x.return=v,x)}function c(v,x,E,I){var O=E.type;return O===Ao?h(v,x,E.props.children,I,E.key):x!==null&&(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===si&&hb(O)===x.type)?(I=s(x,E.props),I.ref=Cc(v,x,E),I.return=v,I):(I=Ph(E.type,E.key,E.props,null,v.mode,I),I.ref=Cc(v,x,E),I.return=v,I)}function u(v,x,E,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=og(E,v.mode,I),x.return=v,x):(x=s(x,E.children||[]),x.return=v,x)}function h(v,x,E,I,O){return x===null||x.tag!==7?(x=ka(E,v.mode,I,O),x.return=v,x):(x=s(x,E),x.return=v,x)}function f(v,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ag(""+x,v.mode,E),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zd:return E=Ph(x.type,x.key,x.props,null,v.mode,E),E.ref=Cc(v,null,x),E.return=v,E;case Io:return x=og(x,v.mode,E),x.return=v,x;case si:var I=x._init;return f(v,I(x._payload),E)}if(Oc(x)||Nc(x))return x=ka(x,v.mode,E,null),x.return=v,x;Zd(v,x)}return null}function m(v,x,E,I){var O=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:l(v,x,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zd:return E.key===O?c(v,x,E,I):null;case Io:return E.key===O?u(v,x,E,I):null;case si:return O=E._init,m(v,x,O(E._payload),I)}if(Oc(E)||Nc(E))return O!==null?null:h(v,x,E,I,null);Zd(v,E)}return null}function y(v,x,E,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(E)||null,l(x,v,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case zd:return v=v.get(I.key===null?E:I.key)||null,c(x,v,I,O);case Io:return v=v.get(I.key===null?E:I.key)||null,u(x,v,I,O);case si:var D=I._init;return y(v,x,E,D(I._payload),O)}if(Oc(I)||Nc(I))return v=v.get(E)||null,h(x,v,I,O,null);Zd(x,I)}return null}function j(v,x,E,I){for(var O=null,D=null,C=x,_=x=0,T=null;C!==null&&_<E.length;_++){C.index>_?(T=C,C=null):T=C.sibling;var S=m(v,C,E[_],I);if(S===null){C===null&&(C=T);break}t&&C&&S.alternate===null&&e(v,C),x=a(S,x,_),D===null?O=S:D.sibling=S,D=S,C=T}if(_===E.length)return n(v,C),at&&oa(v,_),O;if(C===null){for(;_<E.length;_++)C=f(v,E[_],I),C!==null&&(x=a(C,x,_),D===null?O=C:D.sibling=C,D=C);return at&&oa(v,_),O}for(C=r(v,C);_<E.length;_++)T=y(C,v,_,E[_],I),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?_:T.key),x=a(T,x,_),D===null?O=T:D.sibling=T,D=T);return t&&C.forEach(function(P){return e(v,P)}),at&&oa(v,_),O}function w(v,x,E,I){var O=Nc(E);if(typeof O!="function")throw Error(K(150));if(E=O.call(E),E==null)throw Error(K(151));for(var D=O=null,C=x,_=x=0,T=null,S=E.next();C!==null&&!S.done;_++,S=E.next()){C.index>_?(T=C,C=null):T=C.sibling;var P=m(v,C,S.value,I);if(P===null){C===null&&(C=T);break}t&&C&&P.alternate===null&&e(v,C),x=a(P,x,_),D===null?O=P:D.sibling=P,D=P,C=T}if(S.done)return n(v,C),at&&oa(v,_),O;if(C===null){for(;!S.done;_++,S=E.next())S=f(v,S.value,I),S!==null&&(x=a(S,x,_),D===null?O=S:D.sibling=S,D=S);return at&&oa(v,_),O}for(C=r(v,C);!S.done;_++,S=E.next())S=y(C,v,_,S.value,I),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?_:S.key),x=a(S,x,_),D===null?O=S:D.sibling=S,D=S);return t&&C.forEach(function(M){return e(v,M)}),at&&oa(v,_),O}function N(v,x,E,I){if(typeof E=="object"&&E!==null&&E.type===Ao&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case zd:e:{for(var O=E.key,D=x;D!==null;){if(D.key===O){if(O=E.type,O===Ao){if(D.tag===7){n(v,D.sibling),x=s(D,E.props.children),x.return=v,v=x;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===si&&hb(O)===D.type){n(v,D.sibling),x=s(D,E.props),x.ref=Cc(v,D,E),x.return=v,v=x;break e}n(v,D);break}else e(v,D);D=D.sibling}E.type===Ao?(x=ka(E.props.children,v.mode,I,E.key),x.return=v,v=x):(I=Ph(E.type,E.key,E.props,null,v.mode,I),I.ref=Cc(v,x,E),I.return=v,v=I)}return o(v);case Io:e:{for(D=E.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(v,x.sibling),x=s(x,E.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=og(E,v.mode,I),x.return=v,v=x}return o(v);case si:return D=E._init,N(v,x,D(E._payload),I)}if(Oc(E))return j(v,x,E,I);if(Nc(E))return w(v,x,E,I);Zd(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,E),x.return=v,v=x):(n(v,x),x=ag(E,v.mode,I),x.return=v,v=x),o(v)):n(v,x)}return N}var Nl=Jj(!0),Zj=Jj(!1),uf=Qi(null),df=null,Vo=null,pv=null;function gv(){pv=Vo=df=null}function xv(t){var e=uf.current;it(uf),t._currentValue=e}function vx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Go(t,e){df=t,pv=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(pv!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(df===null)throw Error(K(308));Vo=t,df.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var ga=null;function yv(t){ga===null?ga=[t]:ga.push(t)}function eT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yv(e)):(n.next=s.next,s.next=n),e.interleaved=n,Os(t,r)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ii=!1;function vv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,He&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Os(t,n)}return s=r.interleaved,s===null?(e.next=e,yv(r)):(e.next=s.next,s.next=e),r.interleaved=e,Os(t,n)}function Sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sv(t,n)}}function fb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hf(t,e,n,r){var s=t.updateQueue;ii=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,h=u=c=null,l=a;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,w=l;switch(m=e,y=n,w.tag){case 1:if(j=w.payload,typeof j=="function"){f=j.call(y,f,m);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,m=typeof j=="function"?j.call(y,f,m):j,m==null)break e;f=mt({},f,m);break e;case 2:ii=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);La|=o,t.lanes=o,t.memoizedState=f}}function mb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Zu={},Wr=Qi(Zu),Tu=Qi(Zu),Su=Qi(Zu);function xa(t){if(t===Zu)throw Error(K(174));return t}function wv(t,e){switch(tt(Su,e),tt(Tu,t),tt(Wr,Zu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zg(e,t)}it(Wr),tt(Wr,e)}function El(){it(Wr),it(Tu),it(Su)}function nT(t){xa(Su.current);var e=xa(Wr.current),n=Zg(e,t.type);e!==n&&(tt(Tu,t),tt(Wr,n))}function _v(t){Tu.current===t&&(it(Wr),it(Tu))}var dt=Qi(0);function ff(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eg=[];function bv(){for(var t=0;t<eg.length;t++)eg[t]._workInProgressVersionPrimary=null;eg.length=0}var Ch=Ws.ReactCurrentDispatcher,tg=Ws.ReactCurrentBatchConfig,Oa=0,ft=null,At=null,Ot=null,mf=!1,tu=!1,Cu=0,LM=0;function Zt(){throw Error(K(321))}function Nv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function Ev(t,e,n,r,s,a){if(Oa=a,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ch.current=t===null||t.memoizedState===null?$M:zM,t=n(r,s),tu){a=0;do{if(tu=!1,Cu=0,25<=a)throw Error(K(301));a+=1,Ot=At=null,e.updateQueue=null,Ch.current=BM,t=n(r,s)}while(tu)}if(Ch.current=pf,e=At!==null&&At.next!==null,Oa=0,Ot=At=ft=null,mf=!1,e)throw Error(K(300));return t}function jv(){var t=Cu!==0;return Cu=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ft.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function or(){if(At===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Ot===null?ft.memoizedState:Ot.next;if(e!==null)Ot=e,At=t;else{if(t===null)throw Error(K(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ot===null?ft.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Iu(t,e){return typeof e=="function"?e(t):e}function ng(t){var e=or(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=At,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Oa&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,ft.lanes|=h,La|=h}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Tr(r,e.memoizedState)||(jn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,ft.lanes|=a,La|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rg(t){var e=or(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Tr(a,e.memoizedState)||(jn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function rT(){}function sT(t,e){var n=ft,r=or(),s=e(),a=!Tr(r.memoizedState,s);if(a&&(r.memoizedState=s,jn=!0),r=r.queue,Tv(oT.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Au(9,aT.bind(null,n,r,s,e),void 0,null),Ut===null)throw Error(K(349));Oa&30||iT(n,e,s)}return s}function iT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aT(t,e,n,r){e.value=n,e.getSnapshot=r,lT(e)&&cT(t)}function oT(t,e,n){return n(function(){lT(e)&&cT(t)})}function lT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function cT(t){var e=Os(t,1);e!==null&&br(e,t,1,-1)}function pb(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:t},e.queue=t,t=t.dispatch=UM.bind(null,ft,t),[e.memoizedState,t]}function Au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uT(){return or().memoizedState}function Ih(t,e,n,r){var s=Or();ft.flags|=t,s.memoizedState=Au(1|e,n,void 0,r===void 0?null:r)}function lm(t,e,n,r){var s=or();r=r===void 0?null:r;var a=void 0;if(At!==null){var o=At.memoizedState;if(a=o.destroy,r!==null&&Nv(r,o.deps)){s.memoizedState=Au(e,n,a,r);return}}ft.flags|=t,s.memoizedState=Au(1|e,n,a,r)}function gb(t,e){return Ih(8390656,8,t,e)}function Tv(t,e){return lm(2048,8,t,e)}function dT(t,e){return lm(4,2,t,e)}function hT(t,e){return lm(4,4,t,e)}function fT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mT(t,e,n){return n=n!=null?n.concat([t]):null,lm(4,4,fT.bind(null,e,t),n)}function Sv(){}function pT(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gT(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xT(t,e,n){return Oa&21?(Tr(n,e)||(n=bj(),ft.lanes|=n,La|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jn=!0),t.memoizedState=n)}function VM(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=tg.transition;tg.transition={};try{t(!1),e()}finally{Ge=n,tg.transition=r}}function yT(){return or().memoizedState}function FM(t,e,n){var r=Ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vT(t))wT(e,n);else if(n=eT(t,e,n,r),n!==null){var s=fn();br(n,t,r,s),_T(n,e,r)}}function UM(t,e,n){var r=Ti(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vT(t))wT(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Tr(l,o)){var c=e.interleaved;c===null?(s.next=s,yv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=eT(t,e,s,r),n!==null&&(s=fn(),br(n,t,r,s),_T(n,e,r))}}function vT(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function wT(t,e){tu=mf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _T(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sv(t,n)}}var pf={readContext:ar,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},$M={readContext:ar,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:gb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,fT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=Or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FM.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:pb,useDebugValue:Sv,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=pb(!1),e=t[0];return t=VM.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,s=Or();if(at){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Ut===null)throw Error(K(349));Oa&30||iT(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,gb(oT.bind(null,r,a,t),[t]),r.flags|=2048,Au(9,aT.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Or(),e=Ut.identifierPrefix;if(at){var n=Es,r=Ns;n=(r&~(1<<32-_r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zM={readContext:ar,useCallback:pT,useContext:ar,useEffect:Tv,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:hT,useMemo:gT,useReducer:ng,useRef:uT,useState:function(){return ng(Iu)},useDebugValue:Sv,useDeferredValue:function(t){var e=or();return xT(e,At.memoizedState,t)},useTransition:function(){var t=ng(Iu)[0],e=or().memoizedState;return[t,e]},useMutableSource:rT,useSyncExternalStore:sT,useId:yT,unstable_isNewReconciler:!1},BM={readContext:ar,useCallback:pT,useContext:ar,useEffect:Tv,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:hT,useMemo:gT,useReducer:rg,useRef:uT,useState:function(){return rg(Iu)},useDebugValue:Sv,useDeferredValue:function(t){var e=or();return At===null?e.memoizedState=t:xT(e,At.memoizedState,t)},useTransition:function(){var t=rg(Iu)[0],e=or().memoizedState;return[t,e]},useMutableSource:rT,useSyncExternalStore:sT,useId:yT,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cm={isMounted:function(t){return(t=t._reactInternals)?Za(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fn(),s=Ti(t),a=Ss(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ei(t,a,s),e!==null&&(br(e,t,s,r),Sh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fn(),s=Ti(t),a=Ss(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ei(t,a,s),e!==null&&(br(e,t,s,r),Sh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),r=Ti(t),s=Ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ei(t,s,r),e!==null&&(br(e,t,r,n),Sh(e,t,r))}};function xb(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!bu(n,r)||!bu(s,a):!0}function bT(t,e,n){var r=!1,s=Mi,a=e.contextType;return typeof a=="object"&&a!==null?a=ar(a):(s=Sn(e)?Da:on.current,r=e.contextTypes,a=(r=r!=null)?_l(t,s):Mi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function yb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cm.enqueueReplaceState(e,e.state,null)}function _x(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=ar(a):(a=Sn(e)?Da:on.current,s.context=_l(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(wx(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cm.enqueueReplaceState(s,s.state,null),hf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jl(t,e){try{var n="",r=e;do n+=xD(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HM=typeof WeakMap=="function"?WeakMap:Map;function NT(t,e,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xf||(xf=!0,Rx=r),bx(t,e)},n}function ET(t,e,n){n=Ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){bx(t,e),typeof r!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sO.bind(null,t,e,n),e.then(t,t))}function wb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _b(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ss(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var WM=Ws.ReactCurrentOwner,jn=!1;function hn(t,e,n,r){e.child=t===null?Zj(e,null,n,r):Nl(e,t.child,n,r)}function bb(t,e,n,r,s){n=n.render;var a=e.ref;return Go(e,s),r=Ev(t,e,n,r,a,s),n=jv(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):(at&&n&&hv(e),e.flags|=1,hn(t,e,r,s),e.child)}function Nb(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Mv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,jT(t,e,a,r,s)):(t=Ph(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:bu,n(o,r)&&t.ref===e.ref)return Ls(t,e,s)}return e.flags|=1,t=Si(a,r),t.ref=e.ref,t.return=e,e.child=t}function jT(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(bu(a,r)&&t.ref===e.ref)if(jn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(jn=!0);else return e.lanes=t.lanes,Ls(t,e,s)}return Nx(t,e,n,r,s)}function TT(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Uo,kn),kn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Uo,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,tt(Uo,kn),kn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,tt(Uo,kn),kn|=r;return hn(t,e,s,n),e.child}function ST(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nx(t,e,n,r,s){var a=Sn(n)?Da:on.current;return a=_l(e,a),Go(e,s),n=Ev(t,e,n,r,a,s),r=jv(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):(at&&r&&hv(e),e.flags|=1,hn(t,e,n,s),e.child)}function Eb(t,e,n,r,s){if(Sn(n)){var a=!0;of(e)}else a=!1;if(Go(e,s),e.stateNode===null)Ah(t,e),bT(e,n,r),_x(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=Sn(n)?Da:on.current,u=_l(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&yb(e,o,r,u),ii=!1;var m=e.memoizedState;o.state=m,hf(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Tn.current||ii?(typeof h=="function"&&(wx(e,n,h,r),c=e.memoizedState),(l=ii||xb(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hr(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ar(c):(c=Sn(n)?Da:on.current,c=_l(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&yb(e,o,r,c),ii=!1,m=e.memoizedState,o.state=m,hf(e,r,o,s);var j=e.memoizedState;l!==f||m!==j||Tn.current||ii?(typeof y=="function"&&(wx(e,n,y,r),j=e.memoizedState),(u=ii||xb(e,n,u,r,m,j,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ex(t,e,n,r,a,s)}function Ex(t,e,n,r,s,a){ST(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&cb(e,n,!1),Ls(t,e,a);r=e.stateNode,WM.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nl(e,t.child,null,a),e.child=Nl(e,null,l,a)):hn(t,e,l,a),e.memoizedState=r.state,s&&cb(e,n,!0),e.child}function CT(t){var e=t.stateNode;e.pendingContext?lb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lb(t,e.context,!1),wv(t,e.containerInfo)}function jb(t,e,n,r,s){return bl(),mv(s),e.flags|=256,hn(t,e,n,r),e.child}var jx={dehydrated:null,treeContext:null,retryLane:0};function Tx(t){return{baseLanes:t,cachePool:null,transitions:null}}function IT(t,e,n){var r=e.pendingProps,s=dt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tt(dt,s&1),t===null)return yx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=hm(o,r,0,null),t=ka(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Tx(n),e.memoizedState=jx,t):Cv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return qM(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Si(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Si(l,a):(a=ka(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Tx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=jx,r}return a=t.child,t=a.sibling,r=Si(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cv(t,e){return e=hm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eh(t,e,n,r){return r!==null&&mv(r),Nl(e,t.child,null,n),t=Cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qM(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=sg(Error(K(422))),eh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=hm({mode:"visible",children:r.children},s,0,null),a=ka(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Nl(e,t.child,null,o),e.child.memoizedState=Tx(o),e.memoizedState=jx,a);if(!(e.mode&1))return eh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(K(419)),r=sg(a,r,void 0),eh(t,e,o,r)}if(l=(o&t.childLanes)!==0,jn||l){if(r=Ut,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Os(t,s),br(r,t,s,-1))}return Dv(),r=sg(Error(K(421))),eh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iO.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ln=Ni(s.nextSibling),Fn=e,at=!0,gr=null,t!==null&&(Zn[er++]=Ns,Zn[er++]=Es,Zn[er++]=Ma,Ns=t.id,Es=t.overflow,Ma=e),e=Cv(e,r.children),e.flags|=4096,e)}function Tb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vx(t.return,e,n)}function ig(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function AT(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(hn(t,e,r.children,n),r=dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tb(t,n,e);else if(t.tag===19)Tb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tt(dt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ff(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ig(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ff(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ig(e,!0,n,null,a);break;case"together":ig(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KM(t,e,n){switch(e.tag){case 3:CT(e),bl();break;case 5:nT(e);break;case 1:Sn(e.type)&&of(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;tt(uf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tt(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?IT(t,e,n):(tt(dt,dt.current&1),t=Ls(t,e,n),t!==null?t.sibling:null);tt(dt,dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tt(dt,dt.current),r)break;return null;case 22:case 23:return e.lanes=0,TT(t,e,n)}return Ls(t,e,n)}var kT,Sx,RT,PT;kT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sx=function(){};RT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xa(Wr.current);var a=null;switch(n){case"input":s=Qg(t,s),r=Qg(t,r),a=[];break;case"select":s=mt({},s,{value:void 0}),r=mt({},r,{value:void 0}),a=[];break;case"textarea":s=Jg(t,s),r=Jg(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sf)}ex(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pu.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};PT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ic(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GM(t,e,n){var r=e.pendingProps;switch(fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Sn(e.type)&&af(),en(e),null;case 3:return r=e.stateNode,El(),it(Tn),it(on),bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Mx(gr),gr=null))),Sx(t,e),en(e),null;case 5:_v(e);var s=xa(Su.current);if(n=e.type,t!==null&&e.stateNode!=null)RT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return en(e),null}if(t=xa(Wr.current),Jd(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[zr]=e,r[ju]=a,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(s=0;s<Vc.length;s++)st(Vc[s],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":M_(r,a),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},st("invalid",r);break;case"textarea":L_(r,a),st("invalid",r)}ex(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xd(r.textContent,l,t),s=["children",""+l]):pu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&st("scroll",r)}switch(n){case"input":Bd(r),O_(r,a,!0);break;case"textarea":Bd(r),V_(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=sf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oj(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zr]=e,t[ju]=r,kT(t,e,!1,!1),e.stateNode=t;e:{switch(o=tx(n,r),n){case"dialog":st("cancel",t),st("close",t),s=r;break;case"iframe":case"object":case"embed":st("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vc.length;s++)st(Vc[s],t);s=r;break;case"source":st("error",t),s=r;break;case"img":case"image":case"link":st("error",t),st("load",t),s=r;break;case"details":st("toggle",t),s=r;break;case"input":M_(t,r),s=Qg(t,r),st("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=mt({},r,{value:void 0}),st("invalid",t);break;case"textarea":L_(t,r),s=Jg(t,r),st("invalid",t);break;default:s=r}ex(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?uj(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lj(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&gu(t,c):typeof c=="number"&&gu(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(pu.hasOwnProperty(a)?c!=null&&a==="onScroll"&&st("scroll",t):c!=null&&Jy(t,a,c,o))}switch(n){case"input":Bd(t),O_(t,r,!1);break;case"textarea":Bd(t),V_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Di(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ho(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ho(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)PT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=xa(Su.current),xa(Wr.current),Jd(e)){if(r=e.stateNode,n=e.memoizedProps,r[zr]=e,(a=r.nodeValue!==n)&&(t=Fn,t!==null))switch(t.tag){case 3:Xd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xd(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zr]=e,e.stateNode=r}return en(e),null;case 13:if(it(dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Ln!==null&&e.mode&1&&!(e.flags&128))Xj(),bl(),e.flags|=98560,a=!1;else if(a=Jd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(K(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(K(317));a[zr]=e}else bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),a=!1}else gr!==null&&(Mx(gr),gr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Rt===0&&(Rt=3):Dv())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return El(),Sx(t,e),t===null&&Nu(e.stateNode.containerInfo),en(e),null;case 10:return xv(e.type._context),en(e),null;case 17:return Sn(e.type)&&af(),en(e),null;case 19:if(it(dt),a=e.memoizedState,a===null)return en(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Ic(a,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ff(t),o!==null){for(e.flags|=128,Ic(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(dt,dt.current&1|2),e.child}t=t.sibling}a.tail!==null&&bt()>Tl&&(e.flags|=128,r=!0,Ic(a,!1),e.lanes=4194304)}else{if(!r)if(t=ff(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ic(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!at)return en(e),null}else 2*bt()-a.renderingStartTime>Tl&&n!==1073741824&&(e.flags|=128,r=!0,Ic(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bt(),e.sibling=null,n=dt.current,tt(dt,r?n&1|2:n&1),e):(en(e),null);case 22:case 23:return Pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function QM(t,e){switch(fv(e),e.tag){case 1:return Sn(e.type)&&af(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return El(),it(Tn),it(on),bv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _v(e),null;case 13:if(it(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(dt),null;case 4:return El(),null;case 10:return xv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var th=!1,sn=!1,YM=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Cx(t,e,n){try{n()}catch(r){yt(t,e,r)}}var Sb=!1;function XM(t,e){if(dx=tf,t=Vj(),dv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===s&&(l=o),m===a&&++h===r&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hx={focusedElem:t,selectionRange:n},tf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,N=j.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:hr(e.type,w),N);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(I){yt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return j=Sb,Sb=!1,j}function nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Cx(e,n,a)}s=s.next}while(s!==r)}}function um(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ix(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DT(t){var e=t.alternate;e!==null&&(t.alternate=null,DT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zr],delete e[ju],delete e[px],delete e[PM],delete e[DM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MT(t){return t.tag===5||t.tag===3||t.tag===4}function Cb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ax(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sf));else if(r!==4&&(t=t.child,t!==null))for(Ax(t,e,n),t=t.sibling;t!==null;)Ax(t,e,n),t=t.sibling}function kx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kx(t,e,n),t=t.sibling;t!==null;)kx(t,e,n),t=t.sibling}var Wt=null,mr=!1;function Js(t,e,n){for(n=n.child;n!==null;)OT(t,e,n),n=n.sibling}function OT(t,e,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(nm,n)}catch{}switch(n.tag){case 5:sn||Fo(n,e);case 6:var r=Wt,s=mr;Wt=null,Js(t,e,n),Wt=r,mr=s,Wt!==null&&(mr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(mr?(t=Wt,n=n.stateNode,t.nodeType===8?Jp(t.parentNode,n):t.nodeType===1&&Jp(t,n),wu(t)):Jp(Wt,n.stateNode));break;case 4:r=Wt,s=mr,Wt=n.stateNode.containerInfo,mr=!0,Js(t,e,n),Wt=r,mr=s;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Cx(n,e,o),s=s.next}while(s!==r)}Js(t,e,n);break;case 1:if(!sn&&(Fo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,e,l)}Js(t,e,n);break;case 21:Js(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,Js(t,e,n),sn=r):Js(t,e,n);break;default:Js(t,e,n)}}function Ib(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YM),e.forEach(function(r){var s=aO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Wt=l.stateNode,mr=!1;break e;case 3:Wt=l.stateNode.containerInfo,mr=!0;break e;case 4:Wt=l.stateNode.containerInfo,mr=!0;break e}l=l.return}if(Wt===null)throw Error(K(160));OT(a,o,s),Wt=null,mr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){yt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LT(e,t),e=e.sibling}function LT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Dr(t),r&4){try{nu(3,t,t.return),um(3,t)}catch(w){yt(t,t.return,w)}try{nu(5,t,t.return)}catch(w){yt(t,t.return,w)}}break;case 1:ur(e,t),Dr(t),r&512&&n!==null&&Fo(n,n.return);break;case 5:if(ur(e,t),Dr(t),r&512&&n!==null&&Fo(n,n.return),t.flags&32){var s=t.stateNode;try{gu(s,"")}catch(w){yt(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&ij(s,a),tx(l,o);var u=tx(l,a);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?uj(s,f):h==="dangerouslySetInnerHTML"?lj(s,f):h==="children"?gu(s,f):Jy(s,h,f,u)}switch(l){case"input":Yg(s,a);break;case"textarea":aj(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Ho(s,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?Ho(s,!!a.multiple,a.defaultValue,!0):Ho(s,!!a.multiple,a.multiple?[]:"",!1))}s[ju]=a}catch(w){yt(t,t.return,w)}}break;case 6:if(ur(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(w){yt(t,t.return,w)}}break;case 3:if(ur(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wu(e.containerInfo)}catch(w){yt(t,t.return,w)}break;case 4:ur(e,t),Dr(t);break;case 13:ur(e,t),Dr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(kv=bt())),r&4&&Ib(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||h,ur(e,t),sn=u):ur(e,t),Dr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,y=m.child,m.tag){case 0:case 11:case 14:case 15:nu(4,m,m.return);break;case 1:Fo(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(w){yt(r,n,w)}}break;case 5:Fo(m,m.return);break;case 22:if(m.memoizedState!==null){kb(f);continue}}y!==null?(y.return=m,ie=y):kb(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cj("display",o))}catch(w){yt(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){yt(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ur(e,t),Dr(t),r&4&&Ib(t);break;case 21:break;default:ur(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MT(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gu(s,""),r.flags&=-33);var a=Cb(t);kx(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Cb(t);Ax(t,l,o);break;default:throw Error(K(161))}}catch(c){yt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JM(t,e,n){ie=t,VT(t)}function VT(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||th;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||sn;l=th;var u=sn;if(th=o,(sn=c)&&!u)for(ie=s;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Rb(s):c!==null?(c.return=o,ie=c):Rb(s);for(;a!==null;)ie=a,VT(a),a=a.sibling;ie=s,th=l,sn=u}Ab(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ie=a):Ab(t)}}function Ab(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||um(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&mb(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mb(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&wu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}sn||e.flags&512&&Ix(e)}catch(m){yt(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function kb(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Rb(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{um(4,e)}catch(c){yt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){yt(e,s,c)}}var a=e.return;try{Ix(e)}catch(c){yt(e,a,c)}break;case 5:var o=e.return;try{Ix(e)}catch(c){yt(e,o,c)}}}catch(c){yt(e,e.return,c)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var ZM=Math.ceil,gf=Ws.ReactCurrentDispatcher,Iv=Ws.ReactCurrentOwner,sr=Ws.ReactCurrentBatchConfig,He=0,Ut=null,Et=null,Gt=0,kn=0,Uo=Qi(0),Rt=0,ku=null,La=0,dm=0,Av=0,ru=null,Nn=null,kv=0,Tl=1/0,ps=null,xf=!1,Rx=null,ji=null,nh=!1,yi=null,yf=0,su=0,Px=null,kh=-1,Rh=0;function fn(){return He&6?bt():kh!==-1?kh:kh=bt()}function Ti(t){return t.mode&1?He&2&&Gt!==0?Gt&-Gt:OM.transition!==null?(Rh===0&&(Rh=bj()),Rh):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:Ij(t.type)),t):1}function br(t,e,n,r){if(50<su)throw su=0,Px=null,Error(K(185));Yu(t,n,r),(!(He&2)||t!==Ut)&&(t===Ut&&(!(He&2)&&(dm|=n),Rt===4&&oi(t,Gt)),Cn(t,r),n===1&&He===0&&!(e.mode&1)&&(Tl=bt()+500,om&&Yi()))}function Cn(t,e){var n=t.callbackNode;OD(t,e);var r=ef(t,t===Ut?Gt:0);if(r===0)n!==null&&$_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$_(n),e===1)t.tag===0?MM(Pb.bind(null,t)):Gj(Pb.bind(null,t)),kM(function(){!(He&6)&&Yi()}),n=null;else{switch(Nj(r)){case 1:n=rv;break;case 4:n=wj;break;case 16:n=Zh;break;case 536870912:n=_j;break;default:n=Zh}n=qT(n,FT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FT(t,e){if(kh=-1,Rh=0,He&6)throw Error(K(327));var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var r=ef(t,t===Ut?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vf(t,r);else{e=r;var s=He;He|=2;var a=$T();(Ut!==t||Gt!==e)&&(ps=null,Tl=bt()+500,Aa(t,e));do try{nO();break}catch(l){UT(t,l)}while(!0);gv(),gf.current=a,He=s,Et!==null?e=0:(Ut=null,Gt=0,e=Rt)}if(e!==0){if(e===2&&(s=ax(t),s!==0&&(r=s,e=Dx(t,s))),e===1)throw n=ku,Aa(t,0),oi(t,r),Cn(t,bt()),n;if(e===6)oi(t,r);else{if(s=t.current.alternate,!(r&30)&&!eO(s)&&(e=vf(t,r),e===2&&(a=ax(t),a!==0&&(r=a,e=Dx(t,a))),e===1))throw n=ku,Aa(t,0),oi(t,r),Cn(t,bt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:la(t,Nn,ps);break;case 3:if(oi(t,r),(r&130023424)===r&&(e=kv+500-bt(),10<e)){if(ef(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mx(la.bind(null,t,Nn,ps),e);break}la(t,Nn,ps);break;case 4:if(oi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_r(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZM(r/1960))-r,10<r){t.timeoutHandle=mx(la.bind(null,t,Nn,ps),r);break}la(t,Nn,ps);break;case 5:la(t,Nn,ps);break;default:throw Error(K(329))}}}return Cn(t,bt()),t.callbackNode===n?FT.bind(null,t):null}function Dx(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(Aa(t,e).flags|=256),t=vf(t,e),t!==2&&(e=Nn,Nn=n,e!==null&&Mx(e)),t}function Mx(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function eO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Tr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oi(t,e){for(e&=~Av,e&=~dm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_r(e),r=1<<n;t[n]=-1,e&=~r}}function Pb(t){if(He&6)throw Error(K(327));Qo();var e=ef(t,0);if(!(e&1))return Cn(t,bt()),null;var n=vf(t,e);if(t.tag!==0&&n===2){var r=ax(t);r!==0&&(e=r,n=Dx(t,r))}if(n===1)throw n=ku,Aa(t,0),oi(t,e),Cn(t,bt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,la(t,Nn,ps),Cn(t,bt()),null}function Rv(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&(Tl=bt()+500,om&&Yi())}}function Va(t){yi!==null&&yi.tag===0&&!(He&6)&&Qo();var e=He;He|=1;var n=sr.transition,r=Ge;try{if(sr.transition=null,Ge=1,t)return t()}finally{Ge=r,sr.transition=n,He=e,!(He&6)&&Yi()}}function Pv(){kn=Uo.current,it(Uo)}function Aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AM(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&af();break;case 3:El(),it(Tn),it(on),bv();break;case 5:_v(r);break;case 4:El();break;case 13:it(dt);break;case 19:it(dt);break;case 10:xv(r.type._context);break;case 22:case 23:Pv()}n=n.return}if(Ut=t,Et=t=Si(t.current,null),Gt=kn=e,Rt=0,ku=null,Av=dm=La=0,Nn=ru=null,ga!==null){for(e=0;e<ga.length;e++)if(n=ga[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}ga=null}return t}function UT(t,e){do{var n=Et;try{if(gv(),Ch.current=pf,mf){for(var r=ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mf=!1}if(Oa=0,Ot=At=ft=null,tu=!1,Cu=0,Iv.current=null,n===null||n.return===null){Rt=1,ku=e,Et=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=wb(o);if(y!==null){y.flags&=-257,_b(y,o,l,a,e),y.mode&1&&vb(a,u,e),e=y,c=u;var j=e.updateQueue;if(j===null){var w=new Set;w.add(c),e.updateQueue=w}else j.add(c);break e}else{if(!(e&1)){vb(a,u,e),Dv();break e}c=Error(K(426))}}else if(at&&l.mode&1){var N=wb(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),_b(N,o,l,a,e),mv(jl(c,l));break e}}a=c=jl(c,l),Rt!==4&&(Rt=2),ru===null?ru=[a]:ru.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=NT(a,c,e);fb(a,v);break e;case 1:l=c;var x=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ji===null||!ji.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=ET(a,l,e);fb(a,I);break e}}a=a.return}while(a!==null)}BT(n)}catch(O){e=O,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function $T(){var t=gf.current;return gf.current=pf,t===null?pf:t}function Dv(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ut===null||!(La&268435455)&&!(dm&268435455)||oi(Ut,Gt)}function vf(t,e){var n=He;He|=2;var r=$T();(Ut!==t||Gt!==e)&&(ps=null,Aa(t,e));do try{tO();break}catch(s){UT(t,s)}while(!0);if(gv(),He=n,gf.current=r,Et!==null)throw Error(K(261));return Ut=null,Gt=0,Rt}function tO(){for(;Et!==null;)zT(Et)}function nO(){for(;Et!==null&&!SD();)zT(Et)}function zT(t){var e=WT(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?BT(t):Et=e,Iv.current=null}function BT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QM(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,Et=null;return}}else if(n=GM(n,e,kn),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);Rt===0&&(Rt=5)}function la(t,e,n){var r=Ge,s=sr.transition;try{sr.transition=null,Ge=1,rO(t,e,n,r)}finally{sr.transition=s,Ge=r}return null}function rO(t,e,n,r){do Qo();while(yi!==null);if(He&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(LD(t,a),t===Ut&&(Et=Ut=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nh||(nh=!0,qT(Zh,function(){return Qo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=sr.transition,sr.transition=null;var o=Ge;Ge=1;var l=He;He|=4,Iv.current=null,XM(t,n),LT(n,t),NM(hx),tf=!!dx,hx=dx=null,t.current=n,JM(n),CD(),He=l,Ge=o,sr.transition=a}else t.current=n;if(nh&&(nh=!1,yi=t,yf=s),a=t.pendingLanes,a===0&&(ji=null),kD(n.stateNode),Cn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xf)throw xf=!1,t=Rx,Rx=null,t;return yf&1&&t.tag!==0&&Qo(),a=t.pendingLanes,a&1?t===Px?su++:(su=0,Px=t):su=0,Yi(),null}function Qo(){if(yi!==null){var t=Nj(yf),e=sr.transition,n=Ge;try{if(sr.transition=null,Ge=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,yf=0,He&6)throw Error(K(331));var s=He;for(He|=4,ie=t.current;ie!==null;){var a=ie,o=a.child;if(ie.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ie=u;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:nu(8,h,a)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,y=h.return;if(DT(h),h===u){ie=null;break}if(m!==null){m.return=y,ie=m;break}ie=y}}}var j=a.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}ie=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ie=o;else e:for(;ie!==null;){if(a=ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ie=v;break e}ie=a.return}}var x=t.current;for(ie=x;ie!==null;){o=ie;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ie=E;else e:for(o=x;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:um(9,l)}}catch(O){yt(l,l.return,O)}if(l===o){ie=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,ie=I;break e}ie=l.return}}if(He=s,Yi(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(nm,t)}catch{}r=!0}return r}finally{Ge=n,sr.transition=e}}return!1}function Db(t,e,n){e=jl(n,e),e=NT(t,e,1),t=Ei(t,e,1),e=fn(),t!==null&&(Yu(t,1,e),Cn(t,e))}function yt(t,e,n){if(t.tag===3)Db(t,t,n);else for(;e!==null;){if(e.tag===3){Db(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ji===null||!ji.has(r))){t=jl(n,t),t=ET(e,t,1),e=Ei(e,t,1),t=fn(),e!==null&&(Yu(e,1,t),Cn(e,t));break}}e=e.return}}function sO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Gt&n)===n&&(Rt===4||Rt===3&&(Gt&130023424)===Gt&&500>bt()-kv?Aa(t,0):Av|=n),Cn(t,e)}function HT(t,e){e===0&&(t.mode&1?(e=qd,qd<<=1,!(qd&130023424)&&(qd=4194304)):e=1);var n=fn();t=Os(t,e),t!==null&&(Yu(t,e,n),Cn(t,n))}function iO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HT(t,n)}function aO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),HT(t,n)}var WT;WT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jn=!1,KM(t,e,n);jn=!!(t.flags&131072)}else jn=!1,at&&e.flags&1048576&&Qj(e,cf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ah(t,e),t=e.pendingProps;var s=_l(e,on.current);Go(e,n),s=Ev(null,e,r,t,s,n);var a=jv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(a=!0,of(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vv(e),s.updater=cm,e.stateNode=s,s._reactInternals=e,_x(e,r,t,n),e=Ex(null,e,r,!0,a,n)):(e.tag=0,at&&a&&hv(e),hn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ah(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lO(r),t=hr(r,t),s){case 0:e=Nx(null,e,r,t,n);break e;case 1:e=Eb(null,e,r,t,n);break e;case 11:e=bb(null,e,r,t,n);break e;case 14:e=Nb(null,e,r,hr(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Nx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Eb(t,e,r,s,n);case 3:e:{if(CT(e),t===null)throw Error(K(387));r=e.pendingProps,a=e.memoizedState,s=a.element,tT(t,e),hf(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=jl(Error(K(423)),e),e=jb(t,e,r,n,s);break e}else if(r!==s){s=jl(Error(K(424)),e),e=jb(t,e,r,n,s);break e}else for(Ln=Ni(e.stateNode.containerInfo.firstChild),Fn=e,at=!0,gr=null,n=Zj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bl(),r===s){e=Ls(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return nT(e),t===null&&yx(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,fx(r,s)?o=null:a!==null&&fx(r,a)&&(e.flags|=32),ST(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&yx(e),null;case 13:return IT(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nl(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),bb(t,e,r,s,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,tt(uf,r._currentValue),r._currentValue=o,a!==null)if(Tr(a.value,o)){if(a.children===s.children&&!Tn.current){e=Ls(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Ss(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),vx(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),vx(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}hn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Go(e,n),s=ar(s),r=r(s),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,s=hr(r,e.pendingProps),s=hr(r.type,s),Nb(t,e,r,s,n);case 15:return jT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Ah(t,e),e.tag=1,Sn(r)?(t=!0,of(e)):t=!1,Go(e,n),bT(e,r,s),_x(e,r,s,n),Ex(null,e,r,!0,t,n);case 19:return AT(t,e,n);case 22:return TT(t,e,n)}throw Error(K(156,e.tag))};function qT(t,e){return vj(t,e)}function oO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new oO(t,e,n,r)}function Mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lO(t){if(typeof t=="function")return Mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ph(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ao:return ka(n.children,s,a,e);case Zy:o=8,s|=8;break;case Wg:return t=nr(12,n,e,s|2),t.elementType=Wg,t.lanes=a,t;case qg:return t=nr(13,n,e,s),t.elementType=qg,t.lanes=a,t;case Kg:return t=nr(19,n,e,s),t.elementType=Kg,t.lanes=a,t;case nj:return hm(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ej:o=10;break e;case tj:o=9;break e;case ev:o=11;break e;case tv:o=14;break e;case si:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=nr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function ka(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function hm(t,e,n,r){return t=nr(22,t,r,e),t.elementType=nj,t.lanes=n,t.stateNode={isHidden:!1},t}function ag(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function og(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$p(0),this.expirationTimes=$p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,s,a,o,l,c){return t=new cO(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=nr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(a),t}function uO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KT(t){if(!t)return Mi;t=t._reactInternals;e:{if(Za(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Sn(n))return Kj(t,n,e)}return e}function GT(t,e,n,r,s,a,o,l,c){return t=Ov(n,r,!0,t,s,a,o,l,c),t.context=KT(null),n=t.current,r=fn(),s=Ti(n),a=Ss(r,s),a.callback=e??null,Ei(n,a,s),t.current.lanes=s,Yu(t,s,r),Cn(t,r),t}function fm(t,e,n,r){var s=e.current,a=fn(),o=Ti(s);return n=KT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ss(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(s,e,o),t!==null&&(br(t,s,o,a),Sh(t,s,o)),o}function wf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){Mb(t,e),(t=t.alternate)&&Mb(t,e)}function dO(){return null}var QT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vv(t){this._internalRoot=t}mm.prototype.render=Vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));fm(t,e,null,null)};mm.prototype.unmount=Vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){fm(null,t,null,null)}),e[Ms]=null}};function mm(t){this._internalRoot=t}mm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tj();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ai.length&&e!==0&&e<ai[n].priority;n++);ai.splice(n,0,t),n===0&&Cj(t)}};function Fv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ob(){}function hO(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=wf(o);a.call(u)}}var o=GT(e,r,t,0,null,!1,!1,"",Ob);return t._reactRootContainer=o,t[Ms]=o.current,Nu(t.nodeType===8?t.parentNode:t),Va(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=wf(c);l.call(u)}}var c=Ov(t,0,!1,null,null,!1,!1,"",Ob);return t._reactRootContainer=c,t[Ms]=c.current,Nu(t.nodeType===8?t.parentNode:t),Va(function(){fm(e,c,n,r)}),c}function gm(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=wf(o);l.call(c)}}fm(e,o,t,s)}else o=hO(n,e,t,s,r);return wf(o)}Ej=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lc(e.pendingLanes);n!==0&&(sv(e,n|1),Cn(e,bt()),!(He&6)&&(Tl=bt()+500,Yi()))}break;case 13:Va(function(){var r=Os(t,1);if(r!==null){var s=fn();br(r,t,1,s)}}),Lv(t,1)}};iv=function(t){if(t.tag===13){var e=Os(t,134217728);if(e!==null){var n=fn();br(e,t,134217728,n)}Lv(t,134217728)}};jj=function(t){if(t.tag===13){var e=Ti(t),n=Os(t,e);if(n!==null){var r=fn();br(n,t,e,r)}Lv(t,e)}};Tj=function(){return Ge};Sj=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};rx=function(t,e,n){switch(e){case"input":if(Yg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=am(r);if(!s)throw Error(K(90));sj(r),Yg(r,s)}}}break;case"textarea":aj(t,n);break;case"select":e=n.value,e!=null&&Ho(t,!!n.multiple,e,!1)}};fj=Rv;mj=Va;var fO={usingClientEntryPoint:!1,Events:[Ju,Do,am,dj,hj,Rv]},Ac={findFiberByHostInstance:pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mO={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xj(t),t===null?null:t.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||dO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{nm=rh.inject(mO),Hr=rh}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(K(200));return uO(t,e,null,n)};zn.createRoot=function(t,e){if(!Fv(t))throw Error(K(299));var n=!1,r="",s=QT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,s),t[Ms]=e.current,Nu(t.nodeType===8?t.parentNode:t),new Vv(e)};zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=xj(e),t=t===null?null:t.stateNode,t};zn.flushSync=function(t){return Va(t)};zn.hydrate=function(t,e,n){if(!pm(e))throw Error(K(200));return gm(null,t,e,!0,n)};zn.hydrateRoot=function(t,e,n){if(!Fv(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=QT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GT(e,null,t,1,n??null,s,!1,a,o),t[Ms]=e.current,Nu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mm(e)};zn.render=function(t,e,n){if(!pm(e))throw Error(K(200));return gm(null,t,e,!1,n)};zn.unmountComponentAtNode=function(t){if(!pm(t))throw Error(K(40));return t._reactRootContainer?(Va(function(){gm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ms]=null})}),!0):!1};zn.unstable_batchedUpdates=Rv;zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pm(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return gm(t,e,n,!1,r)};zn.version="18.3.1-next-f1338f8080-20240426";function YT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YT)}catch(t){console.error(t)}}YT(),YE.exports=zn;var eo=YE.exports;const pO=LE(eo);var XT,Lb=eo;XT=Lb.createRoot,Lb.hydrateRoot;function gO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,a,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~r?r:~a?a:s.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var JT={exports:{}},ZT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sl=p;function xO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yO=typeof Object.is=="function"?Object.is:xO,vO=Sl.useState,wO=Sl.useEffect,_O=Sl.useLayoutEffect,bO=Sl.useDebugValue;function NO(t,e){var n=e(),r=vO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return _O(function(){s.value=n,s.getSnapshot=e,lg(s)&&a({inst:s})},[t,n,e]),wO(function(){return lg(s)&&a({inst:s}),t(function(){lg(s)&&a({inst:s})})},[t]),bO(n),n}function lg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yO(t,n)}catch{return!0}}function EO(t,e){return e()}var jO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EO:NO;ZT.useSyncExternalStore=Sl.useSyncExternalStore!==void 0?Sl.useSyncExternalStore:jO;JT.exports=ZT;var TO=JT.exports;const SO=GE.useInsertionEffect,CO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IO=CO?p.useLayoutEffect:p.useEffect,AO=SO||IO,eS=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return AO(()=>{e[0]=t}),e[1]},kO="popstate",Uv="pushState",$v="replaceState",RO="hashchange",Vb=[kO,Uv,$v,RO],PO=t=>{for(const e of Vb)addEventListener(e,t);return()=>{for(const e of Vb)removeEventListener(e,t)}},tS=(t,e)=>TO.useSyncExternalStore(PO,t,e),DO=()=>location.search,MO=({ssrSearch:t=""}={})=>tS(DO,()=>t),Fb=()=>location.pathname,OO=({ssrPath:t}={})=>tS(Fb,t?()=>t:Fb),LO=(t,{replace:e=!1,state:n=null}={})=>history[e?$v:Uv](n,"",t),VO=(t={})=>[OO(t),LO],Ub=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ub]>"u"){for(const t of[Uv,$v]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Ub,{value:!0})}const FO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",nS=(t="")=>t==="/"?"":t,UO=(t,e)=>t[0]==="~"?t.slice(1):nS(e)+t,$O=(t="",e)=>FO($b(nS(t)),$b(e)),$b=t=>{try{return decodeURI(t)}catch{return t}},rS={hook:VO,searchHook:MO,parser:gO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},sS=p.createContext(rS),ed=()=>p.useContext(sS),iS={},aS=p.createContext(iS),zO=()=>p.useContext(aS),xm=t=>{const[e,n]=t.hook(t);return[$O(t.base,e),eS((r,s)=>n(UO(r,t.base),s))]},zv=()=>xm(ed()),oS=(t,e,n,r)=>{const{pattern:s,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,m)=>[f,c[m]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},BO=({children:t,...e})=>{var h,f;const n=ed(),r=e.hook?rS:n;let s=r;const[a,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=p.useRef({}),c=l.current,u=c;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===u&&y!==u[m]&&(l.current=u={...u}),u[m]=y,y!==r[m]&&(s=u)}return p.createElement(sS.Provider,{value:s,children:t})},zb=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,HO=t=>{let e=p.useRef(iS),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Kn=({path:t,nest:e,match:n,...r})=>{const s=ed(),[a]=xm(s),[o,l,c]=n??oS(s.parser,t,a,e),u=HO({...zO(),...l});if(!o)return null;const h=c?p.createElement(BO,{base:c},zb(r,u)):zb(r,u);return p.createElement(aS.Provider,{value:u,children:h})},bn=p.forwardRef((t,e)=>{const n=ed(),[r,s]=xm(n),{to:a="",href:o=a,onClick:l,asChild:c,children:u,className:h,replace:f,state:m,...y}=t,j=eS(N=>{N.ctrlKey||N.metaKey||N.altKey||N.shiftKey||N.button!==0||(l==null||l(N),N.defaultPrevented||(N.preventDefault(),s(o,t)))}),w=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&p.isValidElement(u)?p.cloneElement(u,{onClick:j,href:w}):p.createElement("a",{...y,onClick:j,href:w,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),lS=t=>Array.isArray(t)?t.flatMap(e=>lS(e&&e.type===p.Fragment?e.props.children:e)):[t],Bb=({children:t,location:e})=>{const n=ed(),[r]=xm(n);for(const s of lS(t)){let a=0;if(p.isValidElement(s)&&(a=oS(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:a})}return null};var Wl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Fa=typeof window>"u"||"Deno"in globalThis;function Qn(){}function WO(t,e){return typeof t=="function"?t(e):t}function Ox(t){return typeof t=="number"&&t>=0&&t!==1/0}function cS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Yo(t,e){return typeof t=="function"?t(e):t}function xr(t,e){return typeof t=="function"?t(e):t}function Hb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Bv(o,e.options))return!1}else if(!Ru(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function Wb(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ua(e.options.mutationKey)!==Ua(a))return!1}else if(!Ru(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Bv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ua)(t)}function Ua(t){return JSON.stringify(t,(e,n)=>Lx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ru(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ru(t[n],e[n])):!1}function uS(t,e){if(t===e)return t;const n=qb(t)&&qb(e);if(n||Lx(t)&&Lx(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:a[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=uS(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function _f(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function qb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lx(t){if(!Kb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Kb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Kb(t){return Object.prototype.toString.call(t)==="[object Object]"}function qO(t){return new Promise(e=>{setTimeout(e,t)})}function Vx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?uS(t,e):e}function KO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function GO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Hv=Symbol();function dS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Hv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Na,li,ol,SE,QO=(SE=class extends Wl{constructor(){super();pe(this,Na);pe(this,li);pe(this,ol);ne(this,ol,e=>{if(!Fa&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,li)||this.setEventListener(L(this,ol))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,li))==null||e.call(this),ne(this,li,void 0))}setEventListener(e){var n;ne(this,ol,e),(n=L(this,li))==null||n.call(this),ne(this,li,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,Na)!==e&&(ne(this,Na,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,Na)=="boolean"?L(this,Na):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Na=new WeakMap,li=new WeakMap,ol=new WeakMap,SE),Wv=new QO,ll,ci,cl,CE,YO=(CE=class extends Wl{constructor(){super();pe(this,ll,!0);pe(this,ci);pe(this,cl);ne(this,cl,e=>{if(!Fa&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,ci)||this.setEventListener(L(this,cl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,ci))==null||e.call(this),ne(this,ci,void 0))}setEventListener(e){var n;ne(this,cl,e),(n=L(this,ci))==null||n.call(this),ne(this,ci,e(this.setOnline.bind(this)))}setOnline(e){L(this,ll)!==e&&(ne(this,ll,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,ll)}},ll=new WeakMap,ci=new WeakMap,cl=new WeakMap,CE),bf=new YO;function Fx(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function XO(t){return Math.min(1e3*2**t,3e4)}function hS(t){return(t??"online")==="online"?bf.isOnline():!0}var fS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cg(t){return t instanceof fS}function mS(t){let e=!1,n=0,r=!1,s;const a=Fx(),o=w=>{var N;r||(m(new fS(w)),(N=t.abort)==null||N.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Wv.isFocused()&&(t.networkMode==="always"||bf.isOnline())&&t.canRun(),h=()=>hS(t.networkMode)&&t.canRun(),f=w=>{var N;r||(r=!0,(N=t.onSuccess)==null||N.call(t,w),s==null||s(),a.resolve(w))},m=w=>{var N;r||(r=!0,(N=t.onError)==null||N.call(t,w),s==null||s(),a.reject(w))},y=()=>new Promise(w=>{var N;s=v=>{(r||u())&&w(v)},(N=t.onPause)==null||N.call(t)}).then(()=>{var w;s=void 0,r||(w=t.onContinue)==null||w.call(t)}),j=()=>{if(r)return;let w;const N=n===0?t.initialPromise:void 0;try{w=N??t.fn()}catch(v){w=Promise.reject(v)}Promise.resolve(w).then(f).catch(v=>{var D;if(r)return;const x=t.retry??(Fa?0:3),E=t.retryDelay??XO,I=typeof E=="function"?E(n,v):E,O=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(e||!O){m(v);return}n++,(D=t.onFail)==null||D.call(t,n,v),qO(I).then(()=>u()?void 0:y()).then(()=>{e?m(v):j()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?j():y().then(j),a)}}function JO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var kt=JO(),Ea,IE,pS=(IE=class{constructor(){pe(this,Ea)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ox(this.gcTime)&&ne(this,Ea,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Fa?1/0:5*60*1e3))}clearGcTimeout(){L(this,Ea)&&(clearTimeout(L(this,Ea)),ne(this,Ea,void 0))}},Ea=new WeakMap,IE),ul,dl,Gn,nn,Wu,ja,fr,fs,AE,ZO=(AE=class extends pS{constructor(n){super();pe(this,fr);pe(this,ul);pe(this,dl);pe(this,Gn);pe(this,nn);pe(this,Wu);pe(this,ja);ne(this,ja,!1),ne(this,Wu,n.defaultOptions),this.setOptions(n.options),this.observers=[],ne(this,Gn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ne(this,ul,e3(this.options)),this.state=n.state??L(this,ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=L(this,nn))==null?void 0:n.promise}setOptions(n){this.options={...L(this,Wu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Gn).remove(this)}setData(n,r){const s=Vx(this.state.data,n,this.options);return Ce(this,fr,fs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ce(this,fr,fs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=L(this,nn))==null?void 0:s.promise;return(a=L(this,nn))==null||a.cancel(n),r?r.then(Qn).catch(Qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,ul))}isActive(){return this.observers.some(n=>xr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!cS(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,nn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,nn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),L(this,Gn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(L(this,nn)&&(L(this,ja)?L(this,nn).cancel({revert:!0}):L(this,nn).cancelRetry()),this.scheduleGc()),L(this,Gn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ce(this,fr,fs).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,nn))return L(this,nn).continueRetry(),L(this,nn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ne(this,ja,!0),s.signal)})},o=()=>{const m=dS(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return a(y),ne(this,ja,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(l),(u=this.options.behavior)==null||u.onFetch(l,this),ne(this,dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ce(this,fr,fs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var y,j,w,N;cg(m)&&m.silent||Ce(this,fr,fs).call(this,{type:"error",error:m}),cg(m)||((j=(y=L(this,Gn).config).onError)==null||j.call(y,m,this),(N=(w=L(this,Gn).config).onSettled)==null||N.call(w,this.state.data,m,this)),this.scheduleGc()};return ne(this,nn,mS({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,j,w,N;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(j=(y=L(this,Gn).config).onSuccess)==null||j.call(y,m,this),(N=(w=L(this,Gn).config).onSettled)==null||N.call(w,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,y)=>{Ce(this,fr,fs).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Ce(this,fr,fs).call(this,{type:"pause"})},onContinue:()=>{Ce(this,fr,fs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),L(this,nn).start()}},ul=new WeakMap,dl=new WeakMap,Gn=new WeakMap,nn=new WeakMap,Wu=new WeakMap,ja=new WeakMap,fr=new WeakSet,fs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...gS(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return cg(a)&&a.revert&&L(this,dl)?{...L(this,dl),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),kt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,Gn).notify({query:this,type:"updated",action:n})})},AE);function gS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function e3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Vr,kE,t3=(kE=class extends Wl{constructor(e={}){super();pe(this,Vr);this.config=e,ne(this,Vr,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Bv(s,n);let o=this.get(a);return o||(o=new ZO({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,Vr).has(e.queryHash)||(L(this,Vr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,Vr).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,Vr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){kt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Vr).get(e)}getAll(){return[...L(this,Vr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Hb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Hb(e,r)):n}notify(e){kt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){kt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){kt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Vr=new WeakMap,kE),Fr,un,Ta,Ur,ni,RE,n3=(RE=class extends pS{constructor(n){super();pe(this,Ur);pe(this,Fr);pe(this,un);pe(this,Ta);this.mutationId=n.mutationId,ne(this,un,n.mutationCache),ne(this,Fr,[]),this.state=n.state||xS(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){L(this,Fr).includes(n)||(L(this,Fr).push(n),this.clearGcTimeout(),L(this,un).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ne(this,Fr,L(this,Fr).filter(r=>r!==n)),this.scheduleGc(),L(this,un).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){L(this,Fr).length||(this.state.status==="pending"?this.scheduleGc():L(this,un).remove(this))}continue(){var n;return((n=L(this,Ta))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,o,l,c,u,h,f,m,y,j,w,N,v,x,E,I,O,D,C,_;ne(this,Ta,mS({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(T,S)=>{Ce(this,Ur,ni).call(this,{type:"failed",failureCount:T,error:S})},onPause:()=>{Ce(this,Ur,ni).call(this,{type:"pause"})},onContinue:()=>{Ce(this,Ur,ni).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,un).canRun(this)}));const r=this.state.status==="pending",s=!L(this,Ta).canStart();try{if(!r){Ce(this,Ur,ni).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(a=L(this,un).config).onMutate)==null?void 0:o.call(a,n,this));const S=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));S!==this.state.context&&Ce(this,Ur,ni).call(this,{type:"pending",context:S,variables:n,isPaused:s})}const T=await L(this,Ta).start();return await((h=(u=L(this,un).config).onSuccess)==null?void 0:h.call(u,T,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,n,this.state.context)),await((j=(y=L(this,un).config).onSettled)==null?void 0:j.call(y,T,null,this.state.variables,this.state.context,this)),await((N=(w=this.options).onSettled)==null?void 0:N.call(w,T,null,n,this.state.context)),Ce(this,Ur,ni).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(v=L(this,un).config).onError)==null?void 0:x.call(v,T,n,this.state.context,this)),await((I=(E=this.options).onError)==null?void 0:I.call(E,T,n,this.state.context)),await((D=(O=L(this,un).config).onSettled)==null?void 0:D.call(O,void 0,T,this.state.variables,this.state.context,this)),await((_=(C=this.options).onSettled)==null?void 0:_.call(C,void 0,T,n,this.state.context)),T}finally{Ce(this,Ur,ni).call(this,{type:"error",error:T})}}finally{L(this,un).runNext(this)}}},Fr=new WeakMap,un=new WeakMap,Ta=new WeakMap,Ur=new WeakSet,ni=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),kt.batch(()=>{L(this,Fr).forEach(s=>{s.onMutationUpdate(n)}),L(this,un).notify({mutation:this,type:"updated",action:n})})},RE);function xS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var An,qu,PE,r3=(PE=class extends Wl{constructor(e={}){super();pe(this,An);pe(this,qu);this.config=e,ne(this,An,new Map),ne(this,qu,Date.now())}build(e,n,r){const s=new n3({mutationCache:this,mutationId:++Ud(this,qu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=sh(e),r=L(this,An).get(n)??[];r.push(e),L(this,An).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=sh(e);if(L(this,An).has(n)){const s=(r=L(this,An).get(n))==null?void 0:r.filter(a=>a!==e);s&&(s.length===0?L(this,An).delete(n):L(this,An).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=L(this,An).get(sh(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=L(this,An).get(sh(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){kt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...L(this,An).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Wb(n,r))}findAll(e={}){return this.getAll().filter(n=>Wb(e,n))}notify(e){kt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return kt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Qn))))}},An=new WeakMap,qu=new WeakMap,PE);function sh(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Gb(t){return{onFetch:(e,n)=>{var h,f,m,y,j;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,a=((y=e.state.data)==null?void 0:y.pages)||[],o=((j=e.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const N=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},v=dS(e.options,e.fetchOptions),x=async(E,I,O)=>{if(w)return Promise.reject();if(I==null&&E.pages.length)return Promise.resolve(E);const D={queryKey:e.queryKey,pageParam:I,direction:O?"backward":"forward",meta:e.options.meta};N(D);const C=await v(D),{maxPages:_}=e.options,T=O?GO:KO;return{pages:T(E.pages,C,_),pageParams:T(E.pageParams,I,_)}};if(s&&a.length){const E=s==="backward",I=E?s3:Qb,O={pages:a,pageParams:o},D=I(r,O);l=await x(O,D,E)}else{const E=t??a.length;do{const I=c===0?o[0]??r.initialPageParam:Qb(r,l);if(c>0&&I==null)break;l=await x(l,I),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var w,N;return(N=(w=e.options).persister)==null?void 0:N.call(w,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Qb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function s3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xt,ui,di,hl,fl,hi,ml,pl,DE,i3=(DE=class{constructor(t={}){pe(this,xt);pe(this,ui);pe(this,di);pe(this,hl);pe(this,fl);pe(this,hi);pe(this,ml);pe(this,pl);ne(this,xt,t.queryCache||new t3),ne(this,ui,t.mutationCache||new r3),ne(this,di,t.defaultOptions||{}),ne(this,hl,new Map),ne(this,fl,new Map),ne(this,hi,0)}mount(){Ud(this,hi)._++,L(this,hi)===1&&(ne(this,ml,Wv.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,xt).onFocus())})),ne(this,pl,bf.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,xt).onOnline())})))}unmount(){var t,e;Ud(this,hi)._--,L(this,hi)===0&&((t=L(this,ml))==null||t.call(this),ne(this,ml,void 0),(e=L(this,pl))==null||e.call(this),ne(this,pl,void 0))}isFetching(t){return L(this,xt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,ui).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,xt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=L(this,xt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Yo(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return L(this,xt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,xt).get(r.queryHash),a=s==null?void 0:s.state.data,o=WO(e,a);if(o!==void 0)return L(this,xt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return kt.batch(()=>L(this,xt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,xt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,xt);kt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,xt),r={type:"active",...t};return kt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=kt.batch(()=>L(this,xt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Qn).catch(Qn)}invalidateQueries(t={},e={}){return kt.batch(()=>{if(L(this,xt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=kt.batch(()=>L(this,xt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Qn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Qn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,xt).build(this,e);return n.isStaleByTime(Yo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qn).catch(Qn)}fetchInfiniteQuery(t){return t.behavior=Gb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qn).catch(Qn)}ensureInfiniteQueryData(t){return t.behavior=Gb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bf.isOnline()?L(this,ui).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,xt)}getMutationCache(){return L(this,ui)}getDefaultOptions(){return L(this,di)}setDefaultOptions(t){ne(this,di,t)}setQueryDefaults(t,e){L(this,hl).set(Ua(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,hl).values()];let n={};return e.forEach(r=>{Ru(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){L(this,fl).set(Ua(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,fl).values()];let n={};return e.forEach(r=>{Ru(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,di).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Hv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,di).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,xt).clear(),L(this,ui).clear()}},xt=new WeakMap,ui=new WeakMap,di=new WeakMap,hl=new WeakMap,fl=new WeakMap,hi=new WeakMap,ml=new WeakMap,pl=new WeakMap,DE),vn,Ue,Ku,dn,Sa,gl,fi,$r,Gu,xl,yl,Ca,Ia,mi,vl,qe,Fc,Ux,$x,zx,Bx,Hx,Wx,qx,yS,ME,a3=(ME=class extends Wl{constructor(e,n){super();pe(this,qe);pe(this,vn);pe(this,Ue);pe(this,Ku);pe(this,dn);pe(this,Sa);pe(this,gl);pe(this,fi);pe(this,$r);pe(this,Gu);pe(this,xl);pe(this,yl);pe(this,Ca);pe(this,Ia);pe(this,mi);pe(this,vl,new Set);this.options=n,ne(this,vn,e),ne(this,$r,null),ne(this,fi,Fx()),this.options.experimental_prefetchInRender||L(this,fi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Ue).addObserver(this),Yb(L(this,Ue),this.options)?Ce(this,qe,Fc).call(this):this.updateResult(),Ce(this,qe,Bx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kx(L(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kx(L(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ce(this,qe,Hx).call(this),Ce(this,qe,Wx).call(this),L(this,Ue).removeObserver(this)}setOptions(e,n){const r=this.options,s=L(this,Ue);if(this.options=L(this,vn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof xr(this.options.enabled,L(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ce(this,qe,qx).call(this),L(this,Ue).setOptions(this.options),r._defaulted&&!_f(this.options,r)&&L(this,vn).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Ue),observer:this});const a=this.hasListeners();a&&Xb(L(this,Ue),s,this.options,r)&&Ce(this,qe,Fc).call(this),this.updateResult(n),a&&(L(this,Ue)!==s||xr(this.options.enabled,L(this,Ue))!==xr(r.enabled,L(this,Ue))||Yo(this.options.staleTime,L(this,Ue))!==Yo(r.staleTime,L(this,Ue)))&&Ce(this,qe,Ux).call(this);const o=Ce(this,qe,$x).call(this);a&&(L(this,Ue)!==s||xr(this.options.enabled,L(this,Ue))!==xr(r.enabled,L(this,Ue))||o!==L(this,mi))&&Ce(this,qe,zx).call(this,o)}getOptimisticResult(e){const n=L(this,vn).getQueryCache().build(L(this,vn),e),r=this.createResult(n,e);return l3(this,r)&&(ne(this,dn,r),ne(this,gl,this.options),ne(this,Sa,L(this,Ue).state)),r}getCurrentResult(){return L(this,dn)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){L(this,vl).add(e)}getCurrentQuery(){return L(this,Ue)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=L(this,vn).defaultQueryOptions(e),r=L(this,vn).getQueryCache().build(L(this,vn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ce(this,qe,Fc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,dn)))}createResult(e,n){var _;const r=L(this,Ue),s=this.options,a=L(this,dn),o=L(this,Sa),l=L(this,gl),u=e!==r?e.state:L(this,Ku),{state:h}=e;let f={...h},m=!1,y;if(n._optimisticResults){const T=this.hasListeners(),S=!T&&Yb(e,n),P=T&&Xb(e,r,n,s);(S||P)&&(f={...f,...gS(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:j,errorUpdatedAt:w,status:N}=f;if(n.select&&f.data!==void 0)if(a&&f.data===(o==null?void 0:o.data)&&n.select===L(this,Gu))y=L(this,xl);else try{ne(this,Gu,n.select),y=n.select(f.data),y=Vx(a==null?void 0:a.data,y,n),ne(this,xl,y),ne(this,$r,null)}catch(T){ne(this,$r,T)}else y=f.data;if(n.placeholderData!==void 0&&y===void 0&&N==="pending"){let T;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))T=a.data;else if(T=typeof n.placeholderData=="function"?n.placeholderData((_=L(this,yl))==null?void 0:_.state.data,L(this,yl)):n.placeholderData,n.select&&T!==void 0)try{T=n.select(T),ne(this,$r,null)}catch(S){ne(this,$r,S)}T!==void 0&&(N="success",y=Vx(a==null?void 0:a.data,T,n),m=!0)}L(this,$r)&&(j=L(this,$r),y=L(this,xl),w=Date.now(),N="error");const v=f.fetchStatus==="fetching",x=N==="pending",E=N==="error",I=x&&v,O=y!==void 0,C={status:N,fetchStatus:f.fetchStatus,isPending:x,isSuccess:N==="success",isError:E,isInitialLoading:I,isLoading:I,data:y,dataUpdatedAt:f.dataUpdatedAt,error:j,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:E&&!O,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:E&&O,isStale:qv(e,n),refetch:this.refetch,promise:L(this,fi)};if(this.options.experimental_prefetchInRender){const T=M=>{C.status==="error"?M.reject(C.error):C.data!==void 0&&M.resolve(C.data)},S=()=>{const M=ne(this,fi,C.promise=Fx());T(M)},P=L(this,fi);switch(P.status){case"pending":e.queryHash===r.queryHash&&T(P);break;case"fulfilled":(C.status==="error"||C.data!==P.value)&&S();break;case"rejected":(C.status!=="error"||C.error!==P.reason)&&S();break}}return C}updateResult(e){const n=L(this,dn),r=this.createResult(L(this,Ue),this.options);if(ne(this,Sa,L(this,Ue).state),ne(this,gl,this.options),L(this,Sa).data!==void 0&&ne(this,yl,L(this,Ue)),_f(r,n))return;ne(this,dn,r);const s={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!L(this,vl).size)return!0;const c=new Set(l??L(this,vl));return this.options.throwOnError&&c.add("error"),Object.keys(L(this,dn)).some(u=>{const h=u;return L(this,dn)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&a()&&(s.listeners=!0),Ce(this,qe,yS).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ce(this,qe,Bx).call(this)}},vn=new WeakMap,Ue=new WeakMap,Ku=new WeakMap,dn=new WeakMap,Sa=new WeakMap,gl=new WeakMap,fi=new WeakMap,$r=new WeakMap,Gu=new WeakMap,xl=new WeakMap,yl=new WeakMap,Ca=new WeakMap,Ia=new WeakMap,mi=new WeakMap,vl=new WeakMap,qe=new WeakSet,Fc=function(e){Ce(this,qe,qx).call(this);let n=L(this,Ue).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Qn)),n},Ux=function(){Ce(this,qe,Hx).call(this);const e=Yo(this.options.staleTime,L(this,Ue));if(Fa||L(this,dn).isStale||!Ox(e))return;const r=cS(L(this,dn).dataUpdatedAt,e)+1;ne(this,Ca,setTimeout(()=>{L(this,dn).isStale||this.updateResult()},r))},$x=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Ue)):this.options.refetchInterval)??!1},zx=function(e){Ce(this,qe,Wx).call(this),ne(this,mi,e),!(Fa||xr(this.options.enabled,L(this,Ue))===!1||!Ox(L(this,mi))||L(this,mi)===0)&&ne(this,Ia,setInterval(()=>{(this.options.refetchIntervalInBackground||Wv.isFocused())&&Ce(this,qe,Fc).call(this)},L(this,mi)))},Bx=function(){Ce(this,qe,Ux).call(this),Ce(this,qe,zx).call(this,Ce(this,qe,$x).call(this))},Hx=function(){L(this,Ca)&&(clearTimeout(L(this,Ca)),ne(this,Ca,void 0))},Wx=function(){L(this,Ia)&&(clearInterval(L(this,Ia)),ne(this,Ia,void 0))},qx=function(){const e=L(this,vn).getQueryCache().build(L(this,vn),this.options);if(e===L(this,Ue))return;const n=L(this,Ue);ne(this,Ue,e),ne(this,Ku,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},yS=function(e){kt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(L(this,dn))}),L(this,vn).getQueryCache().notify({query:L(this,Ue),type:"observerResultsUpdated"})})},ME);function o3(t,e){return xr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Yb(t,e){return o3(t,e)||t.state.data!==void 0&&Kx(t,e,e.refetchOnMount)}function Kx(t,e,n){if(xr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&qv(t,e)}return!1}function Xb(t,e,n,r){return(t!==e||xr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&qv(t,n)}function qv(t,e){return xr(e.enabled,t)!==!1&&t.isStaleByTime(Yo(e.staleTime,t))}function l3(t,e){return!_f(t.getCurrentResult(),e)}var pi,gi,wn,xs,Ps,Dh,Gx,OE,c3=(OE=class extends Wl{constructor(n,r){super();pe(this,Ps);pe(this,pi);pe(this,gi);pe(this,wn);pe(this,xs);ne(this,pi,n),this.setOptions(r),this.bindMethods(),Ce(this,Ps,Dh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=L(this,pi).defaultMutationOptions(n),_f(this.options,r)||L(this,pi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,wn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ua(r.mutationKey)!==Ua(this.options.mutationKey)?this.reset():((s=L(this,wn))==null?void 0:s.state.status)==="pending"&&L(this,wn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,wn))==null||n.removeObserver(this)}onMutationUpdate(n){Ce(this,Ps,Dh).call(this),Ce(this,Ps,Gx).call(this,n)}getCurrentResult(){return L(this,gi)}reset(){var n;(n=L(this,wn))==null||n.removeObserver(this),ne(this,wn,void 0),Ce(this,Ps,Dh).call(this),Ce(this,Ps,Gx).call(this)}mutate(n,r){var s;return ne(this,xs,r),(s=L(this,wn))==null||s.removeObserver(this),ne(this,wn,L(this,pi).getMutationCache().build(L(this,pi),this.options)),L(this,wn).addObserver(this),L(this,wn).execute(n)}},pi=new WeakMap,gi=new WeakMap,wn=new WeakMap,xs=new WeakMap,Ps=new WeakSet,Dh=function(){var r;const n=((r=L(this,wn))==null?void 0:r.state)??xS();ne(this,gi,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Gx=function(n){kt.batch(()=>{var r,s,a,o,l,c,u,h;if(L(this,xs)&&this.hasListeners()){const f=L(this,gi).variables,m=L(this,gi).context;(n==null?void 0:n.type)==="success"?((s=(r=L(this,xs)).onSuccess)==null||s.call(r,n.data,f,m),(o=(a=L(this,xs)).onSettled)==null||o.call(a,n.data,null,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=L(this,xs)).onError)==null||c.call(l,n.error,f,m),(h=(u=L(this,xs)).onSettled)==null||h.call(u,void 0,n.error,f,m))}this.listeners.forEach(f=>{f(L(this,gi))})})},OE),vS=p.createContext(void 0),td=t=>{const e=p.useContext(vS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},u3=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(vS.Provider,{value:t,children:e})),wS=p.createContext(!1),d3=()=>p.useContext(wS);wS.Provider;function h3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var f3=p.createContext(h3()),m3=()=>p.useContext(f3);function _S(t,e){return typeof t=="function"?t(...e):!!t}function Qx(){}var p3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},g3=t=>{p.useEffect(()=>{t.clearReset()},[t])},x3=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&_S(n,[t.error,r]),y3=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},v3=(t,e)=>t.isLoading&&t.isFetching&&!e,w3=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Jb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function _3(t,e,n){var h,f,m,y,j;const r=td(),s=d3(),a=m3(),o=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",y3(o),p3(o,a),g3(a);const l=!r.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new e(r,o)),u=c.getOptimisticResult(o);if(p.useSyncExternalStore(p.useCallback(w=>{const N=s?Qx:c.subscribe(kt.batchCalls(w));return c.updateResult(),N},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),w3(o,u))throw Jb(o,c,a);if(x3({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((y=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||y.call(m,o,u),o.experimental_prefetchInRender&&!Fa&&v3(u,s)){const w=l?Jb(o,c,a):(j=r.getQueryCache().get(o.queryHash))==null?void 0:j.promise;w==null||w.catch(Qx).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Vt(t,e){return _3(t,a3)}function ua(t,e){const n=td(),[r]=p.useState(()=>new c3(n,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const s=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(kt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=p.useCallback((o,l)=>{r.mutate(o,l).catch(Qx)},[r]);if(s.error&&_S(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}async function b3(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const N3=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await b3(n),await n.json())},E3=new i3({defaultOptions:{queries:{queryFn:N3({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),j3=1,T3=1e6;let ug=0;function S3(){return ug=(ug+1)%Number.MAX_SAFE_INTEGER,ug.toString()}const dg=new Map,Zb=t=>{if(dg.has(t))return;const e=setTimeout(()=>{dg.delete(t),iu({type:"REMOVE_TOAST",toastId:t})},T3);dg.set(t,e)},bS=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,j3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Zb(n):t.toasts.forEach(r=>{Zb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Mh=[];let Oh={toasts:[]};function iu(t){Oh=bS(Oh,t),Mh.forEach(e=>{e(Oh)})}function NS({...t}){const e=S3(),n=s=>iu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>iu({type:"DISMISS_TOAST",toastId:e});return iu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function to(){const[t,e]=p.useState(Oh);return p.useEffect(()=>(Mh.push(e),()=>{const n=Mh.indexOf(e);n>-1&&Mh.splice(n,1)}),[t]),{...t,toast:NS,dismiss:n=>iu({type:"DISMISS_TOAST",toastId:n})}}const C3=Object.freeze(Object.defineProperty({__proto__:null,reducer:bS,toast:NS,useToast:to},Symbol.toStringTag,{value:"Module"}));function Y(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function e1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ym(...t){return e=>{let n=!1;const r=t.map(s=>{const a=e1(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():e1(t[s],null)}}}}function Re(...t){return p.useCallback(ym(...t),t)}function I3(t,e){const n=p.createContext(e),r=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function Hn(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var v;const{scope:m,children:y,...j}=f,w=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,N=p.useMemo(()=>j,Object.values(j));return i.jsx(w.Provider,{value:N,children:y})};u.displayName=a+"Provider";function h(f,m){var w;const y=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,j=p.useContext(y);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,A3(s,...e)]}function A3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function $a(t){const e=R3(t),n=p.forwardRef((r,s)=>{const{children:a,...o}=r,l=p.Children.toArray(a),c=l.find(D3);if(c){const u=c.props.children,h=l.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return i.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var k3=$a("Slot");function R3(t){const e=p.forwardRef((n,r)=>{const{children:s,...a}=n;if(p.isValidElement(s)){const o=O3(s),l=M3(a,s.props);return s.type!==p.Fragment&&(l.ref=r?ym(r,o):o),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ES=Symbol("radix.slottable");function P3(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=ES,e}function D3(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ES}function M3(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{a(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function O3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vm(t){const e=t+"CollectionProvider",[n,r]=Hn(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:N,children:v}=w,x=ms.useRef(null),E=ms.useRef(new Map).current;return i.jsx(s,{scope:N,itemMap:E,collectionRef:x,children:v})};o.displayName=e;const l=t+"CollectionSlot",c=$a(l),u=ms.forwardRef((w,N)=>{const{scope:v,children:x}=w,E=a(l,v),I=Re(N,E.collectionRef);return i.jsx(c,{ref:I,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=$a(h),y=ms.forwardRef((w,N)=>{const{scope:v,children:x,...E}=w,I=ms.useRef(null),O=Re(N,I),D=a(h,v);return ms.useEffect(()=>(D.itemMap.set(I,{ref:I,...E}),()=>void D.itemMap.delete(I))),i.jsx(m,{[f]:"",ref:O,children:x})});y.displayName=h;function j(w){const N=a(t+"CollectionConsumer",w);return ms.useCallback(()=>{const x=N.collectionRef.current;if(!x)return[];const E=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(N.itemMap.values()).sort((D,C)=>E.indexOf(D.ref.current)-E.indexOf(C.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},j,r]}var L3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fe=L3.reduce((t,e)=>{const n=$a(`Primitive.${e}`),r=p.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Kv(t,e){t&&eo.flushSync(()=>t.dispatchEvent(e))}function ot(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function V3(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var F3="DismissableLayer",Yx="dismissableLayer.update",U3="dismissableLayer.pointerDownOutside",$3="dismissableLayer.focusOutside",t1,jS=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ql=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(jS),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),j=Re(e,C=>f(C)),w=Array.from(u.layers),[N]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(N),x=h?w.indexOf(h):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,I=x>=v,O=B3(C=>{const _=C.target,T=[...u.branches].some(S=>S.contains(_));!I||T||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),D=H3(C=>{const _=C.target;[...u.branches].some(S=>S.contains(_))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return V3(C=>{x===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(t1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),n1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=t1)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),n1())},[h,u]),p.useEffect(()=>{const C=()=>y({});return document.addEventListener(Yx,C),()=>document.removeEventListener(Yx,C)},[]),i.jsx(fe.div,{...c,ref:j,style:{pointerEvents:E?I?"auto":"none":void 0,...t.style},onFocusCapture:Y(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Y(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Y(t.onPointerDownCapture,O.onPointerDownCapture)})});ql.displayName=F3;var z3="DismissableLayerBranch",TS=p.forwardRef((t,e)=>{const n=p.useContext(jS),r=p.useRef(null),s=Re(e,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(fe.div,{...t,ref:s})});TS.displayName=z3;function B3(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){SS(U3,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function H3(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t),r=p.useRef(!1);return p.useEffect(()=>{const s=a=>{a.target&&!r.current&&SS($3,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function n1(){const t=new CustomEvent(Yx);document.dispatchEvent(t)}function SS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kv(s,a):s.dispatchEvent(a)}var W3=ql,q3=TS,St=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},K3="Portal",nd=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=p.useState(!1);St(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?pO.createPortal(i.jsx(fe.div,{...r,ref:e}),o):null});nd.displayName=K3;function G3(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var gn=t=>{const{present:e,children:n}=t,r=Q3(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=Re(r.ref,Y3(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:a}):null};gn.displayName="Presence";function Q3(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=G3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=ih(r.current);a.current=l==="mounted"?u:"none"},[l]),St(()=>{const u=r.current,h=s.current;if(h!==t){const m=a.current,y=ih(u);t?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),St(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=y=>{const w=ih(r.current).includes(y.animationName);if(y.target===e&&w&&(c("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},m=y=>{y.target===e&&(a.current=ih(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function ih(t){return(t==null?void 0:t.animationName)||"none"}function Y3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Oi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=X3({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=ot(n),c=p.useCallback(u=>{if(a){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[a,t,s,l]);return[o,c]}function X3({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),a=ot(e);return p.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var J3="VisuallyHidden",rd=p.forwardRef((t,e)=>i.jsx(fe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));rd.displayName=J3;var Z3=rd,Gv="ToastProvider",[Qv,eL,tL]=vm("Toast"),[CS,Kq]=Hn("Toast",[tL]),[nL,wm]=CS(Gv),IS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gv}\`. Expected non-empty \`string\`.`),i.jsx(Qv.Provider,{scope:e,children:i.jsx(nL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};IS.displayName=Gv;var AS="ToastViewport",rL=["F8"],Xx="toast.viewportPause",Jx="toast.viewportResume",kS=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rL,label:s="Notifications ({hotkey})",...a}=t,o=wm(AS,n),l=eL(n),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Re(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=o.toastCount>0;p.useEffect(()=>{const N=v=>{var E;r.length!==0&&r.every(I=>v[I]||v.code===I)&&((E=f.current)==null||E.focus())};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[r]),p.useEffect(()=>{const N=c.current,v=f.current;if(j&&N&&v){const x=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Xx);v.dispatchEvent(D),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(Jx);v.dispatchEvent(D),o.isClosePausedRef.current=!1}},I=D=>{!N.contains(D.relatedTarget)&&E()},O=()=>{N.contains(document.activeElement)||E()};return N.addEventListener("focusin",x),N.addEventListener("focusout",I),N.addEventListener("pointermove",x),N.addEventListener("pointerleave",O),window.addEventListener("blur",x),window.addEventListener("focus",E),()=>{N.removeEventListener("focusin",x),N.removeEventListener("focusout",I),N.removeEventListener("pointermove",x),N.removeEventListener("pointerleave",O),window.removeEventListener("blur",x),window.removeEventListener("focus",E)}}},[j,o.isClosePausedRef]);const w=p.useCallback(({tabbingDirection:N})=>{const x=l().map(E=>{const I=E.ref.current,O=[I,...gL(I)];return N==="forwards"?O:O.reverse()});return(N==="forwards"?x.reverse():x).flat()},[l]);return p.useEffect(()=>{const N=f.current;if(N){const v=x=>{var O,D,C;const E=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!E){const _=document.activeElement,T=x.shiftKey;if(x.target===N&&T){(O=u.current)==null||O.focus();return}const M=w({tabbingDirection:T?"backwards":"forwards"}),A=M.findIndex(H=>H===_);hg(M.slice(A+1))?x.preventDefault():T?(D=u.current)==null||D.focus():(C=h.current)==null||C.focus()}};return N.addEventListener("keydown",v),()=>N.removeEventListener("keydown",v)}},[l,w]),i.jsxs(q3,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&i.jsx(Zx,{ref:u,onFocusFromOutsideViewport:()=>{const N=w({tabbingDirection:"forwards"});hg(N)}}),i.jsx(Qv.Slot,{scope:n,children:i.jsx(fe.ol,{tabIndex:-1,...a,ref:m})}),j&&i.jsx(Zx,{ref:h,onFocusFromOutsideViewport:()=>{const N=w({tabbingDirection:"backwards"});hg(N)}})]})});kS.displayName=AS;var RS="ToastFocusProxy",Zx=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=wm(RS,n);return i.jsx(rd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Zx.displayName=RS;var _m="Toast",sL="toast.swipeStart",iL="toast.swipeMove",aL="toast.swipeCancel",oL="toast.swipeEnd",PS=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l=!0,c]=Oi({prop:r,defaultProp:s,onChange:a});return i.jsx(gn,{present:n||l,children:i.jsx(uL,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ot(t.onPause),onResume:ot(t.onResume),onSwipeStart:Y(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Y(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});PS.displayName=_m;var[lL,cL]=CS(_m,{onClose(){}}),uL=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...j}=t,w=wm(_m,n),[N,v]=p.useState(null),x=Re(e,H=>v(H)),E=p.useRef(null),I=p.useRef(null),O=s||w.duration,D=p.useRef(0),C=p.useRef(O),_=p.useRef(0),{onToastAdd:T,onToastRemove:S}=w,P=ot(()=>{var te;(N==null?void 0:N.contains(document.activeElement))&&((te=w.viewport)==null||te.focus()),o()}),M=p.useCallback(H=>{!H||H===1/0||(window.clearTimeout(_.current),D.current=new Date().getTime(),_.current=window.setTimeout(P,H))},[P]);p.useEffect(()=>{const H=w.viewport;if(H){const te=()=>{M(C.current),u==null||u()},W=()=>{const le=new Date().getTime()-D.current;C.current=C.current-le,window.clearTimeout(_.current),c==null||c()};return H.addEventListener(Xx,W),H.addEventListener(Jx,te),()=>{H.removeEventListener(Xx,W),H.removeEventListener(Jx,te)}}},[w.viewport,O,c,u,M]),p.useEffect(()=>{a&&!w.isClosePausedRef.current&&M(O)},[a,O,w.isClosePausedRef,M]),p.useEffect(()=>(T(),()=>S()),[T,S]);const A=p.useMemo(()=>N?US(N):null,[N]);return w.viewport?i.jsxs(i.Fragment,{children:[A&&i.jsx(dL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),i.jsx(lL,{scope:n,onClose:P,children:eo.createPortal(i.jsx(Qv.ItemSlot,{scope:n,children:i.jsx(W3,{asChild:!0,onEscapeKeyDown:Y(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||P(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...j,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Y(t.onKeyDown,H=>{H.key==="Escape"&&(l==null||l(H.nativeEvent),H.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Y(t.onPointerDown,H=>{H.button===0&&(E.current={x:H.clientX,y:H.clientY})}),onPointerMove:Y(t.onPointerMove,H=>{if(!E.current)return;const te=H.clientX-E.current.x,W=H.clientY-E.current.y,le=!!I.current,V=["left","right"].includes(w.swipeDirection),U=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,G=V?U(0,te):0,X=V?0:U(0,W),oe=H.pointerType==="touch"?10:2,_e={x:G,y:X},De={originalEvent:H,delta:_e};le?(I.current=_e,ah(iL,f,De,{discrete:!1})):r1(_e,w.swipeDirection,oe)?(I.current=_e,ah(sL,h,De,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(te)>oe||Math.abs(W)>oe)&&(E.current=null)}),onPointerUp:Y(t.onPointerUp,H=>{const te=I.current,W=H.target;if(W.hasPointerCapture(H.pointerId)&&W.releasePointerCapture(H.pointerId),I.current=null,E.current=null,te){const le=H.currentTarget,V={originalEvent:H,delta:te};r1(te,w.swipeDirection,w.swipeThreshold)?ah(oL,y,V,{discrete:!0}):ah(aL,m,V,{discrete:!0}),le.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),dL=t=>{const{__scopeToast:e,children:n,...r}=t,s=wm(_m,e),[a,o]=p.useState(!1),[l,c]=p.useState(!1);return mL(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(nd,{asChild:!0,children:i.jsx(rd,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},hL="ToastTitle",DS=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(fe.div,{...r,ref:e})});DS.displayName=hL;var fL="ToastDescription",MS=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(fe.div,{...r,ref:e})});MS.displayName=fL;var OS="ToastAction",LS=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(FS,{altText:n,asChild:!0,children:i.jsx(Yv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${OS}\`. Expected non-empty \`string\`.`),null)});LS.displayName=OS;var VS="ToastClose",Yv=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=cL(VS,n);return i.jsx(FS,{asChild:!0,children:i.jsx(fe.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,s.onClose)})})});Yv.displayName=VS;var FS=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function US(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),pL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...US(r))}}),e}function ah(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kv(s,a):s.dispatchEvent(a)}var r1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function mL(t=()=>{}){const e=ot(t);St(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function pL(t){return t.nodeType===t.ELEMENT_NODE}function gL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var xL=IS,$S=kS,zS=PS,BS=DS,HS=MS,WS=LS,qS=Yv;function KS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=KS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=KS(t))&&(r&&(r+=" "),r+=e);return r}const s1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,i1=GS,sd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return i1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=a==null?void 0:a[u];if(h===null)return null;const m=s1(h)||s1(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(j=>{let[w,N]=j;return Array.isArray(N)?N.includes({...a,...l}[w]):{...a,...l}[w]===N})?[...u,f,m]:u},[]);return i1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QS=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...vL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:QS("lucide",s),...l},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=p.forwardRef(({className:r,...s},a)=>p.createElement(wL,{ref:a,iconNode:e,className:QS(`lucide-${yL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=ae("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=ae("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ae("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=ae("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=ae("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ae("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ae("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=ae("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ae("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ae("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ae("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ae("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=ae("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ae("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=ae("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ae("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ae("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=ae("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=ae("Repeat2",[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=ae("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jv="-",VL=t=>{const e=UL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Jv);return l[0]===""&&l.length!==1&&l.shift(),nC(l,e)||FL(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},nC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?nC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Jv);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},y1=/^\[(.+)\]$/,FL=t=>{if(y1.test(t)){const e=y1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},UL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return zL(Object.entries(t.classGroups),n).forEach(([a,o])=>{ty(o,r,a,e)}),r},ty=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:v1(e,s);a.classGroupId=n;return}if(typeof s=="function"){if($L(s)){ty(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{ty(o,v1(e,a),n,r)})})},v1=(t,e)=>{let n=t;return e.split(Jv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$L=t=>t.isThemeGetter,zL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,BL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},rC="!",HL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let N=0;N<l.length;N++){let v=l[N];if(u===0){if(v===s&&(r||l.slice(N,N+a)===e)){c.push(l.slice(h,N)),h=N+a;continue}if(v==="/"){f=N;continue}}v==="["?u++:v==="]"&&u--}const m=c.length===0?l:l.substring(h),y=m.startsWith(rC),j=y?m.substring(1):m,w=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:o}):o},WL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},qL=t=>({cache:BL(t.cacheSize),parseClassName:HL(t),...VL(t)}),KL=/\s+/,GL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(KL);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(u);let j=!!y,w=r(j?m.substring(0,y):m);if(!w){if(!j){l=u+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=u+(l.length>0?" "+l:l);continue}j=!1}const N=WL(h).join(":"),v=f?N+rC:N,x=v+w;if(a.includes(x))continue;a.push(x);const E=s(w,j);for(let I=0;I<E.length;++I){const O=E[I];a.push(v+O)}l=u+(l.length>0?" "+l:l)}return l};function QL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=sC(e))&&(r&&(r+=" "),r+=n);return r}const sC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=sC(t[r]))&&(n&&(n+=" "),n+=e);return n};function YL(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=qL(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=GL(c,n);return s(c,h),h}return function(){return a(QL.apply(null,arguments))}}const rt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},iC=/^\[(?:([a-z-]+):)?(.+)\]$/i,XL=/^\d+\/\d+$/,JL=new Set(["px","full","screen"]),ZL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hs=t=>el(t)||JL.has(t)||XL.test(t),Zs=t=>Gl(t,"length",d5),el=t=>!!t&&!Number.isNaN(Number(t)),vg=t=>Gl(t,"number",el),kc=t=>!!t&&Number.isInteger(Number(t)),s5=t=>t.endsWith("%")&&el(t.slice(0,-1)),je=t=>iC.test(t),ei=t=>ZL.test(t),i5=new Set(["length","size","percentage"]),a5=t=>Gl(t,i5,aC),o5=t=>Gl(t,"position",aC),l5=new Set(["image","url"]),c5=t=>Gl(t,l5,f5),u5=t=>Gl(t,"",h5),Rc=()=>!0,Gl=(t,e,n)=>{const r=iC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},d5=t=>e5.test(t)&&!t5.test(t),aC=()=>!1,h5=t=>n5.test(t),f5=t=>r5.test(t),m5=()=>{const t=rt("colors"),e=rt("spacing"),n=rt("blur"),r=rt("brightness"),s=rt("borderColor"),a=rt("borderRadius"),o=rt("borderSpacing"),l=rt("borderWidth"),c=rt("contrast"),u=rt("grayscale"),h=rt("hueRotate"),f=rt("invert"),m=rt("gap"),y=rt("gradientColorStops"),j=rt("gradientColorStopPositions"),w=rt("inset"),N=rt("margin"),v=rt("opacity"),x=rt("padding"),E=rt("saturate"),I=rt("scale"),O=rt("sepia"),D=rt("skew"),C=rt("space"),_=rt("translate"),T=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",je,e],M=()=>[je,e],A=()=>["",hs,Zs],H=()=>["auto",el,je],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",je],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[el,je];return{cacheSize:500,separator:":",theme:{colors:[Rc],spacing:[hs,Zs],blur:["none","",ei,je],brightness:X(),borderColor:[t],borderRadius:["none","","full",ei,je],borderSpacing:M(),borderWidth:A(),contrast:X(),grayscale:U(),hueRotate:X(),invert:U(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[s5,Zs],inset:P(),margin:P(),opacity:X(),padding:M(),saturate:X(),scale:X(),sepia:U(),skew:X(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[ei]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),je]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",kc,je]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",kc,je]}],"grid-cols":[{"grid-cols":[Rc]}],"col-start-end":[{col:["auto",{span:["full",kc,je]},je]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Rc]}],"row-start-end":[{row:["auto",{span:[kc,je]},je]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",je,e]}],"min-w":[{"min-w":[je,e,"min","max","fit"]}],"max-w":[{"max-w":[je,e,"none","full","min","max","fit","prose",{screen:[ei]},ei]}],h:[{h:[je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ei,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vg]}],"font-family":[{font:[Rc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",el,vg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hs,je]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hs,Zs]}],"underline-offset":[{"underline-offset":["auto",hs,je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),o5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[hs,je]}],"outline-w":[{outline:[hs,Zs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[hs,Zs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ei,u5]}],"shadow-color":[{shadow:[Rc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ei,je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[kc,je]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[hs,Zs,vg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p5=YL(m5);function q(...t){return p5(GS(t))}const g5=xL,oC=p.forwardRef(({className:t,...e},n)=>i.jsx($S,{ref:n,className:q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));oC.displayName=$S.displayName;const x5=sd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lC=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(zS,{ref:r,className:q(x5({variant:e}),t),...n}));lC.displayName=zS.displayName;const y5=p.forwardRef(({className:t,...e},n)=>i.jsx(WS,{ref:n,className:q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));y5.displayName=WS.displayName;const cC=p.forwardRef(({className:t,...e},n)=>i.jsx(qS,{ref:n,className:q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Zo,{className:"h-4 w-4"})}));cC.displayName=qS.displayName;const uC=p.forwardRef(({className:t,...e},n)=>i.jsx(BS,{ref:n,className:q("text-sm font-semibold",t),...e}));uC.displayName=BS.displayName;const dC=p.forwardRef(({className:t,...e},n)=>i.jsx(HS,{ref:n,className:q("text-sm opacity-90",t),...e}));dC.displayName=HS.displayName;function v5(){const{toasts:t}=to();return i.jsxs(g5,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(lC,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(uC,{children:n}),r&&i.jsx(dC,{children:r})]}),s,i.jsx(cC,{})]},e)}),i.jsx(oC,{})]})}var w5=GE[" useId ".trim().toString()]||(()=>{}),_5=0;function qr(t){const[e,n]=p.useState(w5());return St(()=>{n(r=>r??String(_5++))},[t]),e?`radix-${e}`:""}const b5=["top","right","bottom","left"],Li=Math.min,Rn=Math.max,Ef=Math.round,lh=Math.floor,Kr=t=>({x:t,y:t}),N5={left:"right",right:"left",bottom:"top",top:"bottom"},E5={start:"end",end:"start"};function ny(t,e,n){return Rn(t,Li(e,n))}function Vs(t,e){return typeof t=="function"?t(e):t}function Fs(t){return t.split("-")[0]}function Ql(t){return t.split("-")[1]}function Zv(t){return t==="x"?"y":"x"}function e0(t){return t==="y"?"height":"width"}function Vi(t){return["top","bottom"].includes(Fs(t))?"y":"x"}function t0(t){return Zv(Vi(t))}function j5(t,e,n){n===void 0&&(n=!1);const r=Ql(t),s=t0(t),a=e0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=jf(o)),[o,jf(o)]}function T5(t){const e=jf(t);return[ry(t),e,ry(e)]}function ry(t){return t.replace(/start|end/g,e=>E5[e])}function S5(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function C5(t,e,n,r){const s=Ql(t);let a=S5(Fs(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(ry)))),a}function jf(t){return t.replace(/left|right|bottom|top/g,e=>N5[e])}function I5(t){return{top:0,right:0,bottom:0,left:0,...t}}function hC(t){return typeof t!="number"?I5(t):{top:t,right:t,bottom:t,left:t}}function Tf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function w1(t,e,n){let{reference:r,floating:s}=t;const a=Vi(e),o=t0(e),l=e0(o),c=Fs(e),u=a==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Ql(e)){case"start":y[o]-=m*(n&&u?-1:1);break;case"end":y[o]+=m*(n&&u?-1:1);break}return y}const A5=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=w1(u,r,c),m=r,y={},j=0;for(let w=0;w<l.length;w++){const{name:N,fn:v}=l[w],{x,y:E,data:I,reset:O}=await v({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});h=x??h,f=E??f,y={...y,[N]:{...y[N],...I}},O&&j<=50&&(j++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:h,y:f}=w1(u,m,c)),w=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Pu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=Vs(e,t),j=hC(y),N=l[m?f==="floating"?"reference":"floating":f],v=Tf(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(N)))==null||n?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},O=Tf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:E,strategy:c}):x);return{top:(v.top-O.top+j.top)/I.y,bottom:(O.bottom-v.bottom+j.bottom)/I.y,left:(v.left-O.left+j.left)/I.x,right:(O.right-v.right+j.right)/I.x}}const k5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Vs(t,e)||{};if(u==null)return{};const f=hC(h),m={x:n,y:r},y=t0(s),j=e0(y),w=await o.getDimensions(u),N=y==="y",v=N?"top":"left",x=N?"bottom":"right",E=N?"clientHeight":"clientWidth",I=a.reference[j]+a.reference[y]-m[y]-a.floating[j],O=m[y]-a.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=D?D[E]:0;(!C||!await(o.isElement==null?void 0:o.isElement(D)))&&(C=l.floating[E]||a.floating[j]);const _=I/2-O/2,T=C/2-w[j]/2-1,S=Li(f[v],T),P=Li(f[x],T),M=S,A=C-w[j]-P,H=C/2-w[j]/2+_,te=ny(M,H,A),W=!c.arrow&&Ql(s)!=null&&H!==te&&a.reference[j]/2-(H<M?S:P)-w[j]/2<0,le=W?H<M?H-M:H-A:0;return{[y]:m[y]+le,data:{[y]:te,centerOffset:H-te-le,...W&&{alignmentOffset:le}},reset:W}}}),R5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:w=!0,...N}=Vs(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Fs(s),x=Vi(l),E=Fs(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),O=m||(E||!w?[jf(l)]:T5(l)),D=j!=="none";!m&&D&&O.push(...C5(l,w,j,I));const C=[l,...O],_=await Pu(e,N),T=[];let S=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&T.push(_[v]),f){const H=j5(s,o,I);T.push(_[H[0]],_[H[1]])}if(S=[...S,{placement:s,overflows:T}],!T.every(H=>H<=0)){var P,M;const H=(((P=a.flip)==null?void 0:P.index)||0)+1,te=C[H];if(te)return{data:{index:H,overflows:S},reset:{placement:te}};let W=(M=S.filter(le=>le.overflows[0]<=0).sort((le,V)=>le.overflows[1]-V.overflows[1])[0])==null?void 0:M.placement;if(!W)switch(y){case"bestFit":{var A;const le=(A=S.filter(V=>{if(D){const U=Vi(V.placement);return U===x||U==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(U=>U>0).reduce((U,G)=>U+G,0)]).sort((V,U)=>V[1]-U[1])[0])==null?void 0:A[0];le&&(W=le);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function _1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function b1(t){return b5.some(e=>t[e]>=0)}const P5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Vs(t,e);switch(r){case"referenceHidden":{const a=await Pu(e,{...s,elementContext:"reference"}),o=_1(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:b1(o)}}}case"escaped":{const a=await Pu(e,{...s,altBoundary:!0}),o=_1(a,n.floating);return{data:{escapedOffsets:o,escaped:b1(o)}}}default:return{}}}}};async function D5(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Fs(n),l=Ql(n),c=Vi(n)==="y",u=["left","top"].includes(o)?-1:1,h=a&&c?-1:1,f=Vs(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:j}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof j=="number"&&(y=l==="end"?j*-1:j),c?{x:y*h,y:m*u}:{x:m*u,y:y*h}}const M5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await D5(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},O5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:N=>{let{x:v,y:x}=N;return{x:v,y:x}}},...c}=Vs(t,e),u={x:n,y:r},h=await Pu(e,c),f=Vi(Fs(s)),m=Zv(f);let y=u[m],j=u[f];if(a){const N=m==="y"?"top":"left",v=m==="y"?"bottom":"right",x=y+h[N],E=y-h[v];y=ny(x,y,E)}if(o){const N=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=j+h[N],E=j-h[v];j=ny(x,j,E)}const w=l.fn({...e,[m]:y,[f]:j});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:a,[f]:o}}}}}},L5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Vs(t,e),h={x:n,y:r},f=Vi(s),m=Zv(f);let y=h[m],j=h[f];const w=Vs(l,e),N=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const E=m==="y"?"height":"width",I=a.reference[m]-a.floating[E]+N.mainAxis,O=a.reference[m]+a.reference[E]-N.mainAxis;y<I?y=I:y>O&&(y=O)}if(u){var v,x;const E=m==="y"?"width":"height",I=["top","left"].includes(Fs(s)),O=a.reference[f]-a.floating[E]+(I&&((v=o.offset)==null?void 0:v[f])||0)+(I?0:N.crossAxis),D=a.reference[f]+a.reference[E]+(I?0:((x=o.offset)==null?void 0:x[f])||0)-(I?N.crossAxis:0);j<O?j=O:j>D&&(j=D)}return{[m]:y,[f]:j}}}},V5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Vs(t,e),h=await Pu(e,u),f=Fs(s),m=Ql(s),y=Vi(s)==="y",{width:j,height:w}=a.floating;let N,v;f==="top"||f==="bottom"?(N=f,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,N=m==="end"?"top":"bottom");const x=w-h.top-h.bottom,E=j-h.left-h.right,I=Li(w-h[N],x),O=Li(j-h[v],E),D=!e.middlewareData.shift;let C=I,_=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=x),D&&!m){const S=Rn(h.left,0),P=Rn(h.right,0),M=Rn(h.top,0),A=Rn(h.bottom,0);y?_=j-2*(S!==0||P!==0?S+P:Rn(h.left,h.right)):C=w-2*(M!==0||A!==0?M+A:Rn(h.top,h.bottom))}await c({...e,availableWidth:_,availableHeight:C});const T=await o.getDimensions(l.floating);return j!==T.width||w!==T.height?{reset:{rects:!0}}:{}}}};function Nm(){return typeof window<"u"}function Yl(t){return fC(t)?(t.nodeName||"").toLowerCase():"#document"}function Un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rs(t){var e;return(e=(fC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fC(t){return Nm()?t instanceof Node||t instanceof Un(t).Node:!1}function Sr(t){return Nm()?t instanceof Element||t instanceof Un(t).Element:!1}function es(t){return Nm()?t instanceof HTMLElement||t instanceof Un(t).HTMLElement:!1}function N1(t){return!Nm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Un(t).ShadowRoot}function id(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Cr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function F5(t){return["table","td","th"].includes(Yl(t))}function Em(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function n0(t){const e=r0(),n=Sr(t)?Cr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function U5(t){let e=Fi(t);for(;es(e)&&!Al(e);){if(n0(e))return e;if(Em(e))return null;e=Fi(e)}return null}function r0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Al(t){return["html","body","#document"].includes(Yl(t))}function Cr(t){return Un(t).getComputedStyle(t)}function jm(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fi(t){if(Yl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||N1(t)&&t.host||rs(t);return N1(e)?e.host:e}function mC(t){const e=Fi(t);return Al(e)?t.ownerDocument?t.ownerDocument.body:t.body:es(e)&&id(e)?e:mC(e)}function Du(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=mC(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Un(s);if(a){const l=sy(o);return e.concat(o,o.visualViewport||[],id(s)?s:[],l&&n?Du(l):[])}return e.concat(s,Du(s,[],n))}function sy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pC(t){const e=Cr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=es(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Ef(n)!==a||Ef(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function s0(t){return Sr(t)?t:t.contextElement}function tl(t){const e=s0(t);if(!es(e))return Kr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=pC(e);let o=(a?Ef(n.width):n.width)/r,l=(a?Ef(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const $5=Kr(0);function gC(t){const e=Un(t);return!r0()||!e.visualViewport?$5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function z5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Un(t)?!1:e}function Ba(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=s0(t);let o=Kr(1);e&&(r?Sr(r)&&(o=tl(r)):o=tl(t));const l=z5(a,n,r)?gC(a):Kr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(a){const m=Un(a),y=r&&Sr(r)?Un(r):r;let j=m,w=sy(j);for(;w&&r&&y!==j;){const N=tl(w),v=w.getBoundingClientRect(),x=Cr(w),E=v.left+(w.clientLeft+parseFloat(x.paddingLeft))*N.x,I=v.top+(w.clientTop+parseFloat(x.paddingTop))*N.y;c*=N.x,u*=N.y,h*=N.x,f*=N.y,c+=E,u+=I,j=Un(w),w=sy(j)}}return Tf({width:h,height:f,x:c,y:u})}function i0(t,e){const n=jm(t).scrollLeft;return e?e.left+n:Ba(rs(t)).left+n}function xC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:i0(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function B5(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=rs(r),l=e?Em(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Kr(1);const h=Kr(0),f=es(r);if((f||!f&&!a)&&((Yl(r)!=="body"||id(o))&&(c=jm(r)),es(r))){const y=Ba(r);u=tl(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!a?xC(o,c,!0):Kr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function H5(t){return Array.from(t.getClientRects())}function W5(t){const e=rs(t),n=jm(t),r=t.ownerDocument.body,s=Rn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Rn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+i0(t);const l=-n.scrollTop;return Cr(r).direction==="rtl"&&(o+=Rn(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function q5(t,e){const n=Un(t),r=rs(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=r0();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function K5(t,e){const n=Ba(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=es(t)?tl(t):Kr(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function E1(t,e,n){let r;if(e==="viewport")r=q5(t,n);else if(e==="document")r=W5(rs(t));else if(Sr(e))r=K5(e,n);else{const s=gC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Tf(r)}function yC(t,e){const n=Fi(t);return n===e||!Sr(n)||Al(n)?!1:Cr(n).position==="fixed"||yC(n,e)}function G5(t,e){const n=e.get(t);if(n)return n;let r=Du(t,[],!1).filter(l=>Sr(l)&&Yl(l)!=="body"),s=null;const a=Cr(t).position==="fixed";let o=a?Fi(t):t;for(;Sr(o)&&!Al(o);){const l=Cr(o),c=n0(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||id(o)&&!c&&yC(t,o))?r=r.filter(h=>h!==o):s=l,o=Fi(o)}return e.set(t,r),r}function Q5(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Em(e)?[]:G5(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=E1(e,h,s);return u.top=Rn(f.top,u.top),u.right=Li(f.right,u.right),u.bottom=Li(f.bottom,u.bottom),u.left=Rn(f.left,u.left),u},E1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Y5(t){const{width:e,height:n}=pC(t);return{width:e,height:n}}function X5(t,e,n){const r=es(e),s=rs(e),a=n==="fixed",o=Ba(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Kr(0);if(r||!r&&!a)if((Yl(e)!=="body"||id(s))&&(l=jm(e)),r){const m=Ba(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=i0(s));const u=s&&!r&&!a?xC(s,l):Kr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function wg(t){return Cr(t).position==="static"}function j1(t,e){if(!es(t)||Cr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return rs(t)===n&&(n=n.ownerDocument.body),n}function vC(t,e){const n=Un(t);if(Em(t))return n;if(!es(t)){let s=Fi(t);for(;s&&!Al(s);){if(Sr(s)&&!wg(s))return s;s=Fi(s)}return n}let r=j1(t,e);for(;r&&F5(r)&&wg(r);)r=j1(r,e);return r&&Al(r)&&wg(r)&&!n0(r)?n:r||U5(t)||n}const J5=async function(t){const e=this.getOffsetParent||vC,n=this.getDimensions,r=await n(t.floating);return{reference:X5(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Z5(t){return Cr(t).direction==="rtl"}const eV={convertOffsetParentRelativeRectToViewportRelativeRect:B5,getDocumentElement:rs,getClippingRect:Q5,getOffsetParent:vC,getElementRects:J5,getClientRects:H5,getDimensions:Y5,getScale:tl,isElement:Sr,isRTL:Z5};function wC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function tV(t,e){let n=null,r;const s=rs(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=u;if(l||e(),!m||!y)return;const j=lh(f),w=lh(s.clientWidth-(h+m)),N=lh(s.clientHeight-(f+y)),v=lh(h),E={rootMargin:-j+"px "+-w+"px "+-N+"px "+-v+"px",threshold:Rn(0,Li(1,c))||1};let I=!0;function O(D){const C=D[0].intersectionRatio;if(C!==c){if(!I)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!wC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(O,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,E)}n.observe(t)}return o(!0),a}function nV(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=s0(t),h=s||a?[...u?Du(u):[],...Du(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const f=u&&l?tV(u,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(e)})),n()}),u&&!c&&y.observe(u),y.observe(e));let j,w=c?Ba(t):null;c&&N();function N(){const v=Ba(t);w&&!wC(w,v)&&n(),w=v,j=requestAnimationFrame(N)}return n(),()=>{var v;h.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),f==null||f(),(v=y)==null||v.disconnect(),y=null,c&&cancelAnimationFrame(j)}}const rV=M5,sV=O5,iV=R5,aV=V5,oV=P5,T1=k5,lV=L5,cV=(t,e,n)=>{const r=new Map,s={platform:eV,...n},a={...s.platform,_c:r};return A5(t,e,{...s,platform:a})};var Lh=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Sf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Sf(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function _C(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function S1(t,e){const n=_C(t);return Math.round(e*n)/n}function _g(t){const e=p.useRef(t);return Lh(()=>{e.current=t}),e}function uV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);Sf(m,r)||y(r);const[j,w]=p.useState(null),[N,v]=p.useState(null),x=p.useCallback(V=>{V!==D.current&&(D.current=V,w(V))},[]),E=p.useCallback(V=>{V!==C.current&&(C.current=V,v(V))},[]),I=a||j,O=o||N,D=p.useRef(null),C=p.useRef(null),_=p.useRef(h),T=c!=null,S=_g(c),P=_g(s),M=_g(u),A=p.useCallback(()=>{if(!D.current||!C.current)return;const V={placement:e,strategy:n,middleware:m};P.current&&(V.platform=P.current),cV(D.current,C.current,V).then(U=>{const G={...U,isPositioned:M.current!==!1};H.current&&!Sf(_.current,G)&&(_.current=G,eo.flushSync(()=>{f(G)}))})},[m,e,n,P,M]);Lh(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const H=p.useRef(!1);Lh(()=>(H.current=!0,()=>{H.current=!1}),[]),Lh(()=>{if(I&&(D.current=I),O&&(C.current=O),I&&O){if(S.current)return S.current(I,O,A);A()}},[I,O,A,S,T]);const te=p.useMemo(()=>({reference:D,floating:C,setReference:x,setFloating:E}),[x,E]),W=p.useMemo(()=>({reference:I,floating:O}),[I,O]),le=p.useMemo(()=>{const V={position:n,left:0,top:0};if(!W.floating)return V;const U=S1(W.floating,h.x),G=S1(W.floating,h.y);return l?{...V,transform:"translate("+U+"px, "+G+"px)",..._C(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:G}},[n,l,W.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:A,refs:te,elements:W,floatingStyles:le}),[h,A,te,W,le])}const dV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?T1({element:r.current,padding:s}).fn(n):{}:r?T1({element:r,padding:s}).fn(n):{}}}},hV=(t,e)=>({...rV(t),options:[t,e]}),fV=(t,e)=>({...sV(t),options:[t,e]}),mV=(t,e)=>({...lV(t),options:[t,e]}),pV=(t,e)=>({...iV(t),options:[t,e]}),gV=(t,e)=>({...aV(t),options:[t,e]}),xV=(t,e)=>({...oV(t),options:[t,e]}),yV=(t,e)=>({...dV(t),options:[t,e]});var vV="Arrow",bC=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(fe.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});bC.displayName=vV;var wV=bC;function NC(t){const[e,n]=p.useState(void 0);return St(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var a0="Popper",[EC,Xl]=Hn(a0),[_V,jC]=EC(a0),TC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return i.jsx(_V,{scope:e,anchor:r,onAnchorChange:s,children:n})};TC.displayName=a0;var SC="PopperAnchor",CC=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=jC(SC,n),o=p.useRef(null),l=Re(e,o);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(fe.div,{...s,ref:l})});CC.displayName=SC;var o0="PopperContent",[bV,NV]=EC(o0),IC=p.forwardRef((t,e)=>{var re,Me,ue,Se,de,xe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:j,...w}=t,N=jC(o0,n),[v,x]=p.useState(null),E=Re(e,Je=>x(Je)),[I,O]=p.useState(null),D=NC(I),C=(D==null?void 0:D.width)??0,_=(D==null?void 0:D.height)??0,T=r+(a!=="center"?"-"+a:""),S=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(u)?u:[u],M=P.length>0,A={padding:S,boundary:P.filter(jV),altBoundary:M},{refs:H,floatingStyles:te,placement:W,isPositioned:le,middlewareData:V}=uV({strategy:"fixed",placement:T,whileElementsMounted:(...Je)=>nV(...Je,{animationFrame:y==="always"}),elements:{reference:N.anchor},middleware:[hV({mainAxis:s+_,alignmentAxis:o}),c&&fV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?mV():void 0,...A}),c&&pV({...A}),gV({...A,apply:({elements:Je,rects:Dt,availableWidth:qn,availableHeight:Pr})=>{const{width:os,height:oc}=Dt.reference,ls=Je.floating.style;ls.setProperty("--radix-popper-available-width",`${qn}px`),ls.setProperty("--radix-popper-available-height",`${Pr}px`),ls.setProperty("--radix-popper-anchor-width",`${os}px`),ls.setProperty("--radix-popper-anchor-height",`${oc}px`)}}),I&&yV({element:I,padding:l}),TV({arrowWidth:C,arrowHeight:_}),m&&xV({strategy:"referenceHidden",...A})]}),[U,G]=RC(W),X=ot(j);St(()=>{le&&(X==null||X())},[le,X]);const oe=(re=V.arrow)==null?void 0:re.x,_e=(Me=V.arrow)==null?void 0:Me.y,De=((ue=V.arrow)==null?void 0:ue.centerOffset)!==0,[ke,ze]=p.useState();return St(()=>{v&&ze(window.getComputedStyle(v).zIndex)},[v]),i.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:le?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(Se=V.transformOrigin)==null?void 0:Se.x,(de=V.transformOrigin)==null?void 0:de.y].join(" "),...((xe=V.hide)==null?void 0:xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(bV,{scope:n,placedSide:U,onArrowChange:O,arrowX:oe,arrowY:_e,shouldHideArrow:De,children:i.jsx(fe.div,{"data-side":U,"data-align":G,...w,ref:E,style:{...w.style,animation:le?void 0:"none"}})})})});IC.displayName=o0;var AC="PopperArrow",EV={top:"bottom",right:"left",bottom:"top",left:"right"},kC=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=NV(AC,r),o=EV[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(wV,{...s,ref:n,style:{...s.style,display:"block"}})})});kC.displayName=AC;function jV(t){return t!==null}var TV=t=>({name:"transformOrigin",options:t,fn(e){var N,v,x;const{placement:n,rects:r,middlewareData:s}=e,o=((N=s.arrow)==null?void 0:N.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=RC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,y=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let j="",w="";return u==="bottom"?(j=o?f:`${m}px`,w=`${-c}px`):u==="top"?(j=o?f:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(j=`${-c}px`,w=o?f:`${y}px`):u==="left"&&(j=`${r.floating.width+c}px`,w=o?f:`${y}px`),{data:{x:j,y:w}}}});function RC(t){const[e,n="center"]=t.split("-");return[e,n]}var PC=TC,l0=CC,c0=IC,u0=kC,[Tm,Gq]=Hn("Tooltip",[Xl]),d0=Xl(),DC="TooltipProvider",SV=700,C1="tooltip.open",[CV,MC]=Tm(DC),OC=t=>{const{__scopeTooltip:e,delayDuration:n=SV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(CV,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};OC.displayName=DC;var LC="Tooltip",[Qq,Sm]=Tm(LC),iy="TooltipTrigger",IV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sm(iy,n),a=MC(iy,n),o=d0(n),l=p.useRef(null),c=Re(e,l,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(l0,{asChild:!0,...o,children:i.jsx(fe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Y(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Y(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Y(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Y(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Y(t.onBlur,s.onClose),onClick:Y(t.onClick,s.onClose)})})});IV.displayName=iy;var AV="TooltipPortal",[Yq,kV]=Tm(AV,{forceMount:void 0}),kl="TooltipContent",VC=p.forwardRef((t,e)=>{const n=kV(kl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=Sm(kl,t.__scopeTooltip);return i.jsx(gn,{present:r||o.open,children:o.disableHoverableContent?i.jsx(FC,{side:s,...a,ref:e}):i.jsx(RV,{side:s,...a,ref:e})})}),RV=p.forwardRef((t,e)=>{const n=Sm(kl,t.__scopeTooltip),r=MC(kl,t.__scopeTooltip),s=p.useRef(null),a=Re(e,s),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),y=p.useCallback((j,w)=>{const N=j.currentTarget,v={x:j.clientX,y:j.clientY},x=LV(v,N.getBoundingClientRect()),E=VV(v,x),I=FV(w.getBoundingClientRect()),O=$V([...E,...I]);l(O),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const j=N=>y(N,h),w=N=>y(N,c);return c.addEventListener("pointerleave",j),h.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",j),h.removeEventListener("pointerleave",w)}}},[c,h,y,m]),p.useEffect(()=>{if(o){const j=w=>{const N=w.target,v={x:w.clientX,y:w.clientY},x=(c==null?void 0:c.contains(N))||(h==null?void 0:h.contains(N)),E=!UV(v,o);x?m():E&&(m(),u())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[c,h,o,u,m]),i.jsx(FC,{...t,ref:a})}),[PV,DV]=Tm(LC,{isInside:!1}),MV=P3("TooltipContent"),FC=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=Sm(kl,n),u=d0(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(C1,h),()=>document.removeEventListener(C1,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),i.jsx(ql,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:i.jsxs(c0,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(MV,{children:r}),i.jsx(PV,{scope:n,isInside:!0,children:i.jsx(Z3,{id:c.contentId,role:"tooltip",children:s||r})})]})})});VC.displayName=kl;var UC="TooltipArrow",OV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=d0(n);return DV(UC,n).isInside?null:i.jsx(u0,{...s,...r,ref:e})});OV.displayName=UC;function LV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function VV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function FV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function UV(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function $V(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zV(e)}function zV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var BV=OC,$C=VC;const HV=BV,WV=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx($C,{ref:r,sideOffset:e,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));WV.displayName=$C.displayName;const qV=sd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?k3:"button";return i.jsx(o,{className:q(qV({variant:e,size:n,className:t})),ref:a,...s})});Z.displayName="Button";var h0="Avatar",[KV,Xq]=Hn(h0),[GV,zC]=KV(h0),BC=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=p.useState("idle");return i.jsx(GV,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(fe.span,{...r,ref:e})})});BC.displayName=h0;var HC="AvatarImage",WC=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=zC(HC,n),l=QV(r,a),c=ot(u=>{s(u),o.onImageLoadingStatusChange(u)});return St(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(fe.img,{...a,ref:e,src:r}):null});WC.displayName=HC;var qC="AvatarFallback",KC=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=zC(qC,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(fe.span,{...s,ref:e}):null});KC.displayName=qC;function I1(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QV(t,{referrerPolicy:e,crossOrigin:n}){const r=XV(),s=p.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=p.useState(()=>I1(a,t));return St(()=>{l(I1(a,t))},[a,t]),St(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),h=c("error");return a.addEventListener("load",u),a.addEventListener("error",h),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",h)}},[a,n,e]),o}function YV(){return()=>{}}function XV(){return p.useSyncExternalStore(YV,()=>!0,()=>!1)}var GC=BC,QC=WC,YC=KC;const Pn=p.forwardRef(({className:t,...e},n)=>i.jsx(GC,{ref:n,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Pn.displayName=GC.displayName;const tr=p.forwardRef(({className:t,...e},n)=>i.jsx(QC,{ref:n,className:q("aspect-square h-full w-full",t),...e}));tr.displayName=QC.displayName;const Dn=p.forwardRef(({className:t,...e},n)=>i.jsx(YC,{ref:n,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Dn.displayName=YC.displayName;const JV="modulepreload",ZV=function(t){return"/aad/"+t},A1={},va=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=ZV(c),c in A1)return;A1[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":JV,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},e6=()=>{};var k1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},t6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},JC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||f==null)throw new n6;const m=a<<2|l>>4;if(r.push(m),u!==64){const y=l<<4&240|u>>2;if(r.push(y),f!==64){const j=u<<6&192|f;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r6=function(t){const e=XC(t);return JC.encodeByteArray(e,!0)},Cf=function(t){return r6(t).replace(/\./g,"")},ZC=function(t){try{return JC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=()=>s6().__FIREBASE_DEFAULTS__,a6=()=>{if(typeof process>"u"||typeof k1>"u")return;const t=k1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},o6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ZC(t[1]);return e&&JSON.parse(e)},Cm=()=>{try{return e6()||i6()||a6()||o6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eI=t=>{var e,n;return(n=(e=Cm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tI=t=>{const e=eI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nI=()=>{var t;return(t=Cm())==null?void 0:t.config},rI=t=>{var e;return(e=Cm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cf(JSON.stringify(n)),Cf(JSON.stringify(o)),""].join(".")}const ou={};function c6(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function u6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let R1=!1;function m0(t,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||ou[t]===e||ou[t]||R1)return;ou[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=c6().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{R1=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=u6(r),y=n("text"),j=document.getElementById(y)||document.createElement("span"),w=n("learnmore"),N=document.getElementById(w)||document.createElement("a"),v=n("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;l(E),h(N,w);const I=u();c(x,v),E.append(x,j,N,I),document.body.appendChild(E)}a?(j.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function h6(){var e;const t=(e=Cm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function p6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g6(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function x6(){return!h6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y6(){try{return typeof indexedDB=="object"}catch{return!1}}function v6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="FirebaseError";class ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w6,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?_6(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ss(s,l,r)}}function _6(t,e){return t.replace(b6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const b6=/\{\$([^}]+)}/g;function N6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Us(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(P1(a)&&P1(o)){if(!Us(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function P1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Bc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function E6(t,e){const n=new j6(t,e);return n.subscribe.bind(n)}class j6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");T6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bg),s.error===void 0&&(s.error=bg),s.complete===void 0&&(s.complete=bg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Ui{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new l6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I6(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C6(t){return t===ca?void 0:t}function I6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const k6={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},R6=Le.INFO,P6={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},D6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=P6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class p0{constructor(e){this.name=e,this._logLevel=R6,this._logHandler=D6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const M6=(t,e)=>e.some(n=>t instanceof n);let D1,M1;function O6(){return D1||(D1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L6(){return M1||(M1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iI=new WeakMap,ay=new WeakMap,aI=new WeakMap,Ng=new WeakMap,g0=new WeakMap;function V6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ci(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iI.set(n,t)}).catch(()=>{}),g0.set(e,t),e}function F6(t){if(ay.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});ay.set(t,e)}let oy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U6(t){oy=t(oy)}function $6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eg(this),e,...n);return aI.set(r,e.sort?e.sort():[e]),Ci(r)}:L6().includes(t)?function(...e){return t.apply(Eg(this),e),Ci(iI.get(this))}:function(...e){return Ci(t.apply(Eg(this),e))}}function z6(t){return typeof t=="function"?$6(t):(t instanceof IDBTransaction&&F6(t),M6(t,O6())?new Proxy(t,oy):t)}function Ci(t){if(t instanceof IDBRequest)return V6(t);if(Ng.has(t))return Ng.get(t);const e=z6(t);return e!==t&&(Ng.set(t,e),g0.set(e,t)),e}const Eg=t=>g0.get(t);function B6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Ci(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ci(o.result),c.oldVersion,c.newVersion,Ci(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const H6=["get","getKey","getAll","getAllKeys","count"],W6=["put","add","delete","clear"],jg=new Map;function O1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=W6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||H6.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return jg.set(e,a),a}U6(t=>({...t,get:(e,n,r)=>O1(e,n)||t.get(e,n,r),has:(e,n)=>!!O1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function K6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ly="@firebase/app",L1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new p0("@firebase/app"),G6="@firebase/app-compat",Q6="@firebase/analytics-compat",Y6="@firebase/analytics",X6="@firebase/app-check-compat",J6="@firebase/app-check",Z6="@firebase/auth",eF="@firebase/auth-compat",tF="@firebase/database",nF="@firebase/data-connect",rF="@firebase/database-compat",sF="@firebase/functions",iF="@firebase/functions-compat",aF="@firebase/installations",oF="@firebase/installations-compat",lF="@firebase/messaging",cF="@firebase/messaging-compat",uF="@firebase/performance",dF="@firebase/performance-compat",hF="@firebase/remote-config",fF="@firebase/remote-config-compat",mF="@firebase/storage",pF="@firebase/storage-compat",gF="@firebase/firestore",xF="@firebase/ai",yF="@firebase/firestore-compat",vF="firebase",wF="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="[DEFAULT]",_F={[ly]:"fire-core",[G6]:"fire-core-compat",[Y6]:"fire-analytics",[Q6]:"fire-analytics-compat",[J6]:"fire-app-check",[X6]:"fire-app-check-compat",[Z6]:"fire-auth",[eF]:"fire-auth-compat",[tF]:"fire-rtdb",[nF]:"fire-data-connect",[rF]:"fire-rtdb-compat",[sF]:"fire-fn",[iF]:"fire-fn-compat",[aF]:"fire-iid",[oF]:"fire-iid-compat",[lF]:"fire-fcm",[cF]:"fire-fcm-compat",[uF]:"fire-perf",[dF]:"fire-perf-compat",[hF]:"fire-rc",[fF]:"fire-rc-compat",[mF]:"fire-gcs",[pF]:"fire-gcs-compat",[gF]:"fire-fst",[yF]:"fire-fst-compat",[xF]:"fire-vertex","fire-js":"fire-js",[vF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Map,bF=new Map,uy=new Map;function V1(t,e){try{t.container.addComponent(e)}catch(n){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(uy.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;uy.set(e,t);for(const n of Mu.values())V1(n,t);for(const n of bF.values())V1(n,t);return!0}function Im(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new ad("app","Firebase",NF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=wF;function oI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ii.create("bad-app-name",{appName:String(s)});if(n||(n=nI()),!n)throw Ii.create("no-options");const a=Mu.get(s);if(a){if(Us(n,a.options)&&Us(r,a.config))return a;throw Ii.create("duplicate-app",{appName:s})}const o=new A6(s);for(const c of uy.values())o.addComponent(c);const l=new EF(n,r,o);return Mu.set(s,l),l}function Am(t=cy){const e=Mu.get(t);if(!e&&t===cy&&nI())return oI();if(!e)throw Ii.create("no-app",{appName:t});return e}function jF(){return Array.from(Mu.values())}function Gr(t,e,n){let r=_F[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(o.join(" "));return}Ha(new Ui(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="firebase-heartbeat-database",SF=1,Ou="firebase-heartbeat-store";let Tg=null;function lI(){return Tg||(Tg=B6(TF,SF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Tg}async function CF(t){try{const n=(await lI()).transaction(Ou),r=await n.objectStore(Ou).get(cI(t));return await n.done,r}catch(e){if(e instanceof ss)$s.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(n.message)}}}async function F1(t,e){try{const r=(await lI()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,cI(t)),await r.done}catch(n){if(n instanceof ss)$s.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$s.warn(r.message)}}}function cI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=1024,AF=30;class kF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=U1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>AF){const o=DF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U1(),{heartbeatsToSend:r,unsentEntries:s}=RF(this._heartbeatsCache.heartbeats),a=Cf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return $s.warn(n),""}}}function U1(){return new Date().toISOString().substring(0,10)}function RF(t,e=IF){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),$1(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y6()?v6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $1(t){return Cf(JSON.stringify({version:2,heartbeats:t})).length}function DF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){Ha(new Ui("platform-logger",e=>new q6(e),"PRIVATE")),Ha(new Ui("heartbeat",e=>new kF(e),"PRIVATE")),Gr(ly,L1,t),Gr(ly,L1,"esm2020"),Gr("fire-js","")}MF("");var OF="firebase",LF="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(OF,LF,"app");function uI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dI=uI,hI=new ad("auth","Firebase",uI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new p0("@firebase/auth");function VF(t,...e){If.logLevel<=Le.WARN&&If.warn(`Auth (${so}): ${t}`,...e)}function Vh(t,...e){If.logLevel<=Le.ERROR&&If.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,...e){throw x0(t,...e)}function Qr(t,...e){return x0(t,...e)}function fI(t,e,n){const r={...dI(),[e]:n};return new ad("auth","Firebase",r).create(e,{appName:t.name})}function Cs(t){return fI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hI.create(t,...e)}function me(t,e,...n){if(!t)throw x0(e,...n)}function js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vh(e),new Error(e)}function zs(t,e){t||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function FF(){return z1()==="http:"||z1()==="https:"}function z1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FF()||m6()||"connection"in navigator)?navigator.onLine:!0}function $F(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=d6()||p6()}get(){return UF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HF=new ld(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ks(t,e,n,r,s={}){return pI(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=od({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return f6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ro(t.emulatorConfig.host)&&(u.credentials="include"),mI.fetch()(await gI(t,t.config.apiHost,n,l),u)})}async function pI(t,e,n){t._canInitEmulator=!1;const r={...zF,...e};try{const s=new qF(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ch(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ch(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ch(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ch(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw fI(t,h,u);Ir(t,h)}}catch(s){if(s instanceof ss)throw s;Ir(t,"network-request-failed",{message:String(s)})}}async function cd(t,e,n,r,s={}){const a=await Ks(t,e,n,r,s);return"mfaPendingCredential"in a&&Ir(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function gI(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?y0(t.config,s):`${t.config.apiScheme}://${s}`;return BF.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function WF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),HF.get())})}}function ch(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qr(t,e,r);return s.customData._tokenResponse=n,s}function B1(t){return t!==void 0&&t.enterprise!==void 0}class KF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GF(t,e){return Ks(t,"GET","/v2/recaptchaConfig",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e){return Ks(t,"POST","/v1/accounts:delete",e)}async function Af(t,e){return Ks(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xI(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),s=v0(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:lu(Sg(s.auth_time)),issuedAtTime:lu(Sg(s.iat)),expirationTime:lu(Sg(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Sg(t){return Number(t)*1e3}function v0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZC(n);return s?JSON.parse(s):(Vh("Failed to decode base64 JWT payload"),null)}catch(s){return Vh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function H1(t){const e=v0(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ss&&YF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Lu(t,Af(e,{idToken:n}));me(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(f=s.providerUserInfo)!=null&&f.length?vI(s.providerUserInfo):[],o=JF(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function yI(t){const e=Ct(t);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(t,e){const n=await pI(t,{},async()=>{const r=od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await gI(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ro(t.emulatorConfig.host)&&(c.credentials="include"),mI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eU(t,e){return Ks(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=H1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await ZF(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new nl;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(me(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new XF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Lu(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xI(this,e)}reload(){return yI(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await Lu(this,QF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:j,stsTokenManager:w}=n;me(f&&w,e,"internal-error");const N=nl.fromJSON(this.name,w);me(typeof f=="string",e,"internal-error"),ti(r,e.name),ti(s,e.name),me(typeof m=="boolean",e,"internal-error"),me(typeof y=="boolean",e,"internal-error"),ti(a,e.name),ti(o,e.name),ti(l,e.name),ti(c,e.name),ti(u,e.name),ti(h,e.name);const v=new yr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:N,createdAt:u,lastLoginAt:h});return j&&Array.isArray(j)&&(v.providerData=j.map(x=>({...x}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new nl;s.updateFromServerResponse(n);const a=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?vI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new nl;l.updateFromIdToken(r);const c=new yr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new Map;function Ts(t){zs(t instanceof Function,"Expected a class definition");let e=W1.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wI.type="NONE";const fy=wI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e,n){return`firebase:${t}:${e}:${n}`}class rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Fh(this.userKey,s.apiKey,a),this.fullPersistenceKey=Fh("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Af(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rl(Ts(fy),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||Ts(fy);const o=Fh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Af(e,{idToken:h}).catch(()=>{});if(!m)break;f=await yr._fromGetAccountInfoResponse(e,m,h)}else f=yr._fromJSON(e,h);u!==a&&(l=f),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new rl(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new rl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_I(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TI(e))return"Blackberry";if(SI(e))return"Webos";if(bI(e))return"Safari";if((e.includes("chrome/")||NI(e))&&!e.includes("edge/"))return"Chrome";if(jI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _I(t=ln()){return/firefox\//i.test(t)}function bI(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NI(t=ln()){return/crios\//i.test(t)}function EI(t=ln()){return/iemobile/i.test(t)}function jI(t=ln()){return/android/i.test(t)}function TI(t=ln()){return/blackberry/i.test(t)}function SI(t=ln()){return/webos/i.test(t)}function w0(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tU(t=ln()){var e;return w0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nU(){return g6()&&document.documentMode===10}function CI(t=ln()){return w0(t)||jI(t)||SI(t)||TI(t)||/windows phone/i.test(t)||EI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e=[]){let n;switch(t){case"Browser":n=q1(ln());break;case"Worker":n=`${q1(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e={}){return Ks(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=6;class aU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K1(this),this.idTokenSubscription=new K1(this),this.beforeStateQueue=new rU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ts(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await rl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Af(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$F()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Cs(this));const n=e?Ct(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sU(this),n=new aU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ts(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await rl.create(this,[Ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=II(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&VF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function io(t){return Ct(t)}class K1{constructor(e){this.auth=e,this.observer=null,this.addObserver=E6(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lU(t){km=t}function AI(t){return km.loadJS(t)}function cU(){return km.recaptchaEnterpriseScript}function uU(){return km.gapiScript}function dU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new fU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mU="recaptcha-enterprise",kI="NO_RECAPTCHA";class pU{constructor(e){this.type=mU,this.auth=io(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{GF(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new KF(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;B1(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(kI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&B1(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=cU();c.length!==0&&(c+=l),AI(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function G1(t,e,n,r=!1,s=!1){const a=new pU(t);let o;if(s)o=kI;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function my(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await G1(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await G1(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){const n=Im(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Us(a,e??{}))return s;Ir(s,"already-initialized")}return n.initialize({options:e})}function gU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ts);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PI(t,e,n){const r=io(t);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=DI(e),{host:o,port:l}=xU(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(Us(u,r.config.emulator)&&Us(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ro(o)?(f0(`${a}//${o}${c}`),m0("Auth",!0)):yU()}function DI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xU(t){const e=DI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Q1(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Q1(o)}}}function Q1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,n){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}async function vU(t,e){return Ks(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){return cd(t,"POST","/v1/accounts:signInWithPassword",qs(t,e))}async function _U(t,e){return Ks(t,"POST","/v1/accounts:sendOobCode",qs(t,e))}async function bU(t,e){return _U(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}async function EU(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Rm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Rl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,n,"signInWithPassword",wU);case"emailLink":return NU(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,r,"signUpPassword",vU);case"emailLink":return EU(e,{idToken:n,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e){return cd(t,"POST","/v1/accounts:signInWithIdp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="http://localhost";class $i extends Rm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new $i(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:jU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=od(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SU(t){const e=zc(Bc(t)).link,n=e?zc(Bc(e)).deep_link_id:null,r=zc(Bc(t)).deep_link_id;return(r?zc(Bc(r)).link:null)||r||n||e||t}class Pm{constructor(e){const n=zc(Bc(e)),r=n.apiKey??null,s=n.oobCode??null,a=TU(n.mode??null);me(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=SU(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return me(r,"argument-error"),Rl._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends MI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ud{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ws.credential(n,r)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends ud{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends ud{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bs.credential(n,r)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(t,e){return cd(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await yr._fromIdTokenResponse(e,r,s),o=Y1(r);return new Wa({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y1(r);return new Wa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends ss{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rf(e,n,r,s)}}function OI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(t,a,e,r):a})}async function IU(t,e,n=!1){const r=await Lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e,n=!1){const{auth:r}=t;if(Mn(r.app))return Promise.reject(Cs(r));const s="reauthenticate";try{const a=await Lu(t,OI(r,s,e,t),n);me(a.idToken,r,"internal-error");const o=v0(a.idToken);me(o,r,"internal-error");const{sub:l}=o;return me(t.uid===l,r,"user-mismatch"),Wa._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(t,e,n=!1){if(Mn(t.app))return Promise.reject(Cs(t));const r="signIn",s=await OI(t,r,e),a=await Wa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function VI(t,e){return LI(io(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t,e,n){var r;me(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),me(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),me(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(me(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(me(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t){const e=io(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UI(t,e,n){if(Mn(t.app))return Promise.reject(Cs(t));const r=io(t),o=await my(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FI(t),c}),l=await Wa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function $I(t,e,n){return Mn(t.app)?Promise.reject(Cs(t)):VI(Ct(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FI(t),r})}async function zI(t,e){const n=Ct(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&kU(n.auth,s,e);const{email:a}=await bU(n.auth,s);a!==t.email&&await t.reload()}function BI(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function HI(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function WI(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function qI(t){return Ct(t).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=1e3,PU=10;class GI extends KI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);nU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GI.type="LOCAL";const QI=GI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends KI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YI.type="SESSION";const _0=YI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Dm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await DU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=b0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function OU(t){Yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function LU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function FU(){return XI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebaseLocalStorageDb",UU=1,Df="firebaseLocalStorage",ZI="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function $U(){const t=indexedDB.deleteDatabase(JI);return new dd(t).toPromise()}function py(){const t=indexedDB.open(JI,UU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Df,{keyPath:ZI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),await $U(),e(await py()))})})}async function X1(t,e,n){const r=Mm(t,!0).put({[ZI]:e,value:n});return new dd(r).toPromise()}async function zU(t,e){const n=Mm(t,!1).get(e),r=await new dd(n).toPromise();return r===void 0?null:r.value}function J1(t,e){const n=Mm(t,!0).delete(e);return new dd(n).toPromise()}const BU=800,HU=3;class e2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dm._getInstance(FU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await LU(),!this.activeServiceWorker)return;this.sender=new MU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await X1(e,Pf,"1"),await J1(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Mm(s,!1).getAll();return new dd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e2.type="LOCAL";const t2=e2;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t,e){return e?Ts(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends Rm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qU(t){return LI(t.auth,new N0(t),t.bypassAuthState)}function KU(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),AU(n,new N0(t),t.bypassAuthState)}async function GU(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),IU(n,new N0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qU;case"linkViaPopup":case"linkViaRedirect":return GU;case"reauthViaPopup":case"reauthViaRedirect":return KU;default:Ir(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new ld(2e3,1e4);class $o extends n2{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=b0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QU.get())};e()}}$o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="pendingRedirect",Uh=new Map;class XU extends n2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const r=await JU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JU(t,e){const n=t9(e),r=e9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZU(t,e){Uh.set(t._key(),e)}function e9(t){return Ts(t._redirectPersistence)}function t9(t){return Fh(YU,t.config.apiKey,t.name)}async function n9(t,e,n=!1){if(Mn(t.app))return Promise.reject(Cs(t));const r=io(t),s=WU(r,e),o=await new XU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=10*60*1e3;class s9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!r2(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r9&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z1(e))}saveEventToCache(e){this.cachedEventUids.add(Z1(e)),this.lastProcessedEventTime=Date.now()}}function Z1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a9(t,e={}){return Ks(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l9=/^https?/;async function c9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a9(t);for(const n of e)try{if(u9(n))return}catch{}Ir(t,"unauthorized-domain")}function u9(t){const e=dy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!l9.test(n))return!1;if(o9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=new ld(3e4,6e4);function eN(){const t=Yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h9(t){return new Promise((e,n)=>{var s,a,o;function r(){eN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eN(),n(Qr(t,"network-request-failed"))},timeout:d9.get()})}if((a=(s=Yr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Yr().gapi)!=null&&o.load)r();else{const l=dU("iframefcb");return Yr()[l]=()=>{gapi.load?r():n(Qr(t,"network-request-failed"))},AI(`${uU()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw $h=null,e})}let $h=null;function f9(t){return $h=$h||h9(t),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new ld(5e3,15e3),p9="__/auth/iframe",g9="emulator/auth/iframe",x9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v9(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y0(e,g9):`https://${t.config.authDomain}/${p9}`,r={apiKey:e.apiKey,appName:t.name,v:so},s=y9.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${od(r).slice(1)}`}async function w9(t){const e=await f9(t),n=Yr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:v9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x9,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Qr(t,"network-request-failed"),l=Yr().setTimeout(()=>{a(o)},m9.get());function c(){Yr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b9=500,N9=600,E9="_blank",j9="http://localhost";class tN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T9(t,e,n,r=b9,s=N9){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={..._9,width:r.toString(),height:s.toString(),top:a,left:o},u=ln().toLowerCase();n&&(l=NI(u)?E9:n),_I(u)&&(e=e||j9,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,j])=>`${m}${y}=${j},`,"");if(tU(u)&&l!=="_self")return S9(e||"",l),new tN(null);const f=window.open(e||"",l,h);me(f,t,"popup-blocked");try{f.focus()}catch{}return new tN(f)}function S9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9="__/auth/handler",I9="emulator/auth/handler",A9=encodeURIComponent("fac");async function nN(t,e,n,r,s,a){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:so,eventId:s};if(e instanceof MI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",N6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ud){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${A9}=${encodeURIComponent(c)}`:"";return`${k9(t)}?${od(l).slice(1)}${u}`}function k9({config:t}){return t.emulator?y0(t,I9):`https://${t.authDomain}/${C9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="webStorageSupport";class R9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_0,this._completeRedirectFn=n9,this._overrideRedirectResult=ZU}async _openPopup(e,n,r,s){var o;zs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await nN(e,n,r,dy(),s);return T9(e,a,b0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await nN(e,n,r,dy(),s);return OU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(zs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w9(e),r=new s9(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cg,{type:Cg},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[Cg];a!==void 0&&n(!!a),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CI()||bI()||w0()}}const s2=R9;var rN="@firebase/auth",sN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M9(t){Ha(new Ui("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:II(t)},u=new oU(r,s,a,c);return gU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ha(new Ui("auth-internal",e=>{const n=io(e.getProvider("auth").getImmediate());return(r=>new P9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(rN,sN,D9(t)),Gr(rN,sN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=5*60,L9=rI("authIdTokenMaxAge")||O9;let iN=null;const V9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>L9)return;const s=n==null?void 0:n.token;iN!==s&&(iN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function i2(t=Am()){const e=Im(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RI(t,{popupRedirectResolver:s2,persistence:[t2,QI,_0]}),r=rI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=V9(a.toString());HI(n,o,()=>o(n.currentUser)),BI(n,l=>o(l))}}const s=eI("auth");return s&&PI(n,`http://${s}`),n}function F9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}lU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Qr("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",F9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M9("Browser");const U9=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Pm,AuthCredential:Rm,EmailAuthCredential:Rl,EmailAuthProvider:ao,FacebookAuthProvider:vs,GithubAuthProvider:_s,GoogleAuthProvider:ws,OAuthCredential:$i,TwitterAuthProvider:bs,beforeAuthStateChanged:HI,browserLocalPersistence:QI,browserPopupRedirectResolver:s2,browserSessionPersistence:_0,connectAuthEmulator:PI,createUserWithEmailAndPassword:UI,getAuth:i2,getIdTokenResult:xI,inMemoryPersistence:fy,indexedDBLocalPersistence:t2,initializeAuth:RI,onAuthStateChanged:WI,onIdTokenChanged:BI,prodErrorMap:dI,reload:yI,sendEmailVerification:zI,signInWithCredential:VI,signInWithEmailAndPassword:$I,signOut:qI},Symbol.toStringTag,{value:"Module"}));var aN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,a2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function T(){}T.prototype=_.prototype,C.D=_.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,P,M){for(var A=Array(arguments.length-2),H=2;H<arguments.length;H++)A[H-2]=arguments[H];return _.prototype[P].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,_,T){T||(T=0);var S=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)S[P]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(P=0;16>P;++P)S[P]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=C.g[0],T=C.g[1],P=C.g[2];var M=C.g[3],A=_+(M^T&(P^M))+S[0]+3614090360&4294967295;_=T+(A<<7&4294967295|A>>>25),A=M+(P^_&(T^P))+S[1]+3905402710&4294967295,M=_+(A<<12&4294967295|A>>>20),A=P+(T^M&(_^T))+S[2]+606105819&4294967295,P=M+(A<<17&4294967295|A>>>15),A=T+(_^P&(M^_))+S[3]+3250441966&4294967295,T=P+(A<<22&4294967295|A>>>10),A=_+(M^T&(P^M))+S[4]+4118548399&4294967295,_=T+(A<<7&4294967295|A>>>25),A=M+(P^_&(T^P))+S[5]+1200080426&4294967295,M=_+(A<<12&4294967295|A>>>20),A=P+(T^M&(_^T))+S[6]+2821735955&4294967295,P=M+(A<<17&4294967295|A>>>15),A=T+(_^P&(M^_))+S[7]+4249261313&4294967295,T=P+(A<<22&4294967295|A>>>10),A=_+(M^T&(P^M))+S[8]+1770035416&4294967295,_=T+(A<<7&4294967295|A>>>25),A=M+(P^_&(T^P))+S[9]+2336552879&4294967295,M=_+(A<<12&4294967295|A>>>20),A=P+(T^M&(_^T))+S[10]+4294925233&4294967295,P=M+(A<<17&4294967295|A>>>15),A=T+(_^P&(M^_))+S[11]+2304563134&4294967295,T=P+(A<<22&4294967295|A>>>10),A=_+(M^T&(P^M))+S[12]+1804603682&4294967295,_=T+(A<<7&4294967295|A>>>25),A=M+(P^_&(T^P))+S[13]+4254626195&4294967295,M=_+(A<<12&4294967295|A>>>20),A=P+(T^M&(_^T))+S[14]+2792965006&4294967295,P=M+(A<<17&4294967295|A>>>15),A=T+(_^P&(M^_))+S[15]+1236535329&4294967295,T=P+(A<<22&4294967295|A>>>10),A=_+(P^M&(T^P))+S[1]+4129170786&4294967295,_=T+(A<<5&4294967295|A>>>27),A=M+(T^P&(_^T))+S[6]+3225465664&4294967295,M=_+(A<<9&4294967295|A>>>23),A=P+(_^T&(M^_))+S[11]+643717713&4294967295,P=M+(A<<14&4294967295|A>>>18),A=T+(M^_&(P^M))+S[0]+3921069994&4294967295,T=P+(A<<20&4294967295|A>>>12),A=_+(P^M&(T^P))+S[5]+3593408605&4294967295,_=T+(A<<5&4294967295|A>>>27),A=M+(T^P&(_^T))+S[10]+38016083&4294967295,M=_+(A<<9&4294967295|A>>>23),A=P+(_^T&(M^_))+S[15]+3634488961&4294967295,P=M+(A<<14&4294967295|A>>>18),A=T+(M^_&(P^M))+S[4]+3889429448&4294967295,T=P+(A<<20&4294967295|A>>>12),A=_+(P^M&(T^P))+S[9]+568446438&4294967295,_=T+(A<<5&4294967295|A>>>27),A=M+(T^P&(_^T))+S[14]+3275163606&4294967295,M=_+(A<<9&4294967295|A>>>23),A=P+(_^T&(M^_))+S[3]+4107603335&4294967295,P=M+(A<<14&4294967295|A>>>18),A=T+(M^_&(P^M))+S[8]+1163531501&4294967295,T=P+(A<<20&4294967295|A>>>12),A=_+(P^M&(T^P))+S[13]+2850285829&4294967295,_=T+(A<<5&4294967295|A>>>27),A=M+(T^P&(_^T))+S[2]+4243563512&4294967295,M=_+(A<<9&4294967295|A>>>23),A=P+(_^T&(M^_))+S[7]+1735328473&4294967295,P=M+(A<<14&4294967295|A>>>18),A=T+(M^_&(P^M))+S[12]+2368359562&4294967295,T=P+(A<<20&4294967295|A>>>12),A=_+(T^P^M)+S[5]+4294588738&4294967295,_=T+(A<<4&4294967295|A>>>28),A=M+(_^T^P)+S[8]+2272392833&4294967295,M=_+(A<<11&4294967295|A>>>21),A=P+(M^_^T)+S[11]+1839030562&4294967295,P=M+(A<<16&4294967295|A>>>16),A=T+(P^M^_)+S[14]+4259657740&4294967295,T=P+(A<<23&4294967295|A>>>9),A=_+(T^P^M)+S[1]+2763975236&4294967295,_=T+(A<<4&4294967295|A>>>28),A=M+(_^T^P)+S[4]+1272893353&4294967295,M=_+(A<<11&4294967295|A>>>21),A=P+(M^_^T)+S[7]+4139469664&4294967295,P=M+(A<<16&4294967295|A>>>16),A=T+(P^M^_)+S[10]+3200236656&4294967295,T=P+(A<<23&4294967295|A>>>9),A=_+(T^P^M)+S[13]+681279174&4294967295,_=T+(A<<4&4294967295|A>>>28),A=M+(_^T^P)+S[0]+3936430074&4294967295,M=_+(A<<11&4294967295|A>>>21),A=P+(M^_^T)+S[3]+3572445317&4294967295,P=M+(A<<16&4294967295|A>>>16),A=T+(P^M^_)+S[6]+76029189&4294967295,T=P+(A<<23&4294967295|A>>>9),A=_+(T^P^M)+S[9]+3654602809&4294967295,_=T+(A<<4&4294967295|A>>>28),A=M+(_^T^P)+S[12]+3873151461&4294967295,M=_+(A<<11&4294967295|A>>>21),A=P+(M^_^T)+S[15]+530742520&4294967295,P=M+(A<<16&4294967295|A>>>16),A=T+(P^M^_)+S[2]+3299628645&4294967295,T=P+(A<<23&4294967295|A>>>9),A=_+(P^(T|~M))+S[0]+4096336452&4294967295,_=T+(A<<6&4294967295|A>>>26),A=M+(T^(_|~P))+S[7]+1126891415&4294967295,M=_+(A<<10&4294967295|A>>>22),A=P+(_^(M|~T))+S[14]+2878612391&4294967295,P=M+(A<<15&4294967295|A>>>17),A=T+(M^(P|~_))+S[5]+4237533241&4294967295,T=P+(A<<21&4294967295|A>>>11),A=_+(P^(T|~M))+S[12]+1700485571&4294967295,_=T+(A<<6&4294967295|A>>>26),A=M+(T^(_|~P))+S[3]+2399980690&4294967295,M=_+(A<<10&4294967295|A>>>22),A=P+(_^(M|~T))+S[10]+4293915773&4294967295,P=M+(A<<15&4294967295|A>>>17),A=T+(M^(P|~_))+S[1]+2240044497&4294967295,T=P+(A<<21&4294967295|A>>>11),A=_+(P^(T|~M))+S[8]+1873313359&4294967295,_=T+(A<<6&4294967295|A>>>26),A=M+(T^(_|~P))+S[15]+4264355552&4294967295,M=_+(A<<10&4294967295|A>>>22),A=P+(_^(M|~T))+S[6]+2734768916&4294967295,P=M+(A<<15&4294967295|A>>>17),A=T+(M^(P|~_))+S[13]+1309151649&4294967295,T=P+(A<<21&4294967295|A>>>11),A=_+(P^(T|~M))+S[4]+4149444226&4294967295,_=T+(A<<6&4294967295|A>>>26),A=M+(T^(_|~P))+S[11]+3174756917&4294967295,M=_+(A<<10&4294967295|A>>>22),A=P+(_^(M|~T))+S[2]+718787259&4294967295,P=M+(A<<15&4294967295|A>>>17),A=T+(M^(P|~_))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var T=_-this.blockSize,S=this.B,P=this.h,M=0;M<_;){if(P==0)for(;M<=T;)s(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<_;)if(S[P++]=C.charCodeAt(M++),P==this.blockSize){s(this,S),P=0;break}}else for(;M<_;)if(S[P++]=C[M++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var T=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=T&255,T/=256;for(this.u(C),C=Array(16),_=T=0;4>_;++_)for(var S=0;32>S;S+=8)C[T++]=this.g[_]>>>S&255;return C};function a(C,_){var T=l;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=_(C)}function o(C,_){this.h=_;for(var T=[],S=!0,P=C.length-1;0<=P;P--){var M=C[P]|0;S&&M==_||(T[P]=M,S=!1)}this.g=T}var l={};function c(C){return-128<=C&&128>C?a(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return N(u(-C));for(var _=[],T=1,S=0;C>=T;S++)_[S]=C/T|0,T*=4294967296;return new o(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return N(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(_,8)),S=f,P=0;P<C.length;P+=8){var M=Math.min(8,C.length-P),A=parseInt(C.substring(P,P+M),_);8>M?(M=u(Math.pow(_,M)),S=S.j(M).add(u(A))):(S=S.j(T),S=S.add(u(A)))}return S}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-N(this).m();for(var C=0,_=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j(this))return"0";if(w(this))return"-"+N(this).toString(C);for(var _=u(Math.pow(C,6)),T=this,S="";;){var P=I(T,_).g;T=v(T,P.j(_));var M=((0<T.g.length?T.g[0]:T.h)>>>0).toString(C);if(T=P,j(T))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function j(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=v(this,C),w(C)?-1:j(C)?0:1};function N(C){for(var _=C.g.length,T=[],S=0;S<_;S++)T[S]=~C.g[S];return new o(T,~C.h).add(m)}t.abs=function(){return w(this)?N(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],S=0,P=0;P<=_;P++){var M=S+(this.i(P)&65535)+(C.i(P)&65535),A=(M>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);S=A>>>16,M&=65535,A&=65535,T[P]=A<<16|M}return new o(T,T[T.length-1]&-2147483648?-1:0)};function v(C,_){return C.add(N(_))}t.j=function(C){if(j(this)||j(C))return f;if(w(this))return w(C)?N(this).j(N(C)):N(N(this).j(C));if(w(C))return N(this.j(N(C)));if(0>this.l(y)&&0>C.l(y))return u(this.m()*C.m());for(var _=this.g.length+C.g.length,T=[],S=0;S<2*_;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<C.g.length;P++){var M=this.i(S)>>>16,A=this.i(S)&65535,H=C.i(P)>>>16,te=C.i(P)&65535;T[2*S+2*P]+=A*te,x(T,2*S+2*P),T[2*S+2*P+1]+=M*te,x(T,2*S+2*P+1),T[2*S+2*P+1]+=A*H,x(T,2*S+2*P+1),T[2*S+2*P+2]+=M*H,x(T,2*S+2*P+2)}for(S=0;S<_;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=_;S<2*_;S++)T[S]=0;return new o(T,0)};function x(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function E(C,_){this.g=C,this.h=_}function I(C,_){if(j(_))throw Error("division by zero");if(j(C))return new E(f,f);if(w(C))return _=I(N(C),_),new E(N(_.g),N(_.h));if(w(_))return _=I(C,N(_)),new E(N(_.g),_.h);if(30<C.g.length){if(w(C)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=_;0>=S.l(C);)T=O(T),S=O(S);var P=D(T,1),M=D(S,1);for(S=D(S,2),T=D(T,2);!j(S);){var A=M.add(S);0>=A.l(C)&&(P=P.add(T),M=A),S=D(S,1),T=D(T,1)}return _=v(C,P.j(_)),new E(P,_)}for(P=f;0<=C.l(_);){for(T=Math.max(1,Math.floor(C.m()/_.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=u(T),A=M.j(_);w(A)||0<A.l(C);)T-=S,M=u(T),A=M.j(_);j(M)&&(M=m),P=P.add(M),C=v(C,A)}return new E(P,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)&C.i(S);return new o(T,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)|C.i(S);return new o(T,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)^C.i(S);return new o(T,this.h^C.h)};function O(C){for(var _=C.g.length+1,T=[],S=0;S<_;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new o(T,C.h)}function D(C,_){var T=_>>5;_%=32;for(var S=C.g.length-T,P=[],M=0;M<S;M++)P[M]=0<_?C.i(M+T)>>>_|C.i(M+T+1)<<32-_:C.i(M+T);return new o(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,a2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ai=o}).apply(typeof aN<"u"?aN:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o2,Hc,l2,zh,gy,c2,u2,d2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,b){return d==Array.prototype||d==Object.prototype||(d[g]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var b=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var F=d[k];if(!(F in b))break e;b=b[F]}d=d[d.length-1],k=b[d],g=g(k),g!=k&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}function a(d,g){d instanceof String&&(d+="");var b=0,k=!1,F={next:function(){if(!k&&b<d.length){var $=b++;return{value:g($,d[$]),done:!1}}return k=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(d){return d||function(){return a(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,b){return d.call.apply(d.bind,arguments)}function f(d,g,b){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,k),d.apply(g,F)}}return function(){return d.apply(g,arguments)}}function m(d,g,b){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var k=b.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function j(d,g){function b(){}b.prototype=g.prototype,d.aa=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(k,F,$){for(var J=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)J[Xe-2]=arguments[Xe];return g.prototype[F].apply(k,J)}}function w(d){const g=d.length;if(0<g){const b=Array(g);for(let k=0;k<g;k++)b[k]=d[k];return b}return[]}function N(d,g){for(let b=1;b<arguments.length;b++){const k=arguments[b];if(c(k)){const F=d.length||0,$=k.length||0;d.length=F+$;for(let J=0;J<$;J++)d[F+J]=k[J]}else d.push(k)}}class v{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){return/^[\s\xa0]*$/.test(d)}function E(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(d,g,b){for(const k in d)g.call(b,d[k],k,d)}function C(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function _(d){const g={};for(const b in d)g[b]=d[b];return g}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(d,g){let b,k;for(let F=1;F<arguments.length;F++){k=arguments[F];for(b in k)d[b]=k[b];for(let $=0;$<T.length;$++)b=T[$],Object.prototype.hasOwnProperty.call(k,b)&&(d[b]=k[b])}}function P(d){var g=1;d=d.split(":");const b=[];for(;0<g&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function M(d){l.setTimeout(()=>{throw d},0)}function A(){var d=U;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class H{constructor(){this.h=this.g=null}add(g,b){const k=te.get();k.set(g,b),this.h?this.h.next=k:this.g=k,this.h=k}}var te=new v(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let le,V=!1,U=new H,G=()=>{const d=l.Promise.resolve(void 0);le=()=>{d.then(X)}};var X=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(b){M(b)}var g=te;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}V=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};l.addEventListener("test",b,g),l.removeEventListener("test",b,g)}catch{}return d}();function ke(d,g){if(_e.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(O){e:{try{I(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ze[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ke.aa.h.call(this)}}j(ke,_e);var ze={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Me=0;function ue(d,g,b,k,F){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!k,this.ha=F,this.key=++Me,this.da=this.fa=!1}function Se(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,g,b,k,F){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var J=Je(d,g,k,F);return-1<J?(g=d[J],b||(g.fa=!1)):(g=new ue(g,this.src,$,!!k,F),g.fa=b,d.push(g)),g};function xe(d,g){var b=g.type;if(b in d.g){var k=d.g[b],F=Array.prototype.indexOf.call(k,g,void 0),$;($=0<=F)&&Array.prototype.splice.call(k,F,1),$&&(Se(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Je(d,g,b,k){for(var F=0;F<d.length;++F){var $=d[F];if(!$.da&&$.listener==g&&$.capture==!!b&&$.ha==k)return F}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),qn={};function Pr(d,g,b,k,F){if(Array.isArray(g)){for(var $=0;$<g.length;$++)Pr(d,g[$],b,k,F);return null}return b=Yt(b),d&&d[re]?d.K(g,b,u(k)?!!k.capture:!!k,F):os(d,g,b,!1,k,F)}function os(d,g,b,k,F,$){if(!g)throw Error("Invalid event type");var J=u(F)?!!F.capture:!!F,Xe=Q(d);if(Xe||(d[Dt]=Xe=new de(d)),b=Xe.add(g,b,k,J,$),b.proxy)return b;if(k=oc(),b.proxy=k,k.src=d,k.listener=b,d.addEventListener)De||(F=J),F===void 0&&(F=!1),d.addEventListener(g.toString(),k,F);else if(d.attachEvent)d.attachEvent(Nd(g.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return b}function oc(){function d(b){return g.call(d.src,d.listener,b)}const g=R;return d}function ls(d,g,b,k,F){if(Array.isArray(g))for(var $=0;$<g.length;$++)ls(d,g[$],b,k,F);else k=u(k)?!!k.capture:!!k,b=Yt(b),d&&d[re]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],b=Je($,b,k,F),-1<b&&(Se($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Q(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Je(g,b,k,F)),(b=-1<d?g[d]:null)&&lc(b))}function lc(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[re])xe(g.i,d);else{var b=d.type,k=d.proxy;g.removeEventListener?g.removeEventListener(b,k,d.capture):g.detachEvent?g.detachEvent(Nd(b),k):g.addListener&&g.removeListener&&g.removeListener(k),(b=Q(g))?(xe(b,d),b.h==0&&(b.src=null,g[Dt]=null)):Se(d)}}}function Nd(d){return d in qn?qn[d]:qn[d]="on"+d}function R(d,g){if(d.da)d=!0;else{g=new ke(g,this);var b=d.listener,k=d.ha||d.src;d.fa&&lc(d),d=b.call(k,g)}return d}function Q(d){return d=d[Dt],d instanceof de?d:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(d){return typeof d=="function"?d:(d[ce]||(d[ce]=function(g){return d.handleEvent(g)}),d[ce])}function Ee(){oe.call(this),this.i=new de(this),this.M=this,this.F=null}j(Ee,oe),Ee.prototype[re]=!0,Ee.prototype.removeEventListener=function(d,g,b,k){ls(this,d,g,b,k)};function wt(d,g){var b,k=d.F;if(k)for(b=[];k;k=k.F)b.push(k);if(d=d.M,k=g.type||g,typeof g=="string")g=new _e(g,d);else if(g instanceof _e)g.target=g.target||d;else{var F=g;g=new _e(k,d),S(g,F)}if(F=!0,b)for(var $=b.length-1;0<=$;$--){var J=g.g=b[$];F=cs(J,k,!0,g)&&F}if(J=g.g=d,F=cs(J,k,!0,g)&&F,F=cs(J,k,!1,g)&&F,b)for($=0;$<b.length;$++)J=g.g=b[$],F=cs(J,k,!1,g)&&F}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var b=d.g[g],k=0;k<b.length;k++)Se(b[k]);delete d.g[g],d.h--}}this.F=null},Ee.prototype.K=function(d,g,b,k){return this.i.add(String(d),g,!1,b,k)},Ee.prototype.L=function(d,g,b,k){return this.i.add(String(d),g,!0,b,k)};function cs(d,g,b,k){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,$=0;$<g.length;++$){var J=g[$];if(J&&!J.da&&J.capture==b){var Xe=J.listener,zt=J.ha||J.src;J.fa&&xe(d.i,J),F=Xe.call(zt,k)!==!1&&F}}return F&&!k.defaultPrevented}function cc(d,g,b){if(typeof d=="function")b&&(d=m(d,b));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function uc(d){d.g=cc(()=>{d.g=null,d.i&&(d.i=!1,uc(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Ed extends oe{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:uc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(d){oe.call(this),this.h=d,this.g={}}j(yn,oe);var Mw=[];function Ow(d){D(d.g,function(g,b){this.g.hasOwnProperty(b)&&lc(g)},d),d.g={}}yn.prototype.N=function(){yn.aa.N.call(this),Ow(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=l.JSON.stringify,y4=l.JSON.parse,v4=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function wp(){}wp.prototype.h=null;function Lw(d){return d.h||(d.h=d.i())}function Vw(){}var dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _p(){_e.call(this,"d")}j(_p,_e);function bp(){_e.call(this,"c")}j(bp,_e);var ra={},Fw=null;function jd(){return Fw=Fw||new Ee}ra.La="serverreachability";function Uw(d){_e.call(this,ra.La,d)}j(Uw,_e);function hc(d){const g=jd();wt(g,new Uw(g))}ra.STAT_EVENT="statevent";function $w(d,g){_e.call(this,ra.STAT_EVENT,d),this.stat=g}j($w,_e);function cn(d){const g=jd();wt(g,new $w(g,d))}ra.Ma="timingevent";function zw(d,g){_e.call(this,ra.Ma,d),this.size=g}j(zw,_e);function fc(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function mc(){this.g=!0}mc.prototype.xa=function(){this.g=!1};function w4(d,g,b,k,F,$){d.info(function(){if(d.g)if($)for(var J="",Xe=$.split("&"),zt=0;zt<Xe.length;zt++){var We=Xe[zt].split("=");if(1<We.length){var Xt=We[0];We=We[1];var Jt=Xt.split("_");J=2<=Jt.length&&Jt[1]=="type"?J+(Xt+"="+We+"&"):J+(Xt+"=redacted&")}}else J=null;else J=$;return"XMLHTTP REQ ("+k+") [attempt "+F+"]: "+g+`
`+b+`
`+J})}function _4(d,g,b,k,F,$,J){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+F+"]: "+g+`
`+b+`
`+$+" "+J})}function po(d,g,b,k){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+N4(d,b)+(k?" "+k:"")})}function b4(d,g){d.info(function(){return"TIMEOUT: "+g})}mc.prototype.info=function(){};function N4(d,g){if(!d.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var k=b[d];if(!(2>k.length)){var F=k[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return vp(b)}catch{return g}}var Td={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Np;function Sd(){}j(Sd,wp),Sd.prototype.g=function(){return new XMLHttpRequest},Sd.prototype.i=function(){return{}},Np=new Sd;function Qs(d,g,b,k){this.j=d,this.i=g,this.l=b,this.R=k||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hw}function Hw(){this.i=null,this.g="",this.h=!1}var Ww={},Ep={};function jp(d,g,b){d.L=1,d.v=kd(us(g)),d.m=b,d.P=!0,qw(d,null)}function qw(d,g){d.F=Date.now(),Cd(d),d.A=us(d.v);var b=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),a_(b.i,"t",k),d.C=0,b=d.j.J,d.h=new Hw,d.g=E_(d.j,b?g:null,!d.m),0<d.O&&(d.M=new Ed(m(d.Y,d,d.g),d.O)),g=d.U,b=d.g,k=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Mw[0]=F.toString()),F=Mw);for(var $=0;$<F.length;$++){var J=Pr(b,F[$],k||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),hc(),w4(d.i,d.u,d.A,d.l,d.R,d.m)}Qs.prototype.ca=function(d){d=d.target;const g=this.M;g&&ds(d)==3?g.j():this.Y(d)},Qs.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=ds(this.g);var g=this.g.Ba();const yo=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||f_(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=yo?hc(3):hc(2)),Tp(this);var b=this.g.Z();this.X=b;t:if(Kw(this)){var k=f_(this.g);d="";var F=k.length,$=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sa(this),pc(this);var J="";break t}this.h.i=new l.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,d+=this.h.i.decode(k[g],{stream:!($&&g==F-1)});k.length=0,this.h.g+=d,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=b==200,_4(this.i,this.u,this.A,this.l,this.R,Jt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,zt=this.g;if((Xe=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Xe)){var We=Xe;break t}}We=null}if(b=We)po(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sp(this,b);else{this.o=!1,this.s=3,cn(12),sa(this),pc(this);break e}}if(this.P){b=!0;let cr;for(;!this.J&&this.C<J.length;)if(cr=E4(this,J),cr==Ep){Jt==4&&(this.s=4,cn(14),b=!1),po(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Ww){this.s=4,cn(15),po(this.i,this.l,J,"[Invalid Chunk]"),b=!1;break}else po(this.i,this.l,cr,null),Sp(this,cr);if(Kw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||J.length!=0||this.h.h||(this.s=1,cn(16),b=!1),this.o=this.o&&b,!b)po(this.i,this.l,J,"[Invalid Chunked Response]"),sa(this),pc(this);else if(0<J.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Pp(Xt),Xt.M=!0,cn(11))}}else po(this.i,this.l,J,null),Sp(this,J);Jt==4&&sa(this),this.o&&!this.J&&(Jt==4?w_(this.j,this):(this.o=!1,Cd(this)))}else $4(this.g),b==400&&0<J.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),sa(this),pc(this)}}}catch{}finally{}};function Kw(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function E4(d,g){var b=d.C,k=g.indexOf(`
`,b);return k==-1?Ep:(b=Number(g.substring(b,k)),isNaN(b)?Ww:(k+=1,k+b>g.length?Ep:(g=g.slice(k,k+b),d.C=k+b,g)))}Qs.prototype.cancel=function(){this.J=!0,sa(this)};function Cd(d){d.S=Date.now()+d.I,Gw(d,d.I)}function Gw(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=fc(m(d.ba,d),g)}function Tp(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Qs.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(b4(this.i,this.A),this.L!=2&&(hc(),cn(17)),sa(this),this.s=2,pc(this)):Gw(this,this.S-d)};function pc(d){d.j.G==0||d.J||w_(d.j,d)}function sa(d){Tp(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Ow(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Sp(d,g){try{var b=d.j;if(b.G!=0&&(b.g==d||Cp(b.h,d))){if(!d.K&&Cp(b.h,d)&&b.G==3){try{var k=b.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var F=k;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Ld(b),Md(b);else break e;Rp(b),cn(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=fc(m(b.Za,b),6e3));if(1>=Xw(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else aa(b,11)}else if((d.K||b.g==d)&&Ld(b),!x(g))for(F=b.Da.g.parse(g),g=0;g<F.length;g++){let We=F[g];if(b.T=We[0],We=We[1],b.G==2)if(We[0]=="c"){b.K=We[1],b.ia=We[2];const Xt=We[3];Xt!=null&&(b.la=Xt,b.j.info("VER="+b.la));const Jt=We[4];Jt!=null&&(b.Aa=Jt,b.j.info("SVER="+b.Aa));const yo=We[5];yo!=null&&typeof yo=="number"&&0<yo&&(k=1.5*yo,b.L=k,b.j.info("backChannelRequestTimeoutMs_="+k)),k=b;const cr=d.g;if(cr){const Fd=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fd){var $=k.h;$.g||Fd.indexOf("spdy")==-1&&Fd.indexOf("quic")==-1&&Fd.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ip($,$.h),$.h=null))}if(k.D){const Dp=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dp&&(k.ya=Dp,nt(k.I,k.D,Dp))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),k=b;var J=d;if(k.qa=N_(k,k.J?k.ia:null,k.W),J.K){Jw(k.h,J);var Xe=J,zt=k.L;zt&&(Xe.I=zt),Xe.B&&(Tp(Xe),Cd(Xe)),k.g=J}else y_(k);0<b.i.length&&Od(b)}else We[0]!="stop"&&We[0]!="close"||aa(b,7);else b.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?aa(b,7):kp(b):We[0]!="noop"&&b.l&&b.l.ta(We),b.v=0)}}hc(4)}catch{}}var j4=class{constructor(d,g){this.g=d,this.map=g}};function Qw(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xw(d){return d.h?1:d.g?d.g.size:0}function Cp(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Ip(d,g){d.g?d.g.add(g):d.h=g}function Jw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Qw.prototype.cancel=function(){if(this.i=Zw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zw(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.D);return g}return w(d.i)}function T4(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],b=d.length,k=0;k<b;k++)g.push(d[k]);return g}g=[],b=0;for(k in d)g[b++]=d[k];return g}function S4(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var b=0;b<d;b++)g.push(b);return g}g=[],b=0;for(const k in d)g[b++]=k;return g}}}function e_(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var b=S4(d),k=T4(d),F=k.length,$=0;$<F;$++)g.call(void 0,k[$],b&&b[$],d)}var t_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C4(d,g){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var k=d[b].indexOf("="),F=null;if(0<=k){var $=d[b].substring(0,k);F=d[b].substring(k+1)}else $=d[b];g($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ia(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ia){this.h=d.h,Id(this,d.j),this.o=d.o,this.g=d.g,Ad(this,d.s),this.l=d.l;var g=d.i,b=new yc;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),n_(this,b),this.m=d.m}else d&&(g=String(d).match(t_))?(this.h=!1,Id(this,g[1]||"",!0),this.o=gc(g[2]||""),this.g=gc(g[3]||"",!0),Ad(this,g[4]),this.l=gc(g[5]||"",!0),n_(this,g[6]||"",!0),this.m=gc(g[7]||"")):(this.h=!1,this.i=new yc(null,this.h))}ia.prototype.toString=function(){var d=[],g=this.j;g&&d.push(xc(g,r_,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(xc(g,r_,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(xc(b,b.charAt(0)=="/"?k4:A4,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",xc(b,P4)),d.join("")};function us(d){return new ia(d)}function Id(d,g,b){d.j=b?gc(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Ad(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function n_(d,g,b){g instanceof yc?(d.i=g,D4(d.i,d.h)):(b||(g=xc(g,R4)),d.i=new yc(g,d.h))}function nt(d,g,b){d.i.set(g,b)}function kd(d){return nt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function gc(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function xc(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,I4),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function I4(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var r_=/[#\/\?@]/g,A4=/[#\?:]/g,k4=/[#\?]/g,R4=/[#\?@]/g,P4=/#/g;function yc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Ys(d){d.g||(d.g=new Map,d.h=0,d.i&&C4(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=yc.prototype,t.add=function(d,g){Ys(this),this.i=null,d=go(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function s_(d,g){Ys(d),g=go(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function i_(d,g){return Ys(d),g=go(d,g),d.g.has(g)}t.forEach=function(d,g){Ys(this),this.g.forEach(function(b,k){b.forEach(function(F){d.call(g,F,k,this)},this)},this)},t.na=function(){Ys(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let k=0;k<g.length;k++){const F=d[k];for(let $=0;$<F.length;$++)b.push(g[k])}return b},t.V=function(d){Ys(this);let g=[];if(typeof d=="string")i_(this,d)&&(g=g.concat(this.g.get(go(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)g=g.concat(d[b])}return g},t.set=function(d,g){return Ys(this),this.i=null,d=go(this,d),i_(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function a_(d,g,b){s_(d,g),0<b.length&&(d.i=null,d.g.set(go(d,g),w(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var k=g[b];const $=encodeURIComponent(String(k)),J=this.V(k);for(k=0;k<J.length;k++){var F=$;J[k]!==""&&(F+="="+encodeURIComponent(String(J[k]))),d.push(F)}}return this.i=d.join("&")};function go(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function D4(d,g){g&&!d.j&&(Ys(d),d.i=null,d.g.forEach(function(b,k){var F=k.toLowerCase();k!=F&&(s_(this,k),a_(this,F,b))},d)),d.j=g}function M4(d,g){const b=new mc;if(l.Image){const k=new Image;k.onload=y(Xs,b,"TestLoadImage: loaded",!0,g,k),k.onerror=y(Xs,b,"TestLoadImage: error",!1,g,k),k.onabort=y(Xs,b,"TestLoadImage: abort",!1,g,k),k.ontimeout=y(Xs,b,"TestLoadImage: timeout",!1,g,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else g(!1)}function O4(d,g){const b=new mc,k=new AbortController,F=setTimeout(()=>{k.abort(),Xs(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:k.signal}).then($=>{clearTimeout(F),$.ok?Xs(b,"TestPingServer: ok",!0,g):Xs(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Xs(b,"TestPingServer: error",!1,g)})}function Xs(d,g,b,k,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),k(b)}catch{}}function L4(){this.g=new v4}function V4(d,g,b){const k=b||"";try{e_(d,function(F,$){let J=F;u(F)&&(J=vp(F)),g.push(k+$+"="+encodeURIComponent(J))})}catch(F){throw g.push(k+"type="+encodeURIComponent("_badmap")),F}}function Rd(d){this.l=d.Ub||null,this.j=d.eb||!1}j(Rd,wp),Rd.prototype.g=function(){return new Pd(this.l,this.j)},Rd.prototype.i=function(d){return function(){return d}}({});function Pd(d,g){Ee.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Pd,Ee),t=Pd.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,wc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,wc(this)),this.g&&(this.readyState=3,wc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;o_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function o_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?vc(this):wc(this),this.readyState==3&&o_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,vc(this))},t.Qa=function(d){this.g&&(this.response=d,vc(this))},t.ga=function(){this.g&&vc(this)};function vc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,wc(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function wc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function l_(d){let g="";return D(d,function(b,k){g+=k,g+=":",g+=b,g+=`\r
`}),g}function Ap(d,g,b){e:{for(k in b){var k=!1;break e}k=!0}k||(b=l_(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):nt(d,g,b))}function gt(d){Ee.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(gt,Ee);var F4=/^https?$/i,U4=["POST","PUT"];t=gt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,b,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Np.g(),this.v=this.o?Lw(this.o):Lw(Np),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){c_(this,$);return}if(d=b||"",b=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var F in k)b.set(F,k[F]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const $ of k.keys())b.set($,k.get($));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),F=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(U4,g,void 0))||k||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,J]of b)this.g.setRequestHeader($,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{h_(this),this.u=!0,this.g.send(d),this.u=!1}catch($){c_(this,$)}};function c_(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,u_(d),Dd(d)}function u_(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wt(this,"complete"),wt(this,"abort"),Dd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dd(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?d_(this):this.bb())},t.bb=function(){d_(this)};function d_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ds(d)!=4||d.Z()!=2)){if(d.u&&ds(d)==4)cc(d.Ea,0,d);else if(wt(d,"readystatechange"),ds(d)==4){d.h=!1;try{const J=d.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var k;if(k=J===0){var F=String(d.D).match(t_)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),k=!F4.test(F?F.toLowerCase():"")}b=k}if(b)wt(d,"complete"),wt(d,"success");else{d.m=6;try{var $=2<ds(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",u_(d)}}finally{Dd(d)}}}}function Dd(d,g){if(d.g){h_(d);const b=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||wt(d,"ready");try{b.onreadystatechange=k}catch{}}}function h_(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ds(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),y4(g)}};function f_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function $4(d){const g={};d=(d.g&&2<=ds(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(x(d[k]))continue;var b=P(d[k]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=g[F]||[];g[F]=$,$.push(b)}C(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _c(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function m_(d){this.Aa=0,this.i=[],this.j=new mc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_c("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_c("baseRetryDelayMs",5e3,d),this.cb=_c("retryDelaySeedMs",1e4,d),this.Wa=_c("forwardChannelMaxRetries",2,d),this.wa=_c("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qw(d&&d.concurrentRequestLimit),this.Da=new L4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=m_.prototype,t.la=8,t.G=1,t.connect=function(d,g,b,k){cn(0),this.W=d,this.H=g||{},b&&k!==void 0&&(this.H.OSID=b,this.H.OAID=k),this.F=this.X,this.I=N_(this,null,this.W),Od(this)};function kp(d){if(p_(d),d.G==3){var g=d.U++,b=us(d.I);if(nt(b,"SID",d.K),nt(b,"RID",g),nt(b,"TYPE","terminate"),bc(d,b),g=new Qs(d,d.j,g),g.L=2,g.v=kd(us(b)),b=!1,l.navigator&&l.navigator.sendBeacon)try{b=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&l.Image&&(new Image().src=g.v,b=!0),b||(g.g=E_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Cd(g)}b_(d)}function Md(d){d.g&&(Pp(d),d.g.cancel(),d.g=null)}function p_(d){Md(d),d.u&&(l.clearTimeout(d.u),d.u=null),Ld(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Od(d){if(!Yw(d.h)&&!d.s){d.s=!0;var g=d.Ga;le||G(),V||(le(),V=!0),U.add(g,d),d.B=0}}function z4(d,g){return Xw(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=fc(m(d.Ga,d,g),__(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new Qs(this,this.j,d);let $=this.o;if(this.S&&($?($=_($),S($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var k=this.i[b];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=x_(this,F,g),b=us(this.I),nt(b,"RID",d),nt(b,"CVER",22),this.D&&nt(b,"X-HTTP-Session-Id",this.D),bc(this,b),$&&(this.O?g="headers="+encodeURIComponent(String(l_($)))+"&"+g:this.m&&Ap(b,this.m,$)),Ip(this.h,F),this.Ua&&nt(b,"TYPE","init"),this.P?(nt(b,"$req",g),nt(b,"SID","null"),F.T=!0,jp(F,b,null)):jp(F,b,g),this.G=2}}else this.G==3&&(d?g_(this,d):this.i.length==0||Yw(this.h)||g_(this))};function g_(d,g){var b;g?b=g.l:b=d.U++;const k=us(d.I);nt(k,"SID",d.K),nt(k,"RID",b),nt(k,"AID",d.T),bc(d,k),d.m&&d.o&&Ap(k,d.m,d.o),b=new Qs(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),g&&(d.i=g.D.concat(d.i)),g=x_(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ip(d.h,b),jp(b,k,g)}function bc(d,g){d.H&&D(d.H,function(b,k){nt(g,k,b)}),d.l&&e_({},function(b,k){nt(g,k,b)})}function x_(d,g,b){b=Math.min(d.i.length,b);var k=d.l?m(d.l.Na,d.l,d):null;e:{var F=d.i;let $=-1;for(;;){const J=["count="+b];$==-1?0<b?($=F[0].g,J.push("ofs="+$)):$=0:J.push("ofs="+$);let Xe=!0;for(let zt=0;zt<b;zt++){let We=F[zt].g;const Xt=F[zt].map;if(We-=$,0>We)$=Math.max(0,F[zt].g-100),Xe=!1;else try{V4(Xt,J,"req"+We+"_")}catch{k&&k(Xt)}}if(Xe){k=J.join("&");break e}}}return d=d.i.splice(0,b),g.D=d,k}function y_(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;le||G(),V||(le(),V=!0),U.add(g,d),d.v=0}}function Rp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=fc(m(d.Fa,d),__(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,v_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=fc(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),Md(this),v_(this))};function Pp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function v_(d){d.g=new Qs(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=us(d.qa);nt(g,"RID","rpc"),nt(g,"SID",d.K),nt(g,"AID",d.T),nt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&nt(g,"TO",d.ja),nt(g,"TYPE","xmlhttp"),bc(d,g),d.m&&d.o&&Ap(g,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=kd(us(g)),b.m=null,b.P=!0,qw(b,d)}t.Za=function(){this.C!=null&&(this.C=null,Md(this),Rp(this),cn(19))};function Ld(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function w_(d,g){var b=null;if(d.g==g){Ld(d),Pp(d),d.g=null;var k=2}else if(Cp(d.h,g))b=g.D,Jw(d.h,g),k=1;else return;if(d.G!=0){if(g.o)if(k==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var F=d.B;k=jd(),wt(k,new zw(k,b)),Od(d)}else y_(d);else if(F=g.s,F==3||F==0&&0<g.X||!(k==1&&z4(d,g)||k==2&&Rp(d)))switch(b&&0<b.length&&(g=d.h,g.i=g.i.concat(b)),F){case 1:aa(d,5);break;case 4:aa(d,10);break;case 3:aa(d,6);break;default:aa(d,2)}}}function __(d,g){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*g}function aa(d,g){if(d.j.info("Error code "+g),g==2){var b=m(d.fb,d),k=d.Xa;const F=!k;k=new ia(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Id(k,"https"),kd(k),F?M4(k.toString(),b):O4(k.toString(),b)}else cn(2);d.G=0,d.l&&d.l.sa(g),b_(d),p_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function b_(d){if(d.G=0,d.ka=[],d.l){const g=Zw(d.h);(g.length!=0||d.i.length!=0)&&(N(d.ka,g),N(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function N_(d,g,b){var k=b instanceof ia?us(b):new ia(b);if(k.g!="")g&&(k.g=g+"."+k.g),Ad(k,k.s);else{var F=l.location;k=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var $=new ia(null);k&&Id($,k),g&&($.g=g),F&&Ad($,F),b&&($.l=b),k=$}return b=d.D,g=d.ya,b&&g&&nt(k,b,g),nt(k,"VER",d.la),bc(d,k),k}function E_(d,g,b){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new gt(new Rd({eb:b})):new gt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function j_(){}t=j_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vd(){}Vd.prototype.g=function(d,g){return new In(d,g)};function In(d,g){Ee.call(this),this.g=new m_(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!x(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new xo(this)}j(In,Ee),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){kp(this.g)},In.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=vp(d),d=b);g.i.push(new j4(g.Ya++,d)),g.G==3&&Od(g)},In.prototype.N=function(){this.g.l=null,delete this.j,kp(this.g),delete this.g,In.aa.N.call(this)};function T_(d){_p.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}j(T_,_p);function S_(){bp.call(this),this.status=1}j(S_,bp);function xo(d){this.g=d}j(xo,j_),xo.prototype.ua=function(){wt(this.g,"a")},xo.prototype.ta=function(d){wt(this.g,new T_(d))},xo.prototype.sa=function(d){wt(this.g,new S_)},xo.prototype.ra=function(){wt(this.g,"b")},Vd.prototype.createWebChannel=Vd.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,d2=function(){return new Vd},u2=function(){return jd()},c2=ra,gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Td.NO_ERROR=0,Td.TIMEOUT=8,Td.HTTP_ERROR=6,zh=Td,Bw.COMPLETE="complete",l2=Bw,Vw.EventType=dc,dc.OPEN="a",dc.CLOSE="b",dc.ERROR="c",dc.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Hc=Vw,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,o2=gt}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const oN="@firebase/firestore",lN="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new p0("@firebase/firestore");function jo(){return qa.logLevel}function se(t,...e){if(qa.logLevel<=Le.DEBUG){const n=e.map(E0);qa.debug(`Firestore (${Jl}): ${t}`,...n)}}function Bs(t,...e){if(qa.logLevel<=Le.ERROR){const n=e.map(E0);qa.error(`Firestore (${Jl}): ${t}`,...n)}}function Ka(t,...e){if(qa.logLevel<=Le.WARN){const n=e.map(E0);qa.warn(`Firestore (${Jl}): ${t}`,...n)}}function E0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,h2(t,r,n)}function h2(t,e,n){let r=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bs(r),new Error(r)}function Ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||h2(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class $9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z9{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Is,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new f2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class B9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new B9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=q9(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function xy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Ig(s)===Ig(a)?Ve(s,a):Ig(s)?1:-1}return Ve(t.length,e.length)}const K9=55296,G9=57343;function Ig(t){const e=t.charCodeAt(0);return e>=K9&&e<=G9}function Pl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="__name__";class Lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Lr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Lr.isNumericId(e),s=Lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Lr.extractNumericId(e).compare(Lr.extractNumericId(n)):xy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class Ze extends Lr{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const Q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Lr{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return Q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uN}static keyField(){return new Ft([uN])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ee(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ee(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new ee(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ze.fromString(e))}static fromName(e){return new he(Ze.fromString(e).popFirst(5))}static empty(){return new he(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e,n){if(!n)throw new ee(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g2(t,e,n,r){if(e===!0&&r===!0)throw new ee(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dN(t){if(!he.isDocumentKey(t))throw new ee(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hN(t){if(he.isDocumentKey(t))throw new ee(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function x2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(t);throw new ee(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function hd(t,e){if(!x2(t))throw new ee(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ee(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=-62135596800,mN=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mN);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fN)throw new ee(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mN}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Tt("string",et._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new et(0,0))}static max(){return new ve(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=-1;function Y9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new zi(s,he.empty(),e)}function X9(t){return new zi(t.readTime,t.key,Vu)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(ve.min(),he.empty(),Vu)}static max(){return new zi(ve.max(),he.empty(),Vu)}}function J9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Z9)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function t$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ec(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=-1;function Fm(t){return t==null}function Mf(t){return t===0&&1/t==-1/0}function n$(t){return typeof t=="number"&&Number.isInteger(t)&&!Mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="";function r$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pN(e)),e=s$(t.get(n),e);return pN(e)}function s$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case y2:n+="";break;default:n+=a}}return n}function pN(t){return t+y2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function v2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=a??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new qt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xN(this.data.getIterator())}getIteratorFrom(e){return new xN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class xN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Pt(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new w2("Invalid base64 string: "+a):a}}(e);return new $t(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const i$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=i$.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(t.seconds),nanos:_t(t.nanos)}}function _t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="server_timestamp",b2="__type__",N2="__previous_value__",E2="__local_write_time__";function T0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[b2])==null?void 0:r.stringValue)===_2}function Um(t){const e=t.mapValue.fields[N2];return T0(e)?Um(e):e}function Fu(t){const e=Bi(t.mapValue.fields[E2].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n,r,s,a,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Of="(default)";class Dl{constructor(e,n){this.projectId=e,this.database=n||Of}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database===Of}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="__type__",T2="__max__",hh={mapValue:{fields:{__type__:{stringValue:T2}}}},S2="__vector__",Lf="value";function Wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?T0(t)?4:l$(t)?9007199254740991:o$(t)?10:11:ge(28295,{value:t})}function ts(t,e){if(t===e)return!0;const n=Wi(t);if(n!==Wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Bi(s.timestampValue),l=Bi(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Hi(s.bytesValue).isEqual(Hi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return _t(s.geoPointValue.latitude)===_t(a.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return _t(s.integerValue)===_t(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=_t(s.doubleValue),l=_t(a.doubleValue);return o===l?Mf(o)===Mf(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pl(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(gN(o)!==gN(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ts(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Uu(t,e){return(t.values||[]).find(n=>ts(n,e))!==void 0}function Ml(t,e){if(t===e)return 0;const n=Wi(t),r=Wi(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=_t(a.integerValue||a.doubleValue),c=_t(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return yN(t.timestampValue,e.timestampValue);case 4:return yN(Fu(t),Fu(e));case 5:return xy(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Hi(a),c=Hi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ve(l[u],c[u]);if(h!==0)return h}return Ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Ve(_t(a.latitude),_t(o.latitude));return l!==0?l:Ve(_t(a.longitude),_t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vN(t.arrayValue,e.arrayValue);case 10:return function(a,o){var m,y,j,w;const l=a.fields||{},c=o.fields||{},u=(m=l[Lf])==null?void 0:m.arrayValue,h=(y=c[Lf])==null?void 0:y.arrayValue,f=Ve(((j=u==null?void 0:u.values)==null?void 0:j.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return f!==0?f:vN(u,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===hh.mapValue&&o===hh.mapValue)return 0;if(a===hh.mapValue)return 1;if(o===hh.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=xy(c[f],h[f]);if(m!==0)return m;const y=Ml(l[c[f]],u[h[f]]);if(y!==0)return y}return Ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function yN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=Bi(t),r=Bi(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function vN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ml(n[s],r[s]);if(a)return a}return Ve(n.length,r.length)}function Ol(t){return yy(t)}function yy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=yy(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${yy(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function Bh(t){switch(Wi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Um(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return Hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Bh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Xi(r.fields,(a,o)=>{s+=a.length+Bh(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function wN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vy(t){return!!t&&"integerValue"in t}function S0(t){return!!t&&"arrayValue"in t}function _N(t){return!!t&&"nullValue"in t}function bN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hh(t){return!!t&&"mapValue"in t}function o$(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[j2])==null?void 0:r.stringValue)===S2}function cu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return{...t}}function l$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===T2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=Ft.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=cu(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xi(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new En(cu(this.value))}}function C2(t){const e=[];return Xi(t.fields,(n,r)=>{const s=new Ft([n]);if(Hh(r)){const a=C2(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new an(e,0,ve.min(),ve.min(),ve.min(),En.empty(),0)}static newFoundDocument(e,n,r,s){return new an(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new an(e,2,n,ve.min(),ve.min(),En.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,ve.min(),ve.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.position=e,this.inclusive=n}}function NN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Ml(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function EN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n="asc"){this.field=e,this.dir=n}}function c$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{}class jt extends I2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d$(e,n,r):n==="array-contains"?new m$(e,r):n==="in"?new p$(e,r):n==="not-in"?new g$(e,r):n==="array-contains-any"?new x$(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h$(e,r):new f$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&Wi(this.value)===Wi(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends I2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kr(e,n)}matches(e){return A2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A2(t){return t.op==="and"}function k2(t){return u$(t)&&A2(t)}function u$(t){for(const e of t.filters)if(e instanceof kr)return!1;return!0}function wy(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(k2(t))return t.filters.map(e=>wy(e)).join(",");{const e=t.filters.map(n=>wy(n)).join(",");return`${t.op}(${e})`}}function R2(t,e){return t instanceof jt?function(r,s){return s instanceof jt&&r.op===s.op&&r.field.isEqual(s.field)&&ts(r.value,s.value)}(t,e):t instanceof kr?function(r,s){return s instanceof kr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&R2(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function P2(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`}(t):t instanceof kr?function(n){return n.op.toString()+" {"+n.getFilters().map(P2).join(" ,")+"}"}(t):"Filter"}class d$ extends jt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class h$ extends jt{constructor(e,n){super(e,"in",n),this.keys=D2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f$ extends jt{constructor(e,n){super(e,"not-in",n),this.keys=D2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function D2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class m$ extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S0(n)&&Uu(n.arrayValue,this.value)}}class p$ extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class g$ extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uu(this.value.arrayValue,n)}}class x$ extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function jN(t,e=null,n=[],r=[],s=null,a=null,o=null){return new y$(t,e,n,r,s,a,o)}function C0(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ol(r)).join(",")),e.Te=n}return e.Te}function I0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!R2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EN(t.startAt,e.startAt)&&EN(t.endAt,e.endAt)}function _y(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function v$(t,e,n,r,s,a,o,l){return new tc(t,e,n,r,s,a,o,l)}function A0(t){return new tc(t)}function TN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M2(t){return t.collectionGroup!==null}function uu(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Pt(Ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new $u(a,r))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new $u(Ft.keyField(),r))}return e.Ie}function Xr(t){const e=we(t);return e.Ee||(e.Ee=w$(e,uu(t))),e.Ee}function w$(t,e){if(t.limitType==="F")return jN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new $u(s.field,a)});const n=t.endAt?new Vf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vf(t.startAt.position,t.startAt.inclusive):null;return jN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function by(t,e){const n=t.filters.concat([e]);return new tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ny(t,e,n){return new tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $m(t,e){return I0(Xr(t),Xr(e))&&t.limitType===e.limitType}function O2(t){return`${C0(Xr(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>P2(s)).join(", ")}]`),Fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ol(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ol(s)).join(",")),`Target(${r})`}(Xr(t))}; limitType=${t.limitType})`}function zm(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):he.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of uu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=NN(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,uu(r),s)||r.endAt&&!function(o,l,c){const u=NN(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,uu(r),s))}(t,e)}function _$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L2(t){return(e,n)=>{let r=!1;for(const s of uu(t)){const a=b$(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function b$(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Ml(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return v2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=new pt(he.comparator);function Hs(){return N$}const V2=new pt(he.comparator);function Wc(...t){let e=V2;for(const n of t)e=e.insert(n.key,n);return e}function F2(t){let e=V2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wa(){return du()}function U2(){return du()}function du(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const E$=new pt(he.comparator),j$=new Pt(he.comparator);function Fe(...t){let e=j$;for(const n of t)e=e.add(n);return e}const T$=new Pt(Ve);function S$(){return T$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function $2(t){return{integerValue:""+t}}function C$(t,e){return n$(e)?$2(e):k0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function I$(t,e,n){return t instanceof Ff?function(s,a){const o={fields:{[b2]:{stringValue:_2},[E2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&T0(a)&&(a=Um(a)),a&&(o.fields[N2]=a),{mapValue:o}}(n,e):t instanceof Ll?B2(t,e):t instanceof Vl?H2(t,e):function(s,a){const o=z2(s,a),l=SN(o)+SN(s.Ae);return vy(o)&&vy(s.Ae)?$2(l):k0(s.serializer,l)}(t,e)}function A$(t,e,n){return t instanceof Ll?B2(t,e):t instanceof Vl?H2(t,e):n}function z2(t,e){return t instanceof Uf?function(r){return vy(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ff extends Bm{}class Ll extends Bm{constructor(e){super(),this.elements=e}}function B2(t,e){const n=W2(e);for(const r of t.elements)n.some(s=>ts(s,r))||n.push(r);return{arrayValue:{values:n}}}class Vl extends Bm{constructor(e){super(),this.elements=e}}function H2(t,e){let n=W2(e);for(const r of t.elements)n=n.filter(s=>!ts(s,r));return{arrayValue:{values:n}}}class Uf extends Bm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function SN(t){return _t(t.integerValue||t.doubleValue)}function W2(t){return S0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.field=e,this.transform=n}}function k$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ll&&s instanceof Ll||r instanceof Vl&&s instanceof Vl?Pl(r.elements,s.elements,ts):r instanceof Uf&&s instanceof Uf?ts(r.Ae,s.Ae):r instanceof Ff&&s instanceof Ff}(t.transform,e.transform)}class R${constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hm{}function K2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Q2(t.key,Nr.none()):new fd(t.key,t.data,Nr.none());{const n=t.data,r=En.empty();let s=new Pt(Ft.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Ji(t.key,r,new Vn(s.toArray()),Nr.none())}}function P$(t,e,n){t instanceof fd?function(s,a,o){const l=s.value.clone(),c=IN(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ji?function(s,a,o){if(!Wh(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=IN(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(G2(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof fd?function(a,o,l,c){if(!Wh(a.precondition,o))return l;const u=a.value.clone(),h=AN(a.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ji?function(a,o,l,c){if(!Wh(a.precondition,o))return l;const u=AN(a.fieldTransforms,c,o),h=o.data;return h.setAll(G2(a)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,o,l){return Wh(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function D$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=z2(r.transform,s||null);a!=null&&(n===null&&(n=En.empty()),n.set(r.field,a))}return n||null}function CN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pl(r,s,(a,o)=>k$(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fd extends Hm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ji extends Hm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function G2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function IN(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,A$(o,l,n[s]))}return r}function AN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,I$(a,o,e))}return r}class Q2 extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M$ extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&P$(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=U2();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=K2(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,(n,r)=>CN(n,r))&&Pl(this.baseMutations,e.baseMutations,(n,r)=>CN(n,r))}}class R0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return E$}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new R0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L$=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Be;function F$(t){switch(t){case z.OK:return ge(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function Y2(t){if(t===void 0)return Bs("GRPC error has no .code"),z.UNKNOWN;switch(t){case Nt.OK:return z.OK;case Nt.CANCELLED:return z.CANCELLED;case Nt.UNKNOWN:return z.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return z.INTERNAL;case Nt.UNAVAILABLE:return z.UNAVAILABLE;case Nt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Nt.NOT_FOUND:return z.NOT_FOUND;case Nt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Nt.ABORTED:return z.ABORTED;case Nt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Nt.DATA_LOSS:return z.DATA_LOSS;default:return ge(39323,{code:t})}}(Be=Nt||(Nt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=new Ai([4294967295,4294967295],0);function kN(t){const e=U$().encode(t),n=new a2;return n.update(e),new Uint8Array(n.digest())}function RN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ai([n,r],0),new Ai([s,a],0)]}class P0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(r<0)throw new qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ai.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ai.fromNumber(r)));return s.compare($$)===1&&(s=new Ai([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kN(e),[r,s]=RN(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new P0(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=kN(e),[r,s]=RN(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wm(ve.min(),s,new pt(Ve),Hs(),Fe())}}class md{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new md(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class X2{constructor(e,n){this.targetId=e,this.Ce=n}}class J2{constructor(e,n,r=$t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class PN{constructor(){this.ve=0,this.Fe=DN(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),r=Fe();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:a})}}),new md(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=DN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class z${constructor(e){this.Ge=e,this.ze=new Map,this.je=Hs(),this.Je=fh(),this.He=fh(),this.Ye=new pt(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(_y(a))if(r===0){const o=new he(a.path);this.et(n,o,an.newNoDocument(o,ve.min()))}else Ke(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Hi(r).toUint8Array()}catch(c){if(c instanceof w2)return Ka("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new P0(o,s,a)}catch(c){return Ka(c instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&_y(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,an.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=Fe();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new Wm(e,n,this.Ye,this.je,r);return this.je=Hs(),this.Je=fh(),this.He=fh(),this.Ye=new pt(Ve),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new PN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pt(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pt(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new PN),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fh(){return new pt(he.comparator)}function DN(){return new pt(he.comparator)}const B$={asc:"ASCENDING",desc:"DESCENDING"},H$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W$={and:"AND",or:"OR"};class q${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ey(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function $f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K$(t,e){return $f(t,e.toTimestamp())}function Jr(t){return Ke(!!t,49232),ve.fromTimestamp(function(n){const r=Bi(n);return new et(r.seconds,r.nanos)}(t))}function D0(t,e){return jy(t,e).canonicalString()}function jy(t,e){const n=function(s){return new Ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eA(t){const e=Ze.fromString(t);return Ke(iA(e),10190,{key:e.toString()}),e}function Ty(t,e){return D0(t.databaseId,e.path)}function Ag(t,e){const n=eA(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(nA(n))}function tA(t,e){return D0(t.databaseId,e)}function G$(t){const e=eA(t);return e.length===4?Ze.emptyPath():nA(e)}function Sy(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nA(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function MN(t,e,n){return{name:Ty(t,e),fields:n.value.mapValue.fields}}function Q$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,h){return u.useProto3Json?(Ke(h===void 0||typeof h=="string",58123),$t.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),$t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?z.UNKNOWN:Y2(u.code);return new ee(h,u.message||"")}(o);n=new J2(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ag(t,r.document.name),a=Jr(r.document.updateTime),o=r.document.createTime?Jr(r.document.createTime):ve.min(),l=new En({mapValue:{fields:r.document.fields}}),c=an.newFoundDocument(s,a,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new qh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ag(t,r.document),a=r.readTime?Jr(r.readTime):ve.min(),o=an.newNoDocument(s,a),l=r.removedTargetIds||[];n=new qh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ag(t,r.document),a=r.removedTargetIds||[];n=new qh([],a,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new V$(s,a),l=r.targetId;n=new X2(l,o)}}return n}function Y$(t,e){let n;if(e instanceof fd)n={update:MN(t,e.key,e.value)};else if(e instanceof Q2)n={delete:Ty(t,e.key)};else if(e instanceof Ji)n={update:MN(t,e.key,e.data),updateMask:i8(e.fieldMask)};else{if(!(e instanceof M$))return ge(16599,{Vt:e.type});n={verify:Ty(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof Ff)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Uf)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:K$(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ge(27497)}(t,e.precondition)),n}function X$(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?Jr(s.updateTime):Jr(a);return o.isEqual(ve.min())&&(o=Jr(a)),new R$(o,s.transformResults||[])}(n,e))):[]}function J$(t,e){return{documents:[tA(t,e.path)]}}function Z$(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tA(t,s);const a=function(u){if(u.length!==0)return sA(kr.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:So(m.field),direction:n8(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ey(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function e8(t){let e=G$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(f){const m=rA(f);return m instanceof kr&&k2(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(j){return new $u(Co(j.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Fm(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new Vf(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,y=f.values||[];return new Vf(y,m)}(n.endAt)),v$(e,s,o,a,l,"F",c,u)}function t8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Co(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Co(n.unaryFilter.field);return jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Co(n.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Co(n.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return jt.create(Co(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kr.create(n.compositeFilter.filters.map(r=>rA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function n8(t){return B$[t]}function r8(t){return H$[t]}function s8(t){return W$[t]}function So(t){return{fieldPath:t.canonicalString()}}function Co(t){return Ft.fromServerFormat(t.fieldPath)}function sA(t){return t instanceof jt?function(n){if(n.op==="=="){if(bN(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(_N(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bN(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(_N(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:r8(n.op),value:n.value}}}(t):t instanceof kr?function(n){const r=n.getFilters().map(s=>sA(s));return r.length===1?r[0]:{compositeFilter:{op:s8(n.op),filters:r}}}(t):ge(54877,{filter:t})}function i8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,s,a=ve.min(),o=ve.min(),l=$t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.yt=e}}function o8(t){const e=e8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ny(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(){this.Cn=new c8}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(zi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class c8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pt(Ze.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aA=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(aA,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fl(0)}static cr(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="LruGarbageCollector",u8=1048576;function VN([t,e],[n,r]){const s=Ve(t,n);return s===0?Ve(e,r):s}class d8{constructor(e){this.Ir=e,this.buffer=new Pt(VN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();VN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(LN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ec(n)?se(LN,"Ignoring IndexedDB error during garbage collection: ",n):await Zl(n)}await this.Vr(3e5)})}}class f8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Vm.ce);const r=new d8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(ON)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ON):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(a=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),jo()<=Le.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function m8(t,e){return new f8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&hu(r.mutation,s,Vn.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Fe()){const s=wa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Wc();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=wa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Hs();const o=du(),l=function(){return du()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ji)?a=a.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),hu(h.mutation,u,h.mutation.getFieldMask(),et.now())):o.set(u.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new g8(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=du();let s=new pt((o,l)=>o-l),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Vn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Fe()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=U2();h.forEach(m=>{if(!a.has(m)){const y=K2(n.get(m),r.get(m));y!==null&&f.set(m,y),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):B.resolve(wa());let l=Vu,c=a;return o.next(u=>B.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Fe())).next(h=>({batchId:l,changes:F2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Wc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Wc();return this.indexManager.getCollectionParents(e,a).next(l=>B.forEach(l,c=>{const u=function(f,m){return new tc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,an.newInvalidDocument(h)))});let l=Wc();return o.forEach((c,u)=>{const h=a.get(c);h!==void 0&&hu(h.mutation,u,Vn.empty(),et.now()),zm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:o8(s.bundledQuery),readTime:Jr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.overlays=new pt(he.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wa();return B.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=wa(),a=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new pt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=a.get(u.largestBatchId);h===null&&(h=wa(),a=a.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=wa(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L$(n,r));let a=this.qr.get(n);a===void 0&&(a=Fe(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.Qr=new Pt(Mt.$r),this.Ur=new Pt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new Ze([])),r=new Mt(n,e),s=new Mt(n,e+1),a=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Ze([])),r=new Mt(n,e),s=new Mt(n,e+1);let a=Fe();return this.Ur.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Mt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Mt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O$(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Mt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?j0:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),s=new Mt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);a.push(l)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Ve);return n.forEach(s=>{const a=new Mt(s,0),o=new Mt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;he.isDocumentKey(a)||(a=a.child(""));const o=new Mt(new he(a),0);let l=new Pt(Ve);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const a=new Mt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Mt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.ri=e,this.docs=function(){return new pt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=Hs();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():an.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Hs();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||J9(X9(h),r)<=0||(s.has(h.key)||zm(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new N8(this)}getSize(e){return B.resolve(this.size)}}class N8 extends p8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.persistence=e,this.si=new oo(n=>C0(n),I0),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new M0,this.targetCount=0,this.ai=Fl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Fl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(a).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vm(0),this.li=!1,this.li=!0,this.hi=new w8,this.referenceDelegate=e(this),this.Pi=new E8(this),this.indexManager=new l8,this.remoteDocumentCache=function(s){return new b8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new a8(n),this.Ii=new y8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new j8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class j8 extends e${constructor(e){super(),this.currentSequenceNumber=e}}class O0{constructor(e){this.persistence=e,this.Ri=new M0,this.Vi=null}static mi(e){return new O0(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zf{constructor(e,n){this.persistence=e,this.pi=new oo(r=>r$(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=m8(this,n)}static mi(e,n){return new zf(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,a.removeEntry(o,ve.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Fe(),s=Fe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new L0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return x6()?8:t$(ln())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new T8;return this.Ss(e,n,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(jo()<=Le.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(jo()<=Le.DEBUG&&se("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(jo()<=Le.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(n))):B.resolve())}ys(e,n){if(TN(n))return B.resolve(null);let r=Xr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ny(n,null,"F"),r=Xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Fe(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Ny(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return TN(n)||s.isEqual(ve.min())?B.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?B.resolve(null):(jo()<=Le.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),To(n)),this.vs(e,o,n,Y9(s,Vu)).next(l=>l))})}Ds(e,n){let r=new Pt(L2(e));return n.forEach((s,a)=>{zm(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return jo()<=Le.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",To(n)),this.ps.getDocumentsMatchingQuery(e,n,zi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LocalStore",C8=3e8;class I8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new pt(Ve),this.xs=new oo(a=>C0(a),I0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function A8(t,e,n,r){return new I8(t,e,n,r)}async function lA(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Fe();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of a){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function k8(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let y=B.resolve();return m.forEach(j=>{y=y.next(()=>h.getEntry(c,j)).next(w=>{const N=u.docVersions.get(j);Ke(N!==null,48541),w.version.compareTo(N)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Fe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function cA(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function R8(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(a,h.addedDocuments,f)));let y=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken($t.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(w,N,v){return w.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=C8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(a,y))});let c=Hs(),u=Fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(P8(a,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next(f=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.Ms=s,a))}function P8(t,e,n){let r=Fe(),s=Fe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Hs();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se(V0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function D8(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=j0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M8(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Cy(t,e,n){const r=we(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ec(o))throw o;se(V0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function FN(t,e,n){const r=we(t);let s=ve.min(),a=Fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),m=f.xs.get(h);return m!==void 0?B.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(r,o,Xr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?a:Fe())).next(l=>(O8(r,_$(e),l),{documents:l,Qs:a})))}function O8(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class UN{constructor(){this.activeTargetIds=S$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L8{constructor(){this.Mo=new UN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new UN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="ConnectivityMonitor";class zN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se($N,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se($N,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Iy(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="RestConnection",F8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Of?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=Iy(),l=this.zo(e,n.toUriEncodedString());se(kg,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,a);const{host:u}=new URL(l),h=ro(u);return this.Jo(e,l,c,r,h).then(f=>(se(kg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ka(kg,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=F8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class z8 extends U8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=Iy();return new Promise((l,c)=>{const u=new o2;u.setWithCredentials(!0),u.listenOnce(l2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zh.NO_ERROR:const f=u.getResponseJson();se(tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case zh.TIMEOUT:se(tn,`RPC '${e}' ${o} timed out`),c(new ee(z.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const m=u.getStatus();if(se(tn,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const j=y==null?void 0:y.error;if(j&&j.status&&j.message){const w=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(x)>=0?x:z.UNKNOWN}(j.status);c(new ee(w,j.message))}else c(new ee(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ee(z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(tn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);se(tn,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Iy(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d2(),l=u2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=a.join("");se(tn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const j=new $8({Yo:N=>{y?se(tn,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||(se(tn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),se(tn,`RPC '${e}' stream ${s} sending:`,N),f.send(N))},Zo:()=>f.close()}),w=(N,v,x)=>{N.listen(v,E=>{try{x(E)}catch(I){setTimeout(()=>{throw I},0)}})};return w(f,Hc.EventType.OPEN,()=>{y||(se(tn,`RPC '${e}' stream ${s} transport opened.`),j.o_())}),w(f,Hc.EventType.CLOSE,()=>{y||(y=!0,se(tn,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(f))}),w(f,Hc.EventType.ERROR,N=>{y||(y=!0,Ka(tn,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),j.a_(new ee(z.UNAVAILABLE,"The operation could not be completed")))}),w(f,Hc.EventType.MESSAGE,N=>{var v;if(!y){const x=N.data[0];Ke(!!x,16349);const E=x,I=(E==null?void 0:E.error)||((v=E[0])==null?void 0:v.error);if(I){se(tn,`RPC '${e}' stream ${s} received error:`,I);const O=I.status;let D=function(T){const S=Nt[T];if(S!==void 0)return Y2(S)}(O),C=I.message;D===void 0&&(D=z.INTERNAL,C="Unknown error status: "+O+" with message "+I.message),y=!0,j.a_(new ee(D,C)),f.close()}else se(tn,`RPC '${e}' stream ${s} received:`,x),j.u_(x)}}),w(l,c2.STAT_EVENT,N=>{N.stat===gy.PROXY?se(tn,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===gy.NOPROXY&&se(tn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Rg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){return new q$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="PersistentStream";class dA{constructor(e,n,r,s,a,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Bs(n.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ee(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(BN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(BN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B8 extends dA{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Q$(this.serializer,e),r=function(a){if(!("targetChange"in a))return ve.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Jr(o.readTime):ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sy(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=_y(c)?{documents:J$(a,c)}:{query:Z$(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Z2(a,o.resumeToken);const u=Ey(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=$f(a,o.snapshotVersion.toTimestamp());const u=Ey(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=t8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sy(this.serializer),n.removeTarget=e,this.q_(n)}}class H8 extends dA{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=X$(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y$(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{}class q8 extends W8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,jy(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(z.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,jy(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class K8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bs(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="RemoteStore";class G8{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{lo(this)&&(se(Ga,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await pd(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Km(u)}(this))})}),this.Ra=new K8(r,s)}}async function Km(t){if(lo(t))for(const e of t.da)await e(!0)}async function pd(t){for(const e of t.da)await e(!1)}function hA(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),z0(n)?$0(n):nc(n).O_()&&U0(n,e))}function F0(t,e){const n=we(t),r=nc(n);n.Ia.delete(e),r.O_()&&fA(n,e),n.Ia.size===0&&(r.O_()?r.L_():lo(n)&&n.Ra.set("Unknown"))}function U0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nc(t).Y_(e)}function fA(t,e){t.Va.Ue(e),nc(t).Z_(e)}function $0(t){t.Va=new z$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nc(t).start(),t.Ra.ua()}function z0(t){return lo(t)&&!nc(t).x_()&&t.Ia.size>0}function lo(t){return we(t).Ea.size===0}function mA(t){t.Va=void 0}async function Q8(t){t.Ra.set("Online")}async function Y8(t){t.Ia.forEach((e,n)=>{U0(t,e)})}async function X8(t,e){mA(t),z0(t)?(t.Ra.ha(e),$0(t)):t.Ra.set("Unknown")}async function J8(t,e,n){if(t.Ra.set("Online"),e instanceof J2&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){se(Ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bf(t,r)}else if(e instanceof qh?t.Va.Ze(e):e instanceof X2?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await cA(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(u);h&&a.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken($t.EMPTY_BYTE_STRING,h.snapshotVersion)),fA(a,c);const f=new vi(h.target,c,u,h.sequenceNumber);U0(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se(Ga,"Failed to raise snapshot:",r),await Bf(t,r)}}async function Bf(t,e,n){if(!ec(e))throw e;t.Ea.add(1),await pd(t),t.Ra.set("Offline"),n||(n=()=>cA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Ga,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Km(t)})}function pA(t,e){return e().catch(n=>Bf(t,n,e))}async function Gm(t){const e=we(t),n=qi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j0;for(;Z8(e);)try{const s=await D8(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,ez(e,s)}catch(s){await Bf(e,s)}gA(e)&&xA(e)}function Z8(t){return lo(t)&&t.Ta.length<10}function ez(t,e){t.Ta.push(e);const n=qi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function gA(t){return lo(t)&&!qi(t).x_()&&t.Ta.length>0}function xA(t){qi(t).start()}async function tz(t){qi(t).ra()}async function nz(t){const e=qi(t);for(const n of t.Ta)e.ea(n.mutations)}async function rz(t,e,n){const r=t.Ta.shift(),s=R0.from(r,e,n);await pA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gm(t)}async function sz(t,e){e&&qi(t).X_&&await async function(r,s){if(function(o){return F$(o)&&o!==z.ABORTED}(s.code)){const a=r.Ta.shift();qi(r).B_(),await pA(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Gm(r)}}(t,e),gA(t)&&xA(t)}async function HN(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(Ga,"RemoteStore received new credentials");const r=lo(n);n.Ea.add(3),await pd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Km(n)}async function iz(t,e){const n=we(t);e?(n.Ea.delete(2),await Km(n)):e||(n.Ea.add(2),await pd(n),n.Ra.set("Unknown"))}function nc(t){return t.ma||(t.ma=function(n,r,s){const a=we(n);return a.sa(),new B8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Q8.bind(null,t),t_:Y8.bind(null,t),r_:X8.bind(null,t),H_:J8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),z0(t)?$0(t):t.Ra.set("Unknown")):(await t.ma.stop(),mA(t))})),t.ma}function qi(t){return t.fa||(t.fa=function(n,r,s){const a=we(n);return a.sa(),new H8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:tz.bind(null,t),r_:sz.bind(null,t),ta:nz.bind(null,t),na:rz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gm(t)):(await t.fa.stop(),t.Ta.length>0&&(se(Ga,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new B0(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H0(t,e){if(Bs("AsyncQueue",`${e}: ${t}`),ec(t))return new ee(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{static emptySet(e){return new il(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Wc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.ga=new pt(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ul{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ul(e,n,il.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class oz{constructor(){this.queries=qN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),a=s.queries;s.queries=qN(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ee(z.ABORTED,"Firestore shutting down"))}}function qN(){return new oo(t=>O2(t),$m)}async function yA(t,e){const n=we(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new az,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=H0(o,`Initialization of query '${To(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&W0(n)}async function vA(t,e){const n=we(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lz(t,e){const n=we(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&W0(n)}function cz(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function W0(t){t.Ca.forEach(e=>{e.next()})}var Ay,KN;(KN=Ay||(Ay={})).Ma="default",KN.Cache="cache";class wA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.key=e}}class bA{constructor(e){this.key=e}}class uz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=L2(e),this.tu=new il(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new WN,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=zm(this.query,f)?f:null,j=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;m&&y?m.data.isEqual(y.data)?j!==w&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(c||u)&&(l=!0)),N&&(y?(o=o.add(y),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,j){const w=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:N})}};return w(y)-w(j)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Ul(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new bA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new _A(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const q0="SyncEngine";class dz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hz{constructor(e){this.key=e,this.hu=!1}}class fz{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new oo(l=>O2(l),$m),this.Iu=new Map,this.Eu=new Set,this.du=new pt(he.comparator),this.Au=new Map,this.Ru=new M0,this.Vu={},this.mu=new Map,this.fu=Fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mz(t,e,n=!0){const r=CA(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await NA(r,e,n,!0),s}async function pz(t,e){const n=CA(t);await NA(n,e,!0,!1)}async function NA(t,e,n,r){const s=await M8(t.localStore,Xr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await gz(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&hA(t.remoteStore,s),l}async function gz(t,e,n,r,s){t.pu=(f,m,y)=>async function(w,N,v,x){let E=N.view.ru(v);E.Cs&&(E=await FN(w.localStore,N.query,!1).then(({documents:C})=>N.view.ru(C,E)));const I=x&&x.targetChanges.get(N.targetId),O=x&&x.targetMismatches.get(N.targetId)!=null,D=N.view.applyChanges(E,w.isPrimaryClient,I,O);return QN(w,N.targetId,D.au),D.snapshot}(t,f,m,y);const a=await FN(t.localStore,e,!0),o=new uz(e,a.Qs),l=o.ru(a.documents),c=md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);QN(t,n,u.au);const h=new dz(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function xz(t,e,n){const r=we(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!$m(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&F0(r.remoteStore,s.targetId),ky(r,s.targetId)}).catch(Zl)):(ky(r,s.targetId),await Cy(r.localStore,s.targetId,!0))}async function yz(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F0(n.remoteStore,r.targetId))}async function vz(t,e,n){const r=Tz(t);try{const s=await function(o,l){const c=we(o),u=et.now(),h=l.reduce((y,j)=>y.add(j.key),Fe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let j=Hs(),w=Fe();return c.Ns.getEntries(y,h).next(N=>{j=N,j.forEach((v,x)=>{x.isValidDocument()||(w=w.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,j)).next(N=>{f=N;const v=[];for(const x of l){const E=D$(x,f.get(x.key).overlayedDocument);E!=null&&v.push(new Ji(x.key,E,C2(E.value.mapValue),Nr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,v,l)}).next(N=>{m=N;const v=N.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(y,N.batchId,v)})}).then(()=>({batchId:m.batchId,changes:F2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new pt(Ve)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await gd(r,s.changes),await Gm(r.remoteStore)}catch(s){const a=H0(s,"Failed to persist write");n.reject(a)}}async function EA(t,e){const n=we(t);try{const r=await R8(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ke(o.hu,14607):s.removedDocuments.size>0&&(Ke(o.hu,42227),o.hu=!1))}),await gd(n,r,e)}catch(r){await Zl(r)}}function GN(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(u=!0)}),u&&W0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wz(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new pt(he.comparator);o=o.insert(a,an.newNoDocument(a,ve.min()));const l=Fe().add(a),c=new Wm(ve.min(),new Map,new pt(Ve),o,l);await EA(r,c),r.du=r.du.remove(a),r.Au.delete(e),K0(r)}else await Cy(r.localStore,e,!1).then(()=>ky(r,e,n)).catch(Zl)}async function _z(t,e){const n=we(t),r=e.batch.batchId;try{const s=await k8(n.localStore,e);TA(n,r,null),jA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gd(n,s)}catch(s){await Zl(s)}}async function bz(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ke(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);TA(r,e,n),jA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gd(r,s)}catch(s){await Zl(s)}}function jA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TA(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ky(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||SA(t,r)})}function SA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(F0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),K0(t))}function QN(t,e,n){for(const r of n)r instanceof _A?(t.Ru.addReference(r.key,e),Nz(t,r)):r instanceof bA?(se(q0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||SA(t,r.key)):ge(19791,{wu:r})}function Nz(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(q0,"New document in limbo: "+n),t.Eu.add(r),K0(t))}function K0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Ze.fromString(e)),r=t.fu.next();t.Au.set(r,new hz(n)),t.du=t.du.insert(n,r),hA(t.remoteStore,new vi(Xr(A0(n.path)),r,"TargetPurposeLimboResolution",Vm.ce))}}async function gd(t,e,n){const r=we(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=L0.As(c.targetId,u);a.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(u,m=>B.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>B.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!ec(f))throw f;se(V0,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),j=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(j);h.Ms=h.Ms.insert(m,w)}}}(r.localStore,a))}async function Ez(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se(q0,"User change. New user:",e.toKey());const r=await lA(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new ee(z.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gd(n,r.Ls)}}function jz(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let s=Fe();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function CA(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wz.bind(null,e),e.Pu.H_=lz.bind(null,e.eventManager),e.Pu.yu=cz.bind(null,e.eventManager),e}function Tz(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_z.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bz.bind(null,e),e}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return A8(this.persistence,new S8,e.initialUser,this.serializer)}Cu(e){return new oA(O0.mi,this.serializer)}Du(e){return new L8}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class Sz extends Hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof zf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new oA(r=>zf.mi(r,n),this.serializer)}}class Ry{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ez.bind(null,this.syncEngine),await iz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oz}()}createDatastore(e){const n=qm(e.databaseInfo.databaseId),r=function(a){return new z8(a)}(e.databaseInfo);return function(a,o,l,c){return new q8(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new G8(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>GN(this.syncEngine,n,0),function(){return zN.v()?new zN:new V8}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,h){const f=new fz(s,a,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=we(s);se(Ga,"RemoteStore shutting down."),a.Ea.add(5),await pd(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ry.provider={build:()=>new Ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class Cz{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=rn.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{se(Ki,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Ki,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=H0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pg(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ki,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Iz(t);se(Ki,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HN(e.remoteStore,s)),t._onlineComponents=e}async function Iz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ki,"Using user provided OfflineComponentProvider");try{await Pg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await Pg(t,new Hf)}}else se(Ki,"Using default OfflineComponentProvider"),await Pg(t,new Sz(void 0));return t._offlineComponents}async function AA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ki,"Using user provided OnlineComponentProvider"),await YN(t,t._uninitializedComponentsProvider._online)):(se(Ki,"Using default OnlineComponentProvider"),await YN(t,new Ry))),t._onlineComponents}function Az(t){return AA(t).then(e=>e.syncEngine)}async function kA(t){const e=await AA(t),n=e.eventManager;return n.onListen=mz.bind(null,e.syncEngine),n.onUnlisten=xz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yz.bind(null,e.syncEngine),n}function kz(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new IA({next:m=>{h.Nu(),o.enqueueAndForget(()=>vA(a,f));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new ee(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new ee(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new wA(A0(l.path),h,{includeMetadataChanges:!0,qa:!0});return yA(a,f)}(await kA(t),t.asyncQueue,e,n,r)),r.promise}function Rz(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new IA({next:m=>{h.Nu(),o.enqueueAndForget(()=>vA(a,f)),m.fromCache&&c.source==="server"?u.reject(new ee(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new wA(l,h,{includeMetadataChanges:!0,qa:!0});return yA(a,f)}(await kA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firestore.googleapis.com",JN=!0;class ZN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PA,this.ssl=JN}else this.host=e.host,this.ssl=e.ssl??JN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u8)throw new ee(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new m2;switch(r.type){case"firstParty":return new H9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XN.get(n);r&&(se("ComponentProvider","Removing Datastore"),XN.delete(n),r.terminate())}(this),Promise.resolve()}}function DA(t,e,n,r={}){var u;t=Ar(t,Qm);const s=ro(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(f0(`https://${l}`),m0("Firestore",!0)),a.host!==PA&&a.host!==l&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!Us(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=rn.MOCK_USER;else{h=sI(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ee(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new rn(m)}t._authCredentials=new $9(new f2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hd(n,vt._jsonSchema))return new vt(e,r||null,new he(Ze.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Tt("string",vt._jsonSchemaVersion),referencePath:Tt("string")};class As extends Zi{constructor(e,n,r){super(e,n,A0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new he(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function Pz(t,e,...n){if(t=Ct(t),p2("collection","path",e),t instanceof Qm){const r=Ze.fromString(e,...n);return hN(r),new As(t,null,r)}{if(!(t instanceof vt||t instanceof As))throw new ee(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return hN(r),new As(t.firestore,null,r)}}function It(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=Om.newId()),p2("doc","path",e),t instanceof Qm){const r=Ze.fromString(e,...n);return dN(r),new vt(t,null,new he(r))}{if(!(t instanceof vt||t instanceof As))throw new ee(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return dN(r),new vt(t.firestore,t instanceof As?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="AsyncQueue";class tE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uA(this,"async_queue_retry"),this._c=()=>{const r=Rg();r&&se(eE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Rg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ec(e))throw e;se(eE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",nE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=B0.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:nE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function nE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class co extends Qm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new tE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tE(e),this._firestoreClient=void 0,await e}}}function MA(t,e){const n=typeof t=="object"?t:Am(),r=typeof t=="string"?t:Of,s=Im(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=tI("firestore");a&&DA(s,...a)}return s}function Ym(t){if(t._terminated)throw new ee(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Dz(t),t._firestoreClient}function Dz(t){var r,s,a;const e=t._freezeSettings(),n=function(l,c,u,h){return new a$(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Cz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On($t.fromBase64String(e))}catch(n){throw new ee(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new On($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Tt("string",On._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(hd(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Tt("string",Er._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jr(e.vectorValues);throw new ee(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:Tt("string",jr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=/^__.*__$/;class Oz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new fd(e,this.data,n,this.fieldTransforms)}}class OA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Xm{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LA(this.Ac)&&Mz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Lz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qm(e)}Cc(e,n,r,s=!1){return new Xm({Ac:e,methodName:n,Dc:r,path:Ft.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(t){const e=t._freezeSettings(),n=qm(t._databaseId);return new Lz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VA(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Y0("Data must be an object, but it was:",o,r);const l=UA(r,o);let c,u;if(a.merge)c=new Vn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const m=Py(e,f,n);if(!o.contains(m))throw new ee(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zA(h,m)||h.push(m)}c=new Vn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Oz(new En(l),c,u)}class Zm extends rc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function FA(t,e,n){return new Xm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class G0 extends rc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=FA(this,e,!0),r=this.vc.map(a=>uo(a,n)),s=new Ll(r);return new q2(e.path,s)}isEqual(e){return e instanceof G0&&Us(this.vc,e.vc)}}class Q0 extends rc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=FA(this,e,!0),r=this.vc.map(a=>uo(a,n)),s=new Vl(r);return new q2(e.path,s)}isEqual(e){return e instanceof Q0&&Us(this.vc,e.vc)}}function Vz(t,e,n,r){const s=t.Cc(1,e,n);Y0("Data must be an object, but it was:",s,r);const a=[],o=En.empty();Xi(r,(c,u)=>{const h=X0(e,c,n);u=Ct(u);const f=s.yc(h);if(u instanceof Zm)a.push(h);else{const m=uo(u,f);m!=null&&(a.push(h),o.set(h,m))}});const l=new Vn(a);return new OA(o,l,s.fieldTransforms)}function Fz(t,e,n,r,s,a){const o=t.Cc(1,e,n),l=[Py(e,r,n)],c=[s];if(a.length%2!=0)throw new ee(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Py(e,a[m])),c.push(a[m+1]);const u=[],h=En.empty();for(let m=l.length-1;m>=0;--m)if(!zA(u,l[m])){const y=l[m];let j=c[m];j=Ct(j);const w=o.yc(y);if(j instanceof Zm)u.push(y);else{const N=uo(j,w);N!=null&&(u.push(y),h.set(y,N))}}const f=new Vn(u);return new OA(h,f,o.fieldTransforms)}function Uz(t,e,n,r=!1){return uo(n,t.Cc(r?4:3,e))}function uo(t,e){if($A(t=Ct(t)))return Y0("Unsupported field value:",e,t),UA(t,e);if(t instanceof rc)return function(r,s){if(!LA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=uo(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=et.fromDate(r);return{timestampValue:$f(s.serializer,a)}}if(r instanceof et){const a=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$f(s.serializer,a)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:Z2(s.serializer,r._byteString)};if(r instanceof vt){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:D0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jr)return function(o,l){return{mapValue:{fields:{[j2]:{stringValue:S2},[Lf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return k0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Lm(r)}`)}(t,e)}function UA(t,e){const n={};return v2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(r,s)=>{const a=uo(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function $A(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Er||t instanceof On||t instanceof vt||t instanceof rc||t instanceof jr)}function Y0(t,e,n){if(!$A(n)||!x2(n)){const r=Lm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Py(t,e,n){if((e=Ct(e))instanceof xd)return e._internalPath;if(typeof e=="string")return X0(t,e);throw Wf("Field path arguments must be of type string or ",t,!1,void 0,n)}const $z=new RegExp("[~\\*/\\[\\]]");function X0(t,e,n){if(e.search($z)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xd(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wf(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ee(z.INVALID_ARGUMENT,l+t+c)}function zA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(J0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zz extends BA{data(){return super.data()}}function J0(t,e){return typeof e=="string"?X0(t,e):e instanceof xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z0{}class ew extends Z0{}function Hz(t,e,...n){let r=[];e instanceof Z0&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof tp).length,l=a.filter(c=>c instanceof ep).length;if(o>1||o>0&&l>0)throw new ee(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ep extends ew{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ep(e,n,r)}_apply(e){const n=this._parse(e);return HA(e._query,n),new Zi(e.firestore,e.converter,by(e._query,n))}_parse(e){const n=Jm(e.firestore);return function(a,o,l,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){sE(f,h);const j=[];for(const w of f)j.push(rE(c,a,w));m={arrayValue:{values:j}}}else m=rE(c,a,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||sE(f,h),m=Uz(l,o,f,h==="in"||h==="not-in");return jt.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class tp extends Z0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)HA(o,c),o=by(o,c)}(e._query,n),new Zi(e.firestore,e.converter,by(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class np extends ew{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new np(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new ee(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(a,o)}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new tc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Wz(t,e="asc"){const n=e,r=J0("orderBy",t);return np._create(r,n)}function rE(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ee(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M2(e)&&n.indexOf("/")!==-1)throw new ee(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ze.fromString(n));if(!he.isDocumentKey(r))throw new ee(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wN(t,new he(r))}if(n instanceof vt)return wN(t,n._key);throw new ee(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lm(n)}.`)}function sE(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HA(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WA{convertValue(e,n="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xi(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[Lf].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>_t(o.doubleValue));return new jr(n)}convertGeoPoint(e){return new Er(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Um(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Bi(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);Ke(iA(r),9688,{name:e});const s=new Dl(r.get(1),r.get(3)),a=new he(r.popFirst(5));return s.isEqual(n)||Bs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ki extends BA{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(J0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",ki._jsonSchema={type:Tt("string",ki._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class fu extends ki{data(e={}){return super.data(e)}}class Ra{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fu(this._firestore,this._userDataWriter,r.key,r,new zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new fu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new fu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:qz(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){t=Ar(t,vt);const e=Ar(t.firestore,co);return kz(Ym(e),t._key).then(n=>Qz(e,t,n))}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:Tt("string",Ra._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class KA extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function Kz(t){t=Ar(t,Zi);const e=Ar(t.firestore,co),n=Ym(e),r=new KA(e);return Bz(t._query),Rz(n,t._query).then(s=>new Ra(e,r,t,s))}function rp(t,e,n){t=Ar(t,vt);const r=Ar(t.firestore,co),s=qA(t.converter,e,n);return sp(r,[VA(Jm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Nr.none())])}function Wn(t,e,n,...r){t=Ar(t,vt);const s=Ar(t.firestore,co),a=Jm(s);let o;return o=typeof(e=Ct(e))=="string"||e instanceof xd?Fz(a,"updateDoc",t._key,e,n,r):Vz(a,"updateDoc",t._key,e),sp(s,[o.toMutation(t._key,Nr.exists(!0))])}function Gz(t,e){const n=Ar(t.firestore,co),r=It(t),s=qA(t.converter,e);return sp(n,[VA(Jm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}function sp(t,e){return function(r,s){const a=new Is;return r.asyncQueue.enqueueAndForget(async()=>vz(await Az(r),s,a)),a.promise}(Ym(t),e)}function Qz(t,e,n){const r=n.docs.get(e._key),s=new KA(t);return new ki(t,s,e._key,r,new zo(n.hasPendingWrites,n.fromCache),e.converter)}function GA(...t){return new G0("arrayUnion",t)}function QA(...t){return new Q0("arrayRemove",t)}(function(e,n=!0){(function(s){Jl=s})(so),Ha(new Ui("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new co(new z9(r.getProvider("auth-internal")),new W9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(u.options.projectId,h)}(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Gr(oN,lN,e),Gr(oN,lN,"esm2020")})();const YA=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:WA,Bytes:On,CollectionReference:As,DocumentReference:vt,DocumentSnapshot:ki,FieldPath:xd,FieldValue:rc,Firestore:co,FirestoreError:ee,GeoPoint:Er,Query:Zi,QueryCompositeFilterConstraint:tp,QueryConstraint:ew,QueryDocumentSnapshot:fu,QueryFieldFilterConstraint:ep,QueryOrderByConstraint:np,QuerySnapshot:Ra,SnapshotMetadata:zo,Timestamp:et,VectorValue:jr,_AutoId:Om,_ByteString:$t,_DatabaseId:Dl,_DocumentKey:he,_EmptyAuthCredentialsProvider:m2,_FieldPath:Ft,_cast:Ar,_logWarn:Ka,_validateIsNotUsedTogether:g2,addDoc:Gz,arrayRemove:QA,arrayUnion:GA,collection:Pz,connectFirestoreEmulator:DA,doc:It,ensureFirestoreConfigured:Ym,executeWrite:sp,getDoc:ea,getDocs:Kz,getFirestore:MA,orderBy:Wz,query:Hz,setDoc:rp,updateDoc:Wn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firebasestorage.googleapis.com",Yz="storageBucket",Xz=2*60*1e3,Jz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends ss{constructor(e,n,r=0){super(Dg(e),`Firebase Storage: ${n} (${Dg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,is.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ns;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ns||(ns={}));function Dg(t){return"storage/"+t}function Zz(){const t="An unknown error occurred, please check the error payload for server response.";return new is(ns.UNKNOWN,t)}function e7(){return new is(ns.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t7(){return new is(ns.CANCELED,"User canceled the upload/download.")}function n7(t){return new is(ns.INVALID_URL,"Invalid URL '"+t+"'.")}function r7(t){return new is(ns.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iE(t){return new is(ns.INVALID_ARGUMENT,t)}function JA(){return new is(ns.APP_DELETED,"The Firebase app was deleted.")}function s7(t){return new is(ns.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vr.makeFromUrl(e,n)}catch{return new vr(e,"")}if(r.path==="")return r;throw r7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),j={bucket:1,path:3},w=n===XA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",v=new RegExp(`^https?://${w}/${s}/${N}`,"i"),E=[{regex:l,indices:c,postModify:a},{regex:y,indices:j,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<E.length;I++){const O=E[I],D=O.regex.exec(e);if(D){const C=D[O.indices.bucket];let _=D[O.indices.path];_||(_=""),r=new vr(C,_),O.postModify(r);break}}if(r==null)throw n7(e);return r}}class i7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...N){u||(u=!0,e.apply(null,N))}function f(N){s=setTimeout(()=>{s=null,t(y,c())},N)}function m(){a&&clearTimeout(a)}function y(N,...v){if(u){m();return}if(N){m(),h.call(null,N,...v);return}if(c()||o){m(),h.call(null,N,...v);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,f(E)}let j=!1;function w(N){j||(j=!0,m(),!u&&(s!==null?(N||(l=2),clearTimeout(s),f(0)):N||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,w(!0)},n),w}function o7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){return t!==void 0}function aE(t,e,n,r){if(r<e)throw iE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw iE(`Invalid value for '${t}'. Expected ${n} or less.`)}function c7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var qf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qf||(qf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,r,s,a,o,l,c,u,h,f,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,w)=>{this.resolve_=j,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ph(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===qf.NO_ERROR,c=a.getStatus();if(!l||u7(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===qf.ABORT;r(!1,new ph(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new ph(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());l7(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=Zz();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?JA():t7();o(c)}else{const c=e7();o(c)}};this.canceled_?n(!1,new ph(!1,null,!0)):this.backoffId_=a7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ph{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function h7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function f7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function g7(t,e,n,r,s,a,o=!0,l=!1){const c=c7(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return m7(h,e),h7(h,n),f7(h,a),p7(h,r),new d7(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this._service=e,n instanceof vr?this._location=n:this._location=vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kf(e,n)}get root(){const e=new vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y7(this._location.path)}get storage(){return this._service}get parent(){const e=x7(this._location.path);if(e===null)return null;const n=new vr(this._location.bucket,e);return new Kf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw s7(e)}}function oE(t,e){const n=e==null?void 0:e[Yz];return n==null?null:vr.makeFromBucketSpec(n,t)}function v7(t,e,n,r={}){t.host=`${e}:${n}`;const s=ro(e);s&&(f0(`https://${t.host}/b`),m0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:sI(a,t.app.options.projectId))}class w7{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=XA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Xz,this._maxUploadRetryTime=Jz,this._requests=new Set,s!=null?this._bucket=vr.makeFromBucketSpec(s,this._host):this._bucket=oE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vr.makeFromBucketSpec(this._url,e):this._bucket=oE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kf(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new i7(JA());{const o=g7(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const lE="@firebase/storage",cE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="storage";function _7(t=Am(),e){t=Ct(t);const r=Im(t,ZA).getImmediate({identifier:e}),s=tI("storage");return s&&b7(r,...s),r}function b7(t,e,n,r={}){v7(t,e,n,r)}function N7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new w7(n,r,s,e,so)}function E7(){Ha(new Ui(ZA,N7,"PUBLIC").setMultipleInstances(!0)),Gr(lE,cE,""),Gr(lE,cE,"esm2020")}E7();const j7=()=>({apiKey:"AIzaSyBF8MObbKYAh0FAACHEX1WPbHbssQsSHOQ",projectId:"movie-da146",appId:"1:348002068886:web:bfddd1888b5bb6afbe95b7"}),wo=j7();let gh=null,Kt=null,Pe=null,ek=null;if(wo){const t={apiKey:wo.apiKey,authDomain:`${wo.projectId}.firebaseapp.com`,projectId:wo.projectId,storageBucket:`${wo.projectId}.appspot.com`,messagingSenderId:"123456789",appId:wo.appId};try{gh=jF().length===0?oI(t):Am(),Kt=i2(gh),Pe=MA(gh),ek=_7(gh)}catch(e){console.error("Failed to initialize Firebase:",e)}}else console.warn("Firebase not initialized due to missing configuration. Authentication features will not work.");const tw=async(t,e)=>{if(!Kt)throw new Error("Firebase not initialized. Please check your configuration.");try{const n=await UI(Kt,t,e),{sendEmailVerification:r}=await va(async()=>{const{sendEmailVerification:s}=await Promise.resolve().then(()=>U9);return{sendEmailVerification:s}},void 0);return await r(n.user),console.log("User created and verification email sent"),n}catch(n){throw console.error("Error during signup:",n),n}},nw=(t,e)=>{if(!Kt)throw new Error("Firebase not initialized. Please check your configuration.");return $I(Kt,t,e)},rw=()=>{if(!Kt)throw new Error("Firebase not initialized. Please check your configuration.");return qI(Kt)},sw=t=>Kt?WI(Kt,t):(console.warn("Firebase not initialized. Authentication state changes will not be tracked."),()=>{}),tk="crypto_watchlist_",zu=t=>{try{const e=tk+t,n=localStorage.getItem(e);return n?JSON.parse(n):[]}catch(e){return console.error("Error getting fallback watchlist:",e),[]}},iw=(t,e)=>{try{const n=tk+t;localStorage.setItem(n,JSON.stringify(e))}catch(n){console.error("Error saving to localStorage:",n)}},nk=async t=>{if(!Pe)return console.warn("Firebase not initialized. Using localStorage fallback for watchlist."),zu(t);try{const e=It(Pe,"crypto_app_users",t),n=await ea(e);if(n.exists()){const r=n.data().watchlist||[];return iw(t,r),r}return[]}catch(e){return console.error("Error getting user watchlist from Firebase, using localStorage fallback:",e),zu(t)}},rk=async t=>{if(!Pe)return console.warn("Firebase not initialized. Profile features will not work."),null;try{const e=It(Pe,"crypto_app_users",t),n=await ea(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user profile:",e),null}},Dy=async t=>{var e,n;try{const r=It(Pe,"crypto_app_users",t.uid),s=await ea(r);s.exists()?(await Wn(r,{lastLoginAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),displayName:t.displayName||s.data().displayName||((n=t.email)==null?void 0:n.split("@")[0])||"User",role:s.data().role||(t.email==="hmzali24@gmail.com"?"admin":"user"),isActive:s.data().isActive!==void 0?s.data().isActive:!0,emailVerified:t.emailVerified||s.data().emailVerified||!1,emailVerifiedAt:t.emailVerified&&!s.data().emailVerifiedAt?new Date().toISOString():s.data().emailVerifiedAt}),console.log("User profile updated successfully")):(await rp(r,{uid:t.uid,email:t.email,displayName:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",photoURL:t.photoURL||null,avatarURL:t.photoURL||null,avatarUpdatedAt:null,bio:"",location:"",website:"",phoneNumber:"",watchlist:[],role:t.email==="hmzali24@gmail.com"?"admin":"user",isActive:!0,emailVerified:t.emailVerified||!1,emailVerifiedAt:t.emailVerified?new Date().toISOString():null,lastVerificationEmailSent:null,userType:"casual",accountType:"standard",verificationLevel:"basic",preferences:{theme:"dark",currency:"USD",language:"en",notifications:{email:!0,push:!0,priceAlerts:!1}},stats:{totalPortfolioValue:0,totalGainLoss:0,favoriteCoins:[],tradingExperience:"beginner"},createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}),console.log("User profile created successfully in crypto_app_users collection"))}catch(r){console.error("Error creating/updating user profile:",r)}},sk=async(t,e)=>{const n=zu(t);if(!n.includes(e)){const r=[...n,e];iw(t,r)}try{const r=It(Pe,"crypto_app_users",t);await Wn(r,{watchlist:GA(e),lastUpdated:new Date().toISOString()}),await sc(t,"watchlist_add",`Added ${e.toUpperCase()} to watchlist`,{coin:e}),console.log(`Successfully added ${e} to watchlist for user ${t}`)}catch(r){if(console.error("Error adding to watchlist, using localStorage fallback:",r),r.code==="not-found")try{const s=It(Pe,"crypto_app_users",t);await rp(s,{uid:t,watchlist:[e],lastUpdated:new Date().toISOString(),createdAt:new Date().toISOString()},{merge:!0}),console.log(`Created user document and added ${e} to watchlist`);return}catch(s){console.error("Error creating user document:",s)}console.log(`Watchlist updated in localStorage as fallback for user ${t}`)}},ik=async(t,e)=>{const r=zu(t).filter(s=>s!==e);iw(t,r);try{const s=It(Pe,"crypto_app_users",t);await Wn(s,{watchlist:QA(e),lastUpdated:new Date().toISOString()}),await sc(t,"watchlist_remove",`Removed ${e.toUpperCase()} from watchlist`,{coin:e}),console.log(`Successfully removed ${e} from watchlist for user ${t}`)}catch(s){console.error("Error removing from watchlist, using localStorage fallback:",s),console.log(`Watchlist updated in localStorage as fallback for user ${t}`)}},ak=async t=>{try{const e=zu(t);if(e.length===0)return;const n=It(Pe,"crypto_app_users",t);await rp(n,{uid:t,watchlist:e,lastUpdated:new Date().toISOString(),syncedAt:new Date().toISOString()},{merge:!0}),console.log(`Successfully synced watchlist with Firebase for user ${t}`)}catch(e){console.error("Error syncing watchlist with Firebase:",e)}},sc=async(t,e,n,r)=>{if(Pe)try{const s=It(Pe,"crypto_app_users",t),a=await ea(s);if(a.exists()){const l=a.data().activities||[],u=[{id:Date.now().toString(),type:e,description:n,timestamp:new Date().toISOString(),data:r},...l].slice(0,20);await Wn(s,{activities:u})}}catch(s){console.error("Error adding activity:",s)}},ok=async(t,e)=>{if(!Pe)throw new Error("Firebase not initialized. Please check your configuration.");try{const n=It(Pe,"crypto_app_users",t);await Wn(n,{...e,lastUpdated:new Date().toISOString()});const r=[];e.displayName&&r.push("name"),e.bio&&r.push("bio"),e.location&&r.push("location"),e.website&&r.push("website"),r.length>0&&await sc(t,"profile_update",`Updated profile: ${r.join(", ")}`,{fields:r}),console.log("User profile updated successfully")}catch(n){throw console.error("Error updating user profile:",n),n}},lk=async(t,e)=>{if(!Pe)throw new Error("Firebase database not initialized. Please check your configuration.");if(e.size>5*1024*1024)throw new Error("File size too large. Maximum size allowed is 5MB.");if(!e.type.startsWith("image/"))throw new Error("Invalid file type. Please select an image file.");try{console.log("Starting avatar upload for user:",t),console.log("File details:",{name:e.name,size:e.size,type:e.type});const n=await T7(e);console.log("Image compressed, base64 length:",n.length);const r=It(Pe,"crypto_app_users",t);return await Wn(r,{avatarURL:n,photoURL:n,avatarUpdatedAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}),console.log("Avatar saved successfully to Firebase database"),n}catch(n){console.error("Error uploading avatar:",n);const r=n instanceof Error?n.message:"Unknown error occurred";throw new Error(`Avatar upload failed: ${r}`)}},T7=async t=>new Promise((e,n)=>{const r=document.createElement("canvas"),s=r.getContext("2d"),a=new Image;a.onload=()=>{let{width:o,height:l}=S7(a.width,a.height);r.width=o,r.height=l,s==null||s.drawImage(a,0,0,o,l);let c=.8,u;do{if(u=r.toDataURL("image/jpeg",c),u.length<8e5)break;c-=.1}while(c>.1);console.log(`Image compressed to ${o}x${l} at ${c} quality`),e(u)},a.onerror=()=>n(new Error("Failed to load image for compression")),a.src=URL.createObjectURL(t)}),S7=(t,e)=>{if(t<=300&&e<=300)return{width:t,height:e};const r=Math.min(300/t,300/e);return{width:Math.round(t*r),height:Math.round(e*r)}},ck=async t=>{if(!Pe)throw new Error("Firebase not initialized. Please check your configuration.");try{const e=It(Pe,"crypto_app_users",t);await Wn(e,{photoURL:null,avatarURL:null,avatarUpdatedAt:null,lastUpdated:new Date().toISOString()}),console.log("Avatar deleted successfully")}catch(e){console.error("Error deleting avatar:",e);const n=e instanceof Error?e.message:"Unknown error occurred";throw new Error(`Failed to delete avatar: ${n}`)}},uk=async(t,e)=>{if(!Pe)throw new Error("Firebase not initialized. Please check your configuration.");try{const n=It(Pe,"crypto_app_users",t);await Wn(n,{preferences:e,lastUpdated:new Date().toISOString()}),console.log("User preferences updated successfully")}catch(n){throw console.error("Error updating user preferences:",n),n}},dk=async(t,e)=>{if(!Pe)throw new Error("Firebase not initialized. Please check your configuration.");try{const n=It(Pe,"crypto_app_users",t);await Wn(n,{stats:e,lastUpdated:new Date().toISOString()}),console.log("User stats updated successfully")}catch(n){throw console.error("Error updating user stats:",n),n}},hk=async t=>{if(!Kt||!Pe)throw new Error("Firebase not initialized");try{const e=It(Pe,"crypto_app_users",t),n=await ea(e);if(n.exists()){const s=n.data().lastVerificationEmailSent;if(s){const o=new Date().getTime()-36e5,l=new Date(s).getTime();if(l>o){const c=new Date(l+36e5);throw new Error(`Verification email already sent. Next email allowed at ${c.toLocaleTimeString()}`)}}const a=Kt.currentUser;if(a&&!a.emailVerified)return await zI(a),await Wn(e,{lastVerificationEmailSent:new Date().toISOString()}),"Verification email sent successfully";throw new Error("User already verified or not logged in")}else throw new Error("User not found")}catch(e){throw console.error("Error sending verification email:",e),e}},aw=async t=>{if(!Pe)return!1;try{const e=It(Pe,"crypto_app_users",t),n=await ea(e);if(n.exists()){const r=n.data();return r.role==="admin"||r.role==="super_admin"}return!1}catch(e){return console.error("Error checking admin status:",e),!1}},C7=async t=>{if(!Pe)return!0;try{const e=It(Pe,"crypto_app_users",t),n=await ea(e);return n.exists()?n.data().isActive!==!1:!0}catch(e){return console.error("Error checking user active status:",e),!0}},fk=async()=>{if(!Pe)return[];try{const{collection:t,getDocs:e,query:n,orderBy:r}=await va(async()=>{const{collection:c,getDocs:u,query:h,orderBy:f}=await Promise.resolve().then(()=>YA);return{collection:c,getDocs:u,query:h,orderBy:f}},void 0),s=t(Pe,"crypto_app_users"),a=n(s,r("createdAt","desc")),o=await e(a),l=[];return o.forEach(c=>{l.push({...c.data(),id:c.id})}),l}catch(t){return console.error("Error getting all users:",t),[]}},mk=async(t,e)=>{if(!Pe||!Kt)throw new Error("Firebase not initialized");try{const n=await fetch("/api/admin/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,adminId:e})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete user")}const r=await n.json();console.log(`User ${t} deleted successfully: ${r.message}`),r.authDeleted?console.log("User deleted from both Firebase Auth and Firestore - user can now create a new account with the same email"):console.warn("User deleted from Firestore only - Firebase Auth deletion may have failed")}catch(n){throw console.error("Error deleting user:",n),n}},pk=async(t,e,n)=>{if(!Pe)throw new Error("Firebase not initialized");try{const r=It(Pe,"crypto_app_users",t);await Wn(r,{isActive:!n,lastUpdated:new Date().toISOString(),suspendedAt:n?new Date().toISOString():null}),await ow(e,"user_suspend",t,`${n?"Suspended":"Unsuspended"} user account`,{suspended:n}),await sc(t,"account_status",`Account ${n?"suspended":"activated"} by admin`,{adminId:e,suspended:n}),console.log(`User ${t} ${n?"suspended":"unsuspended"} successfully`)}catch(r){throw console.error("Error suspending/unsuspending user:",r),r}},gk=async(t,e,n)=>{if(!Pe)throw new Error("Firebase not initialized");try{const r=It(Pe,"crypto_app_users",t);await Wn(r,{role:n,lastUpdated:new Date().toISOString(),roleUpdatedAt:new Date().toISOString()}),await ow(e,"user_role_update",t,`Updated user role to ${n}`,{oldRole:"previous_role",newRole:n}),await sc(t,"role_change",`Role updated to ${n} by admin`,{adminId:e,newRole:n}),console.log(`User ${t} role updated to ${n} successfully`)}catch(r){throw console.error("Error updating user role:",r),r}},ow=async(t,e,n,r,s)=>{if(Pe)try{const{collection:a,addDoc:o}=await va(async()=>{const{collection:c,addDoc:u}=await Promise.resolve().then(()=>YA);return{collection:c,addDoc:u}},void 0),l=a(Pe,"adminActivities");await o(l,{adminId:t,action:e,target:n,details:r,timestamp:new Date().toISOString(),metadata:s||{}})}catch(a){console.error("Error logging admin activity:",a)}},Mg=Object.freeze(Object.defineProperty({__proto__:null,addActivity:sc,addToWatchlist:sk,get auth(){return Kt},createUserProfile:Dy,get db(){return Pe},deleteAvatar:ck,deleteUser:mk,getAllUsers:fk,getUserProfile:rk,getUserWatchlist:nk,isUserActive:C7,isUserAdmin:aw,logAdminActivity:ow,logout:rw,onAuthChange:sw,removeFromWatchlist:ik,resendEmailVerification:hk,signInWithEmail:nw,signUpWithEmail:tw,get storage(){return ek},suspendUser:pk,syncWatchlistWithFirebase:ak,updateUserPreferences:uk,updateUserProfile:ok,updateUserRole:gk,updateUserStats:dk,uploadAvatar:lk},Symbol.toStringTag,{value:"Module"})),Pc="cryptoliquid_auth_cache",I7=5*60*1e3;function Gs(){const[t,e]=p.useState(()=>{try{const l=localStorage.getItem(Pc);if(l){const c=JSON.parse(l);if(Date.now()-c.timestamp<I7)return c.user}}catch(l){console.warn("Failed to load cached auth state:",l)}return null}),[n,r]=p.useState(!0),[s,a]=p.useState(!1);return p.useEffect(()=>{let l=null;return(async()=>{if(Kt.currentUser){try{const{isUserActive:u,logout:h}=await va(async()=>{const{isUserActive:m,logout:y}=await Promise.resolve().then(()=>Mg);return{isUserActive:m,logout:y}},void 0);if(!await u(Kt.currentUser.uid)){console.log("Existing user account is suspended, logging out"),await h(),r(!1);return}}catch(u){console.error("Error checking user active status on init:",u)}e(Kt.currentUser),r(!1),s||Dy(Kt.currentUser).finally(()=>a(!0))}l=sw(async u=>{var f;console.log("Auth state changed:",(u==null?void 0:u.email)||"no user");const h=(f=JSON.parse(localStorage.getItem(Pc)||"null"))==null?void 0:f.user;(h==null?void 0:h.uid)!==(u==null?void 0:u.uid)&&(window.authChangeTimeout&&clearTimeout(window.authChangeTimeout),window.authChangeTimeout=setTimeout(async()=>{if(u&&!h)try{await fetch("/api/track/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:u.uid,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(m){console.error("Failed to track login:",m)}else if(!u&&h)try{await fetch("/api/track/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:h.uid,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(m){console.error("Failed to track logout:",m)}},1e3)),e(u),r(!1);try{const m={user:u,timestamp:Date.now()};localStorage.setItem(Pc,JSON.stringify(m))}catch(m){console.warn("Failed to cache auth state:",m)}(h==null?void 0:h.uid)!==(u==null?void 0:u.uid)&&setTimeout(()=>{window.location.reload()},100),u&&!s&&Dy(u).then(async()=>{a(!0);const{isUserActive:m,logout:y}=await va(async()=>{const{isUserActive:w,logout:N}=await Promise.resolve().then(()=>Mg);return{isUserActive:w,logout:N}},void 0);if(!await m(u.uid)){console.log("User account is suspended, logging out"),await y();try{const{toast:w}=await va(async()=>{const{toast:N}=await Promise.resolve().then(()=>C3);return{toast:N}},void 0);w({title:"Account Suspended",description:"Your account has been suspended. Please contact support for assistance.",variant:"destructive"})}catch{alert("Your account has been suspended. Please contact support for assistance.")}return}try{await ak(u.uid)}catch(w){console.error("Error syncing watchlist:",w)}}).catch(m=>{console.error("Error creating user profile:",m),a(!0)})})})(),()=>{l&&l()}},[]),p.useEffect(()=>{t||(localStorage.removeItem(Pc),a(!1))},[t]),{user:t,loading:n,logoutWithReload:async()=>{try{const{logout:l}=await va(async()=>{const{logout:c}=await Promise.resolve().then(()=>Mg);return{logout:c}},void 0);await l(),localStorage.removeItem(Pc),window.location.reload()}catch(l){console.error("Error during logout:",l)}}}}function lw(){const{user:t}=Gs();return Vt({queryKey:["userProfile",t==null?void 0:t.uid],queryFn:()=>{if(!(t!=null&&t.uid))throw new Error("No user ID available");return rk(t.uid)},enabled:!!(t!=null&&t.uid),staleTime:1e3*60*5,refetchOnWindowFocus:!1})}const Dc="/api";class yd{static async getGlobalStats(){const e=Date.now(),n=await fetch(`${Dc}/global-stats?_t=${e}`,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!n.ok)throw new Error(`Failed to fetch global stats: ${n.statusText}`);return n.json()}static async getCoins(e=1,n=100){const r=Date.now(),s=await fetch(`${Dc}/coins?page=${e}&per_page=${n}&_t=${r}`,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!s.ok)throw new Error(`Failed to fetch coins: ${s.statusText}`);return s.json()}static async getCoinDetail(e){const n=Date.now(),r=await fetch(`${Dc}/coins/${e}?_t=${n}`,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!r.ok)throw new Error(`Failed to fetch coin detail: ${r.statusText}`);return r.json()}static async getHistoricalData(e,n,r){const s=new URLSearchParams({days:n.toString()});r&&s.append("interval",r);const a=await fetch(`${Dc}/coins/${e}/history?${s}`);if(!a.ok)throw new Error(`Failed to fetch historical data: ${a.statusText}`);return a.json()}static async searchCoins(e){const n=await fetch(`${Dc}/search?q=${encodeURIComponent(e)}`);if(!n.ok)throw new Error(`Failed to search coins: ${n.statusText}`);return n.json()}}function cw(t,e=14){if(!t||t.length<e+1)return 50;const n=t.slice(-e-1),r=n.slice(1).map((h,f)=>h-n[f]),s=r.map(h=>h>0?h:0),a=r.map(h=>h<0?-h:0),o=s.reduce((h,f)=>h+f,0)/e,l=a.reduce((h,f)=>h+f,0)/e;if(l===0)return 100;const u=100-100/(1+o/l);return Math.round(u*10)/10}function Ye(t){return t>=1e12?`$${(t/1e12).toFixed(2)} trillion`:t>=1e9?`$${(t/1e9).toFixed(2)} billion`:t>=1e6?`$${(t/1e6).toFixed(2)} million`:`$${t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Qa(t){return t>=1e12?`${(t/1e12).toFixed(2)}T`:t>=1e9?`${(t/1e9).toFixed(2)}B`:t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t.toLocaleString()}function wr(t){return`${t>=0?"+":""}${t.toFixed(2)}%`}function ip(){return Vt({queryKey:["/api/global-stats"],queryFn:()=>yd.getGlobalStats(),refetchInterval:1e3,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0})}function ho(t=1,e=100){return Vt({queryKey:["/api/coins"],queryFn:()=>yd.getCoins(t,e),refetchInterval:1e3,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0})}function A7(t){return Vt({queryKey:["/api/coins/detail",t],queryFn:()=>yd.getCoinDetail(t),enabled:!!t,refetchInterval:1e3,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0})}function xk(t,e,n){const s=n||(a=>a<=.04||a<=.17||a<=1?"hourly":(a<=7,"daily"))(e);return Vt({queryKey:["/api/coins",t,"history",e,s],queryFn:()=>yd.getHistoricalData(t,e,s),enabled:!!t,staleTime:0,refetchInterval:3e4,refetchOnMount:!0,refetchOnWindowFocus:!0})}function yk(){const{data:t,...e}=ho();return{data:t==null?void 0:t.slice(0,20),...e}}const ht=p.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ht.displayName="Input";var k7="Label",vk=p.forwardRef((t,e)=>i.jsx(fe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));vk.displayName=k7;var wk=vk;const R7=sd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=p.forwardRef(({className:t,...e},n)=>i.jsx(wk,{ref:n,className:q(R7(),t),...e}));Ae.displayName=wk.displayName;var P7=p.createContext(void 0);function vd(t){const e=p.useContext(P7);return t||e||"ltr"}var Og=0;function uw(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uE()),document.body.insertAdjacentElement("beforeend",t[1]??uE()),Og++,()=>{Og===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Og--}},[])}function uE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lg="focusScope.autoFocusOnMount",Vg="focusScope.autoFocusOnUnmount",dE={bubbles:!1,cancelable:!0},D7="FocusScope",ap=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=ot(s),h=ot(a),f=p.useRef(null),m=Re(e,w=>c(w)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(E){if(y.paused||!l)return;const I=E.target;l.contains(I)?f.current=I:ri(f.current,{select:!0})},N=function(E){if(y.paused||!l)return;const I=E.relatedTarget;I!==null&&(l.contains(I)||ri(f.current,{select:!0}))},v=function(E){if(document.activeElement===document.body)for(const O of E)O.removedNodes.length>0&&ri(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",N);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",N),x.disconnect()}}},[r,l,y.paused]),p.useEffect(()=>{if(l){fE.add(y);const w=document.activeElement;if(!l.contains(w)){const v=new CustomEvent(Lg,dE);l.addEventListener(Lg,u),l.dispatchEvent(v),v.defaultPrevented||(M7(U7(_k(l)),{select:!0}),document.activeElement===w&&ri(l))}return()=>{l.removeEventListener(Lg,u),setTimeout(()=>{const v=new CustomEvent(Vg,dE);l.addEventListener(Vg,h),l.dispatchEvent(v),v.defaultPrevented||ri(w??document.body,{select:!0}),l.removeEventListener(Vg,h),fE.remove(y)},0)}}},[l,u,h,y]);const j=p.useCallback(w=>{if(!n&&!r||y.paused)return;const N=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,v=document.activeElement;if(N&&v){const x=w.currentTarget,[E,I]=O7(x);E&&I?!w.shiftKey&&v===I?(w.preventDefault(),n&&ri(E,{select:!0})):w.shiftKey&&v===E&&(w.preventDefault(),n&&ri(I,{select:!0})):v===x&&w.preventDefault()}},[n,r,y.paused]);return i.jsx(fe.div,{tabIndex:-1,...o,ref:m,onKeyDown:j})});ap.displayName=D7;function M7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ri(r,{select:e}),document.activeElement!==n)return}function O7(t){const e=_k(t),n=hE(e,t),r=hE(e.reverse(),t);return[n,r]}function _k(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hE(t,e){for(const n of t)if(!L7(n,{upTo:e}))return n}function L7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function V7(t){return t instanceof HTMLInputElement&&"select"in t}function ri(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&V7(t)&&e&&t.select()}}var fE=F7();function F7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mE(t,e),t.unshift(e)},remove(e){var n;t=mE(t,e),(n=t[0])==null||n.resume()}}}function mE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function U7(t){return t.filter(e=>e.tagName!=="A")}var Fg="rovingFocusGroup.onEntryFocus",$7={bubbles:!1,cancelable:!0},op="RovingFocusGroup",[My,bk,z7]=vm(op),[B7,lp]=Hn(op,[z7]),[H7,W7]=B7(op),Nk=p.forwardRef((t,e)=>i.jsx(My.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(My.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(q7,{...t,ref:e})})}));Nk.displayName=op;var q7=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Re(e,m),j=vd(a),[w=null,N]=Oi({prop:o,defaultProp:l,onChange:c}),[v,x]=p.useState(!1),E=ot(u),I=bk(n),O=p.useRef(!1),[D,C]=p.useState(0);return p.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(Fg,E),()=>_.removeEventListener(Fg,E)},[E]),i.jsx(H7,{scope:n,orientation:r,dir:j,loop:s,currentTabStopId:w,onItemFocus:p.useCallback(_=>N(_),[N]),onItemShiftTab:p.useCallback(()=>x(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:p.useCallback(()=>C(_=>_-1),[]),children:i.jsx(fe.div,{tabIndex:v||D===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:Y(t.onMouseDown,()=>{O.current=!0}),onFocus:Y(t.onFocus,_=>{const T=!O.current;if(_.target===_.currentTarget&&T&&!v){const S=new CustomEvent(Fg,$7);if(_.currentTarget.dispatchEvent(S),!S.defaultPrevented){const P=I().filter(W=>W.focusable),M=P.find(W=>W.active),A=P.find(W=>W.id===w),te=[M,A,...P].filter(Boolean).map(W=>W.ref.current);Tk(te,h)}}O.current=!1}),onBlur:Y(t.onBlur,()=>x(!1))})})}),Ek="RovingFocusGroupItem",jk=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...o}=t,l=qr(),c=a||l,u=W7(Ek,n),h=u.currentTabStopId===c,f=bk(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),i.jsx(My.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(fe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:Y(t.onMouseDown,j=>{r?u.onItemFocus(c):j.preventDefault()}),onFocus:Y(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Y(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){u.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const w=Q7(j,u.orientation,u.dir);if(w!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let v=f().filter(x=>x.focusable).map(x=>x.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const x=v.indexOf(j.currentTarget);v=u.loop?Y7(v,x+1):v.slice(x+1)}setTimeout(()=>Tk(v))}})})})});jk.displayName=Ek;var K7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function G7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Q7(t,e,n){const r=G7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return K7[r]}function Tk(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Y7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Sk=Nk,Ck=jk,X7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_o=new WeakMap,xh=new WeakMap,yh={},Ug=0,Ik=function(t){return t&&(t.host||Ik(t.parentNode))},J7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Ik(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Z7=function(t,e,n,r){var s=J7(e,Array.isArray(t)?t:[t]);yh[n]||(yh[n]=new WeakMap);var a=yh[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var y=m.getAttribute(r),j=y!==null&&y!=="false",w=(_o.get(m)||0)+1,N=(a.get(m)||0)+1;_o.set(m,w),a.set(m,N),o.push(m),w===1&&j&&xh.set(m,!0),N===1&&m.setAttribute(n,"true"),j||m.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return h(e),l.clear(),Ug++,function(){o.forEach(function(f){var m=_o.get(f)-1,y=a.get(f)-1;_o.set(f,m),a.set(f,y),m||(xh.has(f)||f.removeAttribute(r),xh.delete(f)),y||f.removeAttribute(n)}),Ug--,Ug||(_o=new WeakMap,_o=new WeakMap,xh=new WeakMap,yh={})}},dw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=X7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Z7(r,s,n,"aria-hidden")):function(){return null}},Br=function(){return Br=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Br.apply(this,arguments)};function Ak(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function eB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Kh="right-scroll-bar-position",Gh="width-before-scroll-bar",tB="with-scroll-bars-hidden",nB="--removed-body-scroll-bar-size";function $g(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function rB(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var sB=typeof window<"u"?p.useLayoutEffect:p.useEffect,pE=new WeakMap;function iB(t,e){var n=rB(null,function(r){return t.forEach(function(s){return $g(s,r)})});return sB(function(){var r=pE.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||$g(l,null)}),a.forEach(function(l){s.has(l)||$g(l,o)})}pE.set(n,t)},[t]),n}function aB(t){return t}function oB(t,e){e===void 0&&(e=aB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var h=o;o=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function lB(t){t===void 0&&(t={});var e=oB(null);return e.options=Br({async:!0,ssr:!1},t),e}var kk=function(t){var e=t.sideCar,n=Ak(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Br({},n))};kk.isSideCarExport=!0;function cB(t,e){return t.useMedium(e),kk}var Rk=lB(),zg=function(){},cp=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:zg,onWheelCapture:zg,onTouchMoveCapture:zg}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,j=t.inert,w=t.allowPinchZoom,N=t.as,v=N===void 0?"div":N,x=t.gapMode,E=Ak(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,O=iB([n,e]),D=Br(Br({},E),s);return p.createElement(p.Fragment,null,h&&p.createElement(I,{sideCar:Rk,removeScrollBar:u,shards:f,noIsolation:y,inert:j,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:x}),o?p.cloneElement(p.Children.only(l),Br(Br({},D),{ref:O})):p.createElement(v,Br({},D,{className:c,ref:O}),l))});cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cp.classNames={fullWidth:Gh,zeroRight:Kh};var uB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uB();return e&&t.setAttribute("nonce",e),t}function hB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dB())&&(hB(e,n),fB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pB=function(){var t=mB();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Pk=function(){var t=pB(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},gB={left:0,top:0,right:0,gap:0},Bg=function(t){return parseInt(t||"",10)||0},xB=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Bg(n),Bg(r),Bg(s)]},yB=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gB;var e=xB(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},vB=Pk(),al="data-scroll-locked",wB=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(tB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(al,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Kh," .").concat(Kh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gh," .").concat(Gh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(al,`] {
    `).concat(nB,": ").concat(l,`px;
  }
`)},gE=function(){var t=parseInt(document.body.getAttribute(al)||"0",10);return isFinite(t)?t:0},_B=function(){p.useEffect(function(){return document.body.setAttribute(al,(gE()+1).toString()),function(){var t=gE()-1;t<=0?document.body.removeAttribute(al):document.body.setAttribute(al,t.toString())}},[])},bB=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;_B();var a=p.useMemo(function(){return yB(s)},[s]);return p.createElement(vB,{styles:wB(a,!e,s,n?"":"!important")})},Oy=!1;if(typeof window<"u")try{var vh=Object.defineProperty({},"passive",{get:function(){return Oy=!0,!0}});window.addEventListener("test",vh,vh),window.removeEventListener("test",vh,vh)}catch{Oy=!1}var bo=Oy?{passive:!1}:!1,NB=function(t){return t.tagName==="TEXTAREA"},Dk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!NB(t)&&n[e]==="visible")},EB=function(t){return Dk(t,"overflowY")},jB=function(t){return Dk(t,"overflowX")},xE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Mk(t,r);if(s){var a=Ok(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TB=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},SB=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Mk=function(t,e){return t==="v"?EB(e):jB(e)},Ok=function(t,e){return t==="v"?TB(e):SB(e)},CB=function(t,e){return t==="h"&&e==="rtl"?-1:1},IB=function(t,e,n,r,s){var a=CB(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,m=0;do{var y=Ok(t,l),j=y[0],w=y[1],N=y[2],v=w-N-a*j;(j||v)&&Mk(t,l)&&(f+=v,m+=j),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},wh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yE=function(t){return[t.deltaX,t.deltaY]},vE=function(t){return t&&"current"in t?t.current:t},AB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},kB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},RB=0,No=[];function PB(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(RB++)[0],a=p.useState(Pk)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=eB([t.lockRef.current],(t.shards||[]).map(vE),!0).filter(Boolean);return w.forEach(function(N){return N.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(w,N){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var v=wh(w),x=n.current,E="deltaX"in w?w.deltaX:x[0]-v[0],I="deltaY"in w?w.deltaY:x[1]-v[1],O,D=w.target,C=Math.abs(E)>Math.abs(I)?"h":"v";if("touches"in w&&C==="h"&&D.type==="range")return!1;var _=xE(C,D);if(!_)return!0;if(_?O=C:(O=C==="v"?"h":"v",_=xE(C,D)),!_)return!1;if(!r.current&&"changedTouches"in w&&(E||I)&&(r.current=O),!O)return!0;var T=r.current||O;return IB(T,N,w,T==="h"?E:I,!0)},[]),c=p.useCallback(function(w){var N=w;if(!(!No.length||No[No.length-1]!==a)){var v="deltaY"in N?yE(N):wh(N),x=e.current.filter(function(O){return O.name===N.type&&(O.target===N.target||N.target===O.shadowParent)&&AB(O.delta,v)})[0];if(x&&x.should){N.cancelable&&N.preventDefault();return}if(!x){var E=(o.current.shards||[]).map(vE).filter(Boolean).filter(function(O){return O.contains(N.target)}),I=E.length>0?l(N,E[0]):!o.current.noIsolation;I&&N.cancelable&&N.preventDefault()}}},[]),u=p.useCallback(function(w,N,v,x){var E={name:w,delta:N,target:v,should:x,shadowParent:DB(v)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(I){return I!==E})},1)},[]),h=p.useCallback(function(w){n.current=wh(w),r.current=void 0},[]),f=p.useCallback(function(w){u(w.type,yE(w),w.target,l(w,t.lockRef.current))},[]),m=p.useCallback(function(w){u(w.type,wh(w),w.target,l(w,t.lockRef.current))},[]);p.useEffect(function(){return No.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,bo),document.addEventListener("touchmove",c,bo),document.addEventListener("touchstart",h,bo),function(){No=No.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,bo),document.removeEventListener("touchmove",c,bo),document.removeEventListener("touchstart",h,bo)}},[]);var y=t.removeScrollBar,j=t.inert;return p.createElement(p.Fragment,null,j?p.createElement(a,{styles:kB(s)}):null,y?p.createElement(bB,{gapMode:t.gapMode}):null)}function DB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const MB=cB(Rk,PB);var up=p.forwardRef(function(t,e){return p.createElement(cp,Br({},t,{ref:e,sideCar:MB}))});up.classNames=cp.classNames;var Ly=["Enter"," "],OB=["ArrowDown","PageUp","Home"],Lk=["ArrowUp","PageDown","End"],LB=[...OB,...Lk],VB={ltr:[...Ly,"ArrowRight"],rtl:[...Ly,"ArrowLeft"]},FB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},wd="Menu",[Bu,UB,$B]=vm(wd),[fo,Vk]=Hn(wd,[$B,Xl,lp]),dp=Xl(),Fk=lp(),[zB,mo]=fo(wd),[BB,_d]=fo(wd),Uk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=dp(e),[c,u]=p.useState(null),h=p.useRef(!1),f=ot(a),m=vd(s);return p.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),i.jsx(PC,{...l,children:i.jsx(zB,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(BB,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};Uk.displayName=wd;var HB="MenuAnchor",hw=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=dp(n);return i.jsx(l0,{...s,...r,ref:e})});hw.displayName=HB;var fw="MenuPortal",[WB,$k]=fo(fw,{forceMount:void 0}),zk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=mo(fw,e);return i.jsx(WB,{scope:e,forceMount:n,children:i.jsx(gn,{present:n||a.open,children:i.jsx(nd,{asChild:!0,container:s,children:r})})})};zk.displayName=fw;var ir="MenuContent",[qB,mw]=fo(ir),Bk=p.forwardRef((t,e)=>{const n=$k(ir,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=mo(ir,t.__scopeMenu),o=_d(ir,t.__scopeMenu);return i.jsx(Bu.Provider,{scope:t.__scopeMenu,children:i.jsx(gn,{present:r||a.open,children:i.jsx(Bu.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(KB,{...s,ref:e}):i.jsx(GB,{...s,ref:e})})})})}),KB=p.forwardRef((t,e)=>{const n=mo(ir,t.__scopeMenu),r=p.useRef(null),s=Re(e,r);return p.useEffect(()=>{const a=r.current;if(a)return dw(a)},[]),i.jsx(pw,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Y(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),GB=p.forwardRef((t,e)=>{const n=mo(ir,t.__scopeMenu);return i.jsx(pw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),QB=$a("MenuContent.ScrollLock"),pw=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,disableOutsideScroll:j,...w}=t,N=mo(ir,n),v=_d(ir,n),x=dp(n),E=Fk(n),I=UB(n),[O,D]=p.useState(null),C=p.useRef(null),_=Re(e,C,N.onContentChange),T=p.useRef(0),S=p.useRef(""),P=p.useRef(0),M=p.useRef(null),A=p.useRef("right"),H=p.useRef(0),te=j?up:p.Fragment,W=j?{as:QB,allowPinchZoom:!0}:void 0,le=U=>{var re,Me;const G=S.current+U,X=I().filter(ue=>!ue.disabled),oe=document.activeElement,_e=(re=X.find(ue=>ue.ref.current===oe))==null?void 0:re.textValue,De=X.map(ue=>ue.textValue),ke=oH(De,G,_e),ze=(Me=X.find(ue=>ue.textValue===ke))==null?void 0:Me.ref.current;(function ue(Se){S.current=Se,window.clearTimeout(T.current),Se!==""&&(T.current=window.setTimeout(()=>ue(""),1e3))})(G),ze&&setTimeout(()=>ze.focus())};p.useEffect(()=>()=>window.clearTimeout(T.current),[]),uw();const V=p.useCallback(U=>{var X,oe;return A.current===((X=M.current)==null?void 0:X.side)&&cH(U,(oe=M.current)==null?void 0:oe.area)},[]);return i.jsx(qB,{scope:n,searchRef:S,onItemEnter:p.useCallback(U=>{V(U)&&U.preventDefault()},[V]),onItemLeave:p.useCallback(U=>{var G;V(U)||((G=C.current)==null||G.focus(),D(null))},[V]),onTriggerLeave:p.useCallback(U=>{V(U)&&U.preventDefault()},[V]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(U=>{M.current=U},[]),children:i.jsx(te,{...W,children:i.jsx(ap,{asChild:!0,trapped:s,onMountAutoFocus:Y(a,U=>{var G;U.preventDefault(),(G=C.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(ql,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,children:i.jsx(Sk,{asChild:!0,...E,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:D,onEntryFocus:Y(c,U=>{v.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(c0,{role:"menu","aria-orientation":"vertical","data-state":iR(N.open),"data-radix-menu-content":"",dir:v.dir,...x,...w,ref:_,style:{outline:"none",...w.style},onKeyDown:Y(w.onKeyDown,U=>{const X=U.target.closest("[data-radix-menu-content]")===U.currentTarget,oe=U.ctrlKey||U.altKey||U.metaKey,_e=U.key.length===1;X&&(U.key==="Tab"&&U.preventDefault(),!oe&&_e&&le(U.key));const De=C.current;if(U.target!==De||!LB.includes(U.key))return;U.preventDefault();const ze=I().filter(re=>!re.disabled).map(re=>re.ref.current);Lk.includes(U.key)&&ze.reverse(),iH(ze)}),onBlur:Y(t.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(T.current),S.current="")}),onPointerMove:Y(t.onPointerMove,Hu(U=>{const G=U.target,X=H.current!==U.clientX;if(U.currentTarget.contains(G)&&X){const oe=U.clientX>H.current?"right":"left";A.current=oe,H.current=U.clientX}}))})})})})})})});Bk.displayName=ir;var YB="MenuGroup",gw=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(fe.div,{role:"group",...r,ref:e})});gw.displayName=YB;var XB="MenuLabel",Hk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(fe.div,{...r,ref:e})});Hk.displayName=XB;var Gf="MenuItem",wE="menu.itemSelect",hp=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=p.useRef(null),o=_d(Gf,t.__scopeMenu),l=mw(Gf,t.__scopeMenu),c=Re(e,a),u=p.useRef(!1),h=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(wE,{bubbles:!0,cancelable:!0});f.addEventListener(wE,y=>r==null?void 0:r(y),{once:!0}),Kv(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(Wk,{...s,ref:c,disabled:n,onClick:Y(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:Y(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Y(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Ly.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});hp.displayName=Gf;var Wk=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=mw(Gf,n),l=Fk(n),c=p.useRef(null),u=Re(e,c),[h,f]=p.useState(!1),[m,y]=p.useState("");return p.useEffect(()=>{const j=c.current;j&&y((j.textContent??"").trim())},[a.children]),i.jsx(Bu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(Ck,{asChild:!0,...l,focusable:!r,children:i.jsx(fe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Y(t.onPointerMove,Hu(j=>{r?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Y(t.onPointerLeave,Hu(j=>o.onItemLeave(j))),onFocus:Y(t.onFocus,()=>f(!0)),onBlur:Y(t.onBlur,()=>f(!1))})})})}),JB="MenuCheckboxItem",qk=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(Xk,{scope:t.__scopeMenu,checked:n,children:i.jsx(hp,{role:"menuitemcheckbox","aria-checked":Qf(n)?"mixed":n,...s,ref:e,"data-state":yw(n),onSelect:Y(s.onSelect,()=>r==null?void 0:r(Qf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qk.displayName=JB;var Kk="MenuRadioGroup",[ZB,eH]=fo(Kk,{value:void 0,onValueChange:()=>{}}),Gk=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=ot(r);return i.jsx(ZB,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(gw,{...s,ref:e})})});Gk.displayName=Kk;var Qk="MenuRadioItem",Yk=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=eH(Qk,t.__scopeMenu),a=n===s.value;return i.jsx(Xk,{scope:t.__scopeMenu,checked:a,children:i.jsx(hp,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":yw(a),onSelect:Y(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});Yk.displayName=Qk;var xw="MenuItemIndicator",[Xk,tH]=fo(xw,{checked:!1}),Jk=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=tH(xw,n);return i.jsx(gn,{present:r||Qf(a.checked)||a.checked===!0,children:i.jsx(fe.span,{...s,ref:e,"data-state":yw(a.checked)})})});Jk.displayName=xw;var nH="MenuSeparator",Zk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Zk.displayName=nH;var rH="MenuArrow",eR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=dp(n);return i.jsx(u0,{...s,...r,ref:e})});eR.displayName=rH;var sH="MenuSub",[eK,tR]=fo(sH),Kc="MenuSubTrigger",nR=p.forwardRef((t,e)=>{const n=mo(Kc,t.__scopeMenu),r=_d(Kc,t.__scopeMenu),s=tR(Kc,t.__scopeMenu),a=mw(Kc,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},h=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(hw,{asChild:!0,...u,children:i.jsx(Wk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":iR(n.open),...t,ref:ym(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Y(t.onPointerMove,Hu(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Y(t.onPointerLeave,Hu(f=>{var y,j;h();const m=(y=n.content)==null?void 0:y.getBoundingClientRect();if(m){const w=(j=n.content)==null?void 0:j.dataset.side,N=w==="right",v=N?-5:5,x=m[N?"left":"right"],E=m[N?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Y(t.onKeyDown,f=>{var y;const m=a.searchRef.current!=="";t.disabled||m&&f.key===" "||VB[r.dir].includes(f.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),f.preventDefault())})})})});nR.displayName=Kc;var rR="MenuSubContent",sR=p.forwardRef((t,e)=>{const n=$k(ir,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=mo(ir,t.__scopeMenu),o=_d(ir,t.__scopeMenu),l=tR(rR,t.__scopeMenu),c=p.useRef(null),u=Re(e,c);return i.jsx(Bu.Provider,{scope:t.__scopeMenu,children:i.jsx(gn,{present:r||a.open,children:i.jsx(Bu.Slot,{scope:t.__scopeMenu,children:i.jsx(pw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Y(t.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Y(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Y(t.onKeyDown,h=>{var y;const f=h.currentTarget.contains(h.target),m=FB[o.dir].includes(h.key);f&&m&&(a.onOpenChange(!1),(y=l.trigger)==null||y.focus(),h.preventDefault())})})})})})});sR.displayName=rR;function iR(t){return t?"open":"closed"}function Qf(t){return t==="indeterminate"}function yw(t){return Qf(t)?"indeterminate":t?"checked":"unchecked"}function iH(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function aH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function oH(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=aH(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function lH(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function cH(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return lH(n,e)}function Hu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var uH=Uk,dH=hw,hH=zk,fH=Bk,mH=gw,pH=Hk,gH=hp,xH=qk,yH=Gk,vH=Yk,wH=Jk,_H=Zk,bH=eR,NH=nR,EH=sR,vw="DropdownMenu",[jH,tK]=Hn(vw,[Vk]),xn=Vk(),[TH,aR]=jH(vw),oR=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=xn(e),u=p.useRef(null),[h=!1,f]=Oi({prop:s,defaultProp:a,onChange:o});return i.jsx(TH,{scope:e,triggerId:qr(),triggerRef:u,contentId:qr(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:i.jsx(uH,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};oR.displayName=vw;var lR="DropdownMenuTrigger",cR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=aR(lR,n),o=xn(n);return i.jsx(dH,{asChild:!0,...o,children:i.jsx(fe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ym(e,a.triggerRef),onPointerDown:Y(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Y(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});cR.displayName=lR;var SH="DropdownMenuPortal",uR=t=>{const{__scopeDropdownMenu:e,...n}=t,r=xn(e);return i.jsx(hH,{...r,...n})};uR.displayName=SH;var dR="DropdownMenuContent",hR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=aR(dR,n),a=xn(n),o=p.useRef(!1);return i.jsx(fH,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:Y(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Y(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hR.displayName=dR;var CH="DropdownMenuGroup",IH=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(mH,{...s,...r,ref:e})});IH.displayName=CH;var AH="DropdownMenuLabel",fR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(pH,{...s,...r,ref:e})});fR.displayName=AH;var kH="DropdownMenuItem",mR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(gH,{...s,...r,ref:e})});mR.displayName=kH;var RH="DropdownMenuCheckboxItem",pR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(xH,{...s,...r,ref:e})});pR.displayName=RH;var PH="DropdownMenuRadioGroup",DH=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(yH,{...s,...r,ref:e})});DH.displayName=PH;var MH="DropdownMenuRadioItem",gR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(vH,{...s,...r,ref:e})});gR.displayName=MH;var OH="DropdownMenuItemIndicator",xR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(wH,{...s,...r,ref:e})});xR.displayName=OH;var LH="DropdownMenuSeparator",yR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(_H,{...s,...r,ref:e})});yR.displayName=LH;var VH="DropdownMenuArrow",FH=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(bH,{...s,...r,ref:e})});FH.displayName=VH;var UH="DropdownMenuSubTrigger",vR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(NH,{...s,...r,ref:e})});vR.displayName=UH;var $H="DropdownMenuSubContent",wR=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xn(n);return i.jsx(EH,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wR.displayName=$H;var zH=oR,BH=cR,HH=uR,_R=hR,bR=fR,NR=mR,ER=pR,jR=gR,TR=xR,SR=yR,CR=vR,IR=wR;const _E=zH,bE=BH,WH=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(CR,{ref:s,className:q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(Cl,{className:"ml-auto h-4 w-4"})]}));WH.displayName=CR.displayName;const qH=p.forwardRef(({className:t,...e},n)=>i.jsx(IR,{ref:n,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));qH.displayName=IR.displayName;const Vy=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(HH,{children:i.jsx(_R,{ref:r,sideOffset:e,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Vy.displayName=_R.displayName;const Qh=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(NR,{ref:r,className:q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Qh.displayName=NR.displayName;const KH=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(ER,{ref:s,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(TR,{children:i.jsx(YS,{className:"h-4 w-4"})})}),e]}));KH.displayName=ER.displayName;const GH=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(jR,{ref:r,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(TR,{children:i.jsx(IL,{className:"h-2 w-2 fill-current"})})}),e]}));GH.displayName=jR.displayName;const QH=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(bR,{ref:r,className:q("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));QH.displayName=bR.displayName;const YH=p.forwardRef(({className:t,...e},n)=>i.jsx(SR,{ref:n,className:q("-mx-1 my-1 h-px bg-muted",t),...e}));YH.displayName=SR.displayName;function XH(){var N,v,x,E;const{user:t,loading:e}=Gs(),{data:n}=lw(),{toast:r}=to(),[,s]=zv(),[a,o]=p.useState(!0),[l,c]=p.useState(!1),[u,h]=p.useState(!1),[f,m]=p.useState({email:"",password:"",confirmPassword:""}),y=I=>{m(O=>({...O,[I.target.name]:I.target.value}))},j=async I=>{I.preventDefault(),h(!0);try{if(a)await nw(f.email,f.password),r({title:"Success",description:"Signed in successfully!"});else{if(f.password!==f.confirmPassword){r({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(f.password.length<6){r({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}await tw(f.email,f.password),r({title:"Success",description:"Account created successfully!"})}m({email:"",password:"",confirmPassword:""})}catch(O){console.error("Auth error:",O);let D=`Failed to ${a?"sign in":"sign up"}`;if(O.code)switch(O.code){case"auth/user-not-found":D="No account found with this email address. Please check your email or sign up for a new account.";break;case"auth/wrong-password":D="Incorrect password. Please try again or reset your password.";break;case"auth/invalid-email":D="Please enter a valid email address.";break;case"auth/user-disabled":D="This account has been disabled. Please contact support for assistance.";break;case"auth/email-already-in-use":D="An account already exists with this email address. Please sign in instead.";break;case"auth/weak-password":D="Password is too weak. Please use at least 6 characters with a mix of letters and numbers.";break;case"auth/too-many-requests":D="Too many failed attempts. Please wait a few minutes before trying again.";break;case"auth/network-request-failed":D="Network error. Please check your internet connection and try again.";break;case"auth/invalid-credential":D="Invalid email or password. Please check your credentials and try again.";break;case"auth/operation-not-allowed":D="Email/password accounts are not enabled. Please contact support.";break;case"auth/requires-recent-login":D="For security reasons, please sign out and sign in again to continue.";break;default:D=O.message||D}else O.message&&(D=O.message);r({title:"Authentication Error",description:D,variant:"destructive"})}finally{h(!1)}},w=()=>{m({email:"",password:"",confirmPassword:""}),c(!1)};return e?i.jsx("div",{className:"w-8 h-8 rounded-full skeleton","data-testid":"auth-loading"}):t?i.jsxs(_E,{children:[i.jsx(bE,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",className:"relative h-10 w-10 rounded-full ring-2 ring-white/20 hover:ring-accent-blue/40 transition-all duration-200","data-testid":"user-menu-trigger",children:[i.jsxs(Pn,{className:"h-9 w-9",children:[i.jsx(tr,{src:(n==null?void 0:n.avatarURL)||t.photoURL||"",alt:(n==null?void 0:n.displayName)||t.displayName||"User",className:"object-cover"}),i.jsx(Dn,{className:"bg-accent-blue/20 text-accent-blue font-semibold",children:((v=(N=(n==null?void 0:n.displayName)||t.displayName||t.email)==null?void 0:N.charAt(0))==null?void 0:v.toUpperCase())||i.jsx(Lt,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-gray-900 rounded-full"})]})}),i.jsxs(Vy,{className:"liquid-bg backdrop-blur-[28px] border border-white/15 rounded-2xl w-72 sm:w-80 lg:w-72 max-w-[90vw] max-h-[80vh] overflow-y-auto liquid-scrollbar shadow-[0_20px_50px_rgba(0,0,0,0.6)] animate-in slide-in-from-top-2 duration-300",align:"end","data-testid":"user-menu-content",sideOffset:10,children:[i.jsxs("div",{className:"px-5 py-4 border-b border-white/20 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-0.5 bg-gradient-to-r from-transparent via-accent-blue to-transparent"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(Pn,{className:"h-14 w-14 ring-2 ring-white/20 ring-offset-2 ring-offset-transparent",children:[i.jsx(tr,{src:(n==null?void 0:n.avatarURL)||t.photoURL||"",alt:(n==null?void 0:n.displayName)||t.displayName||"User",className:"object-cover"}),i.jsx(Dn,{className:"bg-gradient-to-br from-accent-blue to-accent-green text-white font-bold text-lg",children:((E=(x=(n==null?void 0:n.displayName)||t.displayName||t.email)==null?void 0:x.charAt(0))==null?void 0:E.toUpperCase())||i.jsx(Lt,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-bold text-lg tracking-wide","data-testid":"user-display-name",children:(n==null?void 0:n.displayName)||t.displayName||"User"}),i.jsx("p",{className:"text-white/70 text-sm font-medium","data-testid":"user-email",children:t.email}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs text-green-300 ml-2 font-medium",children:"Online"})]})]})]})]}),i.jsxs("div",{className:"py-3",children:[i.jsxs(Qh,{onClick:()=>s("/profile"),className:"glass-card cursor-pointer mx-3 my-2 px-4 py-3 text-white font-medium transition-all duration-300 focus:bg-white/15 hover:bg-white/10 rounded-xl border border-white/10",children:[i.jsx(Lt,{className:"w-5 h-5 mr-3 text-accent-blue"}),i.jsx("span",{className:"font-semibold tracking-wide",children:"View Profile"})]}),i.jsxs(Qh,{onClick:()=>s("/profile"),className:"glass-card cursor-pointer mx-3 my-2 px-4 py-3 text-white font-medium transition-all duration-300 focus:bg-white/15 hover:bg-white/10 rounded-xl border border-white/10",children:[i.jsx(Jo,{className:"w-5 h-5 mr-3 text-purple-400"}),i.jsx("span",{className:"font-semibold tracking-wide",children:"Settings"})]})]}),i.jsx("div",{className:"mx-3 border-t border-white/20 relative",children:i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent"})}),i.jsx("div",{className:"py-3",children:i.jsxs(Qh,{onClick:async()=>{try{await rw(),console.log("User logged out successfully")}catch(I){console.error("Error logging out:",I)}},className:"glass-card cursor-pointer mx-3 my-2 px-4 py-3 hover:bg-red-500/20 text-red-400 hover:text-red-300 transition-all duration-300 focus:bg-red-500/20 rounded-xl border border-red-500/20 hover:border-red-500/40","data-testid":"sign-out-button",children:[i.jsx(ey,{className:"w-5 h-5 mr-3"}),i.jsx("span",{className:"font-semibold tracking-wide",children:"Sign Out"})]})})]})]}):i.jsxs(_E,{onOpenChange:I=>!I&&w(),children:[i.jsx(bE,{asChild:!0,children:i.jsxs(Z,{variant:"outline",size:"sm",className:"liquid-bg backdrop-blur-[28px] border-white/15 text-white hover:bg-white/10 hover:text-accent-blue hover:border-accent-blue/40 transition-all duration-300 font-medium shadow-lg","data-testid":"sign-in-button",children:[i.jsx(AL,{className:"w-4 h-4 mr-2"}),"Sign In"]})}),i.jsx(Vy,{className:"liquid-bg backdrop-blur-[28px] border border-white/15 rounded-2xl w-80 sm:w-96 lg:w-80 max-w-[95vw] max-h-[85vh] overflow-y-auto liquid-scrollbar p-6 shadow-[0_20px_50px_rgba(0,0,0,0.6)] animate-in slide-in-from-top-2 duration-300",align:"end","data-testid":"auth-dropdown",sideOffset:10,children:i.jsxs("div",{className:"space-y-7",children:[i.jsxs("div",{className:"text-center pb-4 border-b border-white/20 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-0.5 bg-gradient-to-r from-transparent via-accent-blue to-transparent"}),i.jsx("h3",{className:"text-2xl font-extrabold text-white mb-3 tracking-tight",children:a?"Welcome Back":"Join CryptoLiquid"}),i.jsx("p",{className:"text-sm font-medium text-white/80 leading-relaxed",children:a?"Sign in to access your crypto dashboard":"Create your account and start trading today"})]}),i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"email",className:"text-sm font-semibold text-white/90 tracking-wide",children:"Email Address"}),i.jsx(ht,{id:"email",name:"email",type:"email",value:f.email,onChange:y,placeholder:"your@email.com",className:"glass-card border-white/20 text-white placeholder:text-white/50 focus:border-accent-blue/60 focus:ring-2 focus:ring-accent-blue/20 text-base py-3 px-4 font-medium transition-all duration-300",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"password",className:"text-sm font-semibold text-white/90 tracking-wide",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(ht,{id:"password",name:"password",type:l?"text":"password",value:f.password,onChange:y,placeholder:"",className:"glass-card border-white/20 text-white placeholder:text-white/50 focus:border-accent-blue/60 focus:ring-2 focus:ring-accent-blue/20 text-base py-3 px-4 pr-12 font-medium transition-all duration-300",required:!0}),i.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 rounded-md hover:bg-white/10 transition-colors",onClick:()=>c(!l),children:l?i.jsx(Uc,{className:"h-4 w-4 text-white/70"}):i.jsx(pr,{className:"h-4 w-4 text-white/70"})})]})]}),!a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"confirmPassword",className:"text-sm font-semibold text-white/90 tracking-wide",children:"Confirm Password"}),i.jsx(ht,{id:"confirmPassword",name:"confirmPassword",type:"password",value:f.confirmPassword,onChange:y,placeholder:"",className:"glass-card border-white/20 text-white placeholder:text-white/50 focus:border-accent-blue/60 focus:ring-2 focus:ring-accent-blue/20 text-base py-3 px-4 font-medium transition-all duration-300",required:!0})]}),i.jsx(Z,{type:"submit",className:"w-full bg-gradient-to-r from-accent-blue via-purple-500 to-accent-green hover:from-accent-blue/90 hover:via-purple-500/90 hover:to-accent-green/90 text-white font-bold py-4 text-base transition-all duration-300 shadow-2xl shadow-accent-blue/30 rounded-xl border border-white/20 backdrop-blur-sm",disabled:u,children:u?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),i.jsx("span",{className:"text-base font-semibold",children:a?"Signing In...":"Creating Account..."})]}):i.jsx("span",{className:"text-base font-semibold tracking-wide",children:a?"Sign In to CryptoLiquid":"Create Your Account"})})]}),i.jsxs("div",{className:"relative my-7",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t border-gradient-to-r from-transparent via-white/30 to-transparent"})}),i.jsx("div",{className:"relative flex justify-center text-sm uppercase",children:i.jsx("span",{className:"liquid-bg backdrop-blur-[20px] px-6 py-2 text-white/80 font-bold tracking-[0.2em] rounded-full border border-white/20",children:"OR"})})]}),i.jsxs("div",{className:"text-center pt-5 border-t border-white/20 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent"}),i.jsx(Z,{variant:"ghost",onClick:()=>{o(!a),w()},className:"text-sm text-white/80 hover:text-accent-blue transition-all duration-300 font-semibold tracking-wide hover:bg-white/5 rounded-lg px-4 py-2",children:a?"Don't have an account? Create one":"Already have an account? Sign in"})]})]})})]})}function JH(){var m;const[t,e]=p.useState(!1),[n,r]=p.useState(!1),[s,a]=p.useState(!1),[o]=zv(),{user:l}=Gs(),{data:c}=lw();ip(),p.useEffect(()=>{(async()=>{if(l){const j=await aw(l.uid);a(j)}})()},[l]);const u=async()=>{try{await rw(),e(!1),r(!1)}catch(y){console.error("Error signing out:",y)}},h=[{path:"/",label:"Dashboard",icon:za},{path:"/markets",label:"Markets",icon:Xo},{path:"/news",label:"News",icon:RL},{path:"/watchlist",label:"Watchlist",icon:Zr},{path:"/analytics",label:"Analytics",icon:TL},{path:"/heatmap",label:"Heatmap",icon:Kl},{path:"/global",label:"Global",icon:bm},...s?[{path:"/admin",label:"Admin",icon:ya}]:[]],f=(c==null?void 0:c.displayName)||(l==null?void 0:l.displayName)||((m=l==null?void 0:l.email)==null?void 0:m.split("@")[0])||"User";return i.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 liquid-bg border-b border-white/10 w-full",children:[i.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs(bn,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-accent-blue to-accent-green rounded-lg flex items-center justify-center",children:i.jsx(ut,{className:"w-4 h-4 text-white"})}),i.jsx("span",{className:"text-xl font-bold text-white",children:"CryptoLiquid"})]}),i.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:h.map(y=>{const j=y.icon;return i.jsxs(bn,{href:y.path,className:q("flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",o===y.path?"bg-accent-blue/20 text-accent-blue border border-accent-blue/30":"text-gray-300 hover:text-white hover:bg-white/10"),children:[i.jsx(j,{className:"w-4 h-4"}),i.jsx("span",{children:y.label})]},y.path)})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>r(!n),className:"lg:hidden p-2 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-colors z-50 relative","aria-label":"Toggle menu",children:n?i.jsx(Zo,{className:"w-5 h-5"}):i.jsx(f1,{className:"w-5 h-5"})}),i.jsx("div",{className:"relative",children:l?i.jsxs("div",{className:"hidden lg:block",children:[i.jsxs(Z,{variant:"ghost",onClick:()=>e(!t),className:"flex items-center space-x-3 text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-all","data-testid":"user-menu-button",children:[i.jsxs(Pn,{className:"w-10 h-10 border-2 border-white/20",children:[i.jsx(tr,{src:(c==null?void 0:c.photoURL)||void 0,alt:f}),i.jsx(Dn,{className:"bg-gradient-to-r from-accent-blue to-accent-green text-white text-sm font-bold",children:f.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"hidden sm:flex flex-col items-start",children:[i.jsx("span",{className:"text-sm font-semibold",children:f}),i.jsx("span",{className:"text-xs text-gray-300",children:l.email})]}),i.jsx(f1,{className:"w-5 h-5"})]}),t&&i.jsx("div",{className:"absolute right-0 top-12 w-80 md:w-96 lg:w-80 xl:w-96 max-w-[90vw] liquid-bg border border-white/10 rounded-lg shadow-2xl z-50 max-h-[80vh] overflow-y-auto liquid-scrollbar",children:i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-white/10",children:[i.jsxs(Pn,{className:"w-12 h-12 border-2 border-white/20",children:[i.jsx(tr,{src:(c==null?void 0:c.photoURL)||void 0,alt:f}),i.jsx(Dn,{className:"bg-gradient-to-r from-accent-blue to-accent-green text-white text-lg font-bold",children:f.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-base font-semibold text-white",children:f}),i.jsx("div",{className:"text-sm text-gray-300",children:l.email})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"lg:hidden",children:[i.jsx("div",{className:"text-sm text-gray-300 uppercase tracking-wide font-medium mb-3",children:"Navigation"}),i.jsx("div",{className:"space-y-1",children:h.map(y=>{const j=y.icon;return i.jsxs(bn,{href:y.path,className:"flex items-center space-x-3 text-base text-white hover:text-accent-blue transition-colors p-3 rounded-lg hover:bg-white/10",onClick:()=>e(!1),children:[i.jsx(j,{className:"w-5 h-5"}),i.jsx("span",{children:y.label})]},y.path)})})]}),i.jsxs("div",{className:"pt-4 border-t border-white/10",children:[i.jsx("div",{className:"text-sm text-gray-300 uppercase tracking-wide font-medium mb-3",children:"Account"}),i.jsxs("div",{className:"space-y-1 mb-4",children:[i.jsxs(bn,{href:"/profile",className:"flex items-center space-x-3 text-base text-white hover:text-accent-blue transition-colors p-3 rounded-lg hover:bg-white/10",onClick:()=>e(!1),children:[i.jsx(Lt,{className:"w-5 h-5"}),i.jsx("span",{children:"Profile Settings"})]}),s&&i.jsxs(bn,{href:"/admin",className:"flex items-center space-x-3 text-base text-white hover:text-purple-400 transition-colors p-3 rounded-lg hover:bg-purple-500/10 border border-purple-500/30",onClick:()=>e(!1),children:[i.jsx(ya,{className:"w-5 h-5 text-purple-400"}),i.jsx("span",{children:"Admin Dashboard"})]})]}),i.jsx("div",{className:"text-sm text-gray-300 uppercase tracking-wide font-medium mb-3",children:"Account Status"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-200",children:"Status:"}),i.jsx("span",{className:"text-sm font-semibold text-green-400",children:"Active"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-200",children:"Plan:"}),i.jsx("span",{className:`text-sm font-semibold ${s?"text-purple-400":"text-accent-blue"}`,children:s?"Admin":"Free"})]})]})]})]}),i.jsx("div",{className:"pt-4 border-t border-gray-600/50",children:i.jsxs(Z,{variant:"ghost",onClick:u,className:"w-full flex items-center justify-center space-x-2 text-red-400 hover:bg-red-400/20 hover:text-red-300 p-3 text-base font-medium","data-testid":"sign-out-button",children:[i.jsx(ey,{className:"w-5 h-5"}),i.jsx("span",{children:"Sign Out"})]})})]})})]}):i.jsx(XH,{})})]})]})}),n&&i.jsx("div",{className:"lg:hidden absolute top-full left-0 right-0 z-40 border-t border-white/10 liquid-bg backdrop-blur-xl shadow-[0_10px_30px_rgba(0,0,0,0.3)]",children:i.jsxs("div",{className:"px-4 py-4 space-y-2",children:[l&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center space-x-3 px-3 py-3 border-b border-white/10 mb-2",children:[i.jsxs(Pn,{className:"w-10 h-10 border-2 border-white/20",children:[i.jsx(tr,{src:(c==null?void 0:c.photoURL)||void 0,alt:f}),i.jsx(Dn,{className:"bg-gradient-to-r from-accent-blue to-accent-green text-white text-sm font-bold",children:f.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-white",children:f}),i.jsx("div",{className:"text-xs text-gray-300",children:l.email})]})]})}),h.map(y=>{const j=y.icon;return i.jsxs(bn,{href:y.path,onClick:()=>r(!1),className:q("flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 w-full",o===y.path?"bg-accent-blue/20 text-accent-blue border border-accent-blue/30":"text-gray-300 hover:text-white hover:bg-white/10"),children:[i.jsx(j,{className:"w-5 h-5"}),i.jsx("span",{children:y.label})]},y.path)}),l&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border-t border-white/10 pt-2 mt-2",children:[i.jsxs(bn,{href:"/profile",onClick:()=>r(!1),className:"flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-all duration-200 w-full",children:[i.jsx(Lt,{className:"w-5 h-5"}),i.jsx("span",{children:"Profile Settings"})]}),i.jsxs("button",{onClick:()=>{u(),r(!1)},className:"flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-all duration-200 w-full",children:[i.jsx(ey,{className:"w-5 h-5"}),i.jsx("span",{children:"Sign Out"})]})]})})]})}),(t||n)&&i.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>{e(!1),r(!1)}})]})}function ZH(){const{data:t}=ip(),{data:e}=Vt({queryKey:["/api/alt-season-index"],queryFn:()=>fetch("/api/alt-season-index").then(o=>o.json()),refetchInterval:3e4,staleTime:2e4,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:n}=Vt({queryKey:["/api/fear-greed-index"],queryFn:()=>fetch("/api/fear-greed-index").then(o=>o.json()),refetchInterval:3e4,staleTime:2e4,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:r}=Vt({queryKey:["/api/market-hours"],queryFn:()=>fetch("/api/market-hours").then(o=>o.json()),refetchInterval:3e4,staleTime:2e4,refetchOnMount:!0,refetchOnWindowFocus:!0});if(!t)return i.jsx("div",{className:"w-full liquid-bg border-b border-white/10 z-40 relative",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-2",children:i.jsx("div",{className:"flex justify-center items-center",children:i.jsx("div",{className:"animate-pulse text-white/50 text-xs",children:"Loading..."})})})});const s=o=>o>=1e12?`$${(o/1e12).toFixed(2)}T`:o>=1e9?`$${(o/1e9).toFixed(2)}B`:o>=1e6?`$${(o/1e6).toFixed(2)}M`:`$${o.toFixed(2)}`,a=o=>`${o>=0?"+":""}${o.toFixed(2)}%`;return i.jsx("div",{className:"w-full liquid-bg border-b border-white/10 z-40 relative -mb-1","data-testid":"market-widgets-banner",children:i.jsx("div",{className:"w-full px-4 py-2",children:i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-4 md:gap-6 text-xs",children:[i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"Market Cap:"}),i.jsx("span",{className:"font-semibold",children:t?s(t.totalMarketCap):"$0"}),i.jsx("span",{className:`${((t==null?void 0:t.marketCapChange24h)||0)>=0?"text-green-400":"text-red-400"}`,children:a((t==null?void 0:t.marketCapChange24h)||0)})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"Volume:"}),i.jsx("span",{className:"font-semibold",children:t?s(t.totalVolume):"$0"})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"BTC:"}),i.jsxs("span",{className:"font-semibold",children:[((t==null?void 0:t.btcDominance)||0).toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"ETH:"}),i.jsxs("span",{className:"font-semibold",children:[((t==null?void 0:t.ethDominance)||0).toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"Coins:"}),i.jsx("span",{className:"font-semibold",children:((t==null?void 0:t.activeCryptos)||0).toLocaleString()})]}),e&&typeof e=="object"&&"value"in e&&i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"Alt Season:"}),i.jsx("span",{className:"font-semibold",children:e.value}),i.jsxs("span",{className:"text-xs text-gray-300",children:["(",e.status,")"]})]}),n&&typeof n=="object"&&"value"in n&&i.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[i.jsx("span",{className:"text-gray-400",children:"F&G:"}),i.jsx("span",{className:"font-semibold",children:n.value}),i.jsxs("span",{className:"text-xs text-gray-300",children:["(",n.status,")"]})]}),r&&r.markets&&i.jsxs("div",{className:"flex items-center space-x-2 text-white border-l border-white/20 pl-4",children:[i.jsx("span",{className:"text-gray-400 hidden sm:inline",children:"Markets:"}),i.jsx("div",{className:"flex items-center space-x-2",children:r.markets.slice(0,3).map((o,l)=>i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{className:"text-sm",children:o.flag}),i.jsx("span",{className:"text-xs font-medium",children:o.name}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${o.is_open?"bg-green-400 animate-pulse":"bg-red-400"}`}),l<2&&i.jsx("span",{className:"text-gray-500 mx-1",children:""})]},o.name))})]})]})})})}function Qe({children:t,className:e,hover:n=!1,onClick:r}){return i.jsx("div",{className:q("glass-card rounded-xl",n&&"hover-glow cursor-pointer",r&&"cursor-pointer",e),onClick:r,"data-testid":"glass-card",children:t})}function ic(){const{user:t}=Gs(),{toast:e}=to(),n=td(),{data:r=[],isLoading:s,refetch:a}=Vt({queryKey:["watchlist",t==null?void 0:t.uid],queryFn:()=>nk(t.uid),enabled:!!t,staleTime:30*1e3,retry:(h,f)=>{var m;return h<2&&!((m=f==null?void 0:f.code)!=null&&m.includes("unavailable"))}}),o=ua({mutationFn:h=>sk(t.uid,h),onSuccess:()=>{n.invalidateQueries({queryKey:["watchlist",t==null?void 0:t.uid]}),a(),e({title:"Added to Watchlist",description:"Coin successfully added to your watchlist"})},onError:h=>{console.error("Watchlist add error:",h),n.invalidateQueries({queryKey:["watchlist",t==null?void 0:t.uid]}),a(),e({title:"Added to Watchlist",description:"Coin added to your watchlist (will sync when online)"})}}),l=ua({mutationFn:h=>ik(t.uid,h),onSuccess:()=>{n.invalidateQueries({queryKey:["watchlist",t==null?void 0:t.uid]}),a(),e({title:"Removed from Watchlist",description:"Coin successfully removed from your watchlist"})},onError:h=>{console.error("Watchlist remove error:",h),n.invalidateQueries({queryKey:["watchlist",t==null?void 0:t.uid]}),a(),e({title:"Removed from Watchlist",description:"Coin removed from your watchlist (will sync when online)"})}}),c=h=>r.includes(h);return{watchlist:r,isLoading:s,isInWatchlist:c,toggleWatchlist:h=>{if(!t){e({title:"Authentication Required",description:"Please sign in to manage your watchlist",variant:"destructive"});return}c(h)?l.mutate(h):o.mutate(h)},addToWatchlist:o.mutate,removeFromWatchlist:l.mutate}}function eW({onCoinClick:t}){const{data:e,isLoading:n,refetch:r}=yk(),{isInWatchlist:s,toggleWatchlist:a,watchlist:o}=ic(),{user:l}=Gs(),[c,u]=p.useState(new Map),[h,f]=p.useState(new Set),[m,y]=p.useState(!1);p.useEffect(()=>{if(!e)return;const x=[];return e.forEach(E=>{const I=c.get(E.id);if(I&&I.newPrice!==E.current_price){const O={coinId:E.id,newPrice:E.current_price,oldPrice:I.newPrice,timestamp:Date.now()};u(C=>new Map(C.set(E.id,O))),f(C=>new Set(C.add(E.id)));const D=setTimeout(()=>{f(C=>{const _=new Set(C);return _.delete(E.id),_})},2e3);x.push(D)}else I||u(O=>new Map(O.set(E.id,{coinId:E.id,newPrice:E.current_price,oldPrice:E.current_price,timestamp:Date.now()})))}),()=>{x.forEach(E=>clearTimeout(E))}},[e]);const j=(x,E)=>x>0?i.jsx(ut,{className:q("w-4 h-4 text-green-400",E&&"animate-bounce")}):x<0?i.jsx(no,{className:q("w-4 h-4 text-red-400",E&&"animate-bounce")}):null,w=x=>{const E=c.get(x);return!E||!h.has(x)?"":E.newPrice>E.oldPrice?"ring-2 ring-green-400/50 shadow-lg shadow-green-400/30 bg-green-500/10 border-green-400/40":"ring-2 ring-red-400/50 shadow-lg shadow-red-400/30 bg-red-500/10 border-red-400/40"},N=l&&o.length>0?(e==null?void 0:e.filter(x=>o.includes(x.id)))||[]:(e==null?void 0:e.slice(0,12))||[],v=async()=>{y(!0);try{await r()}catch(x){console.error("Error refreshing data:",x)}finally{setTimeout(()=>y(!1),1e3)}};return i.jsx("section",{className:"py-8","data-testid":"enhanced-live-ticker",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs(Qe,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center","data-testid":"live-ticker-title",children:[i.jsx(pr,{className:"text-accent-blue mr-2"}),l&&o.length>0?"My Watchlist":"Live Price Tracker"]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Z,{variant:"ghost",size:"sm",onClick:v,disabled:m,className:"text-gray-400 hover:text-white hover:bg-white/10","data-testid":"refresh-button",children:[i.jsx(Il,{className:q("w-4 h-4 mr-2",m&&"animate-spin")}),"Refresh"]}),i.jsx("div",{className:"text-sm text-gray-400",children:l&&o.length>0?`${o.length} coins tracked`:"Updates every second"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4","data-testid":"live-ticker-grid",children:n?Array.from({length:12}).map((x,E)=>i.jsxs("div",{className:"glass-card rounded-lg p-4 border hover-glow","data-testid":`live-ticker-skeleton-${E}`,style:{animationDelay:`${E*.1}s`},children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full skeleton"}),i.jsxs("div",{children:[i.jsx("div",{className:"w-16 h-4 skeleton rounded mb-1"}),i.jsx("div",{className:"w-12 h-3 skeleton rounded"})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"w-6 h-6 skeleton rounded"}),i.jsx("div",{className:"w-6 h-6 skeleton rounded"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"w-24 h-7 skeleton rounded mb-2"}),i.jsx("div",{className:"w-16 h-4 skeleton rounded mb-1"}),i.jsx("div",{className:"w-20 h-3 skeleton rounded"})]})]},E)):N.length>0?N.map(x=>{const E=h.has(x.id),I=j(x.price_change_percentage_24h,E);return i.jsxs("div",{className:q("coin-card-enhanced glass-card rounded-lg p-4 cursor-pointer transition-all duration-500 border",w(x.id),"group relative overflow-hidden"),onClick:()=>t==null?void 0:t(x.id),"data-testid":`live-ticker-coin-${x.id}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("img",{src:x.image,alt:x.name,className:"w-10 h-10 rounded-full","data-testid":`live-ticker-coin-image-${x.id}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm","data-testid":`live-ticker-coin-name-${x.id}`,children:x.name}),i.jsx("p",{className:"text-xs text-gray-400 uppercase","data-testid":`live-ticker-coin-symbol-${x.id}`,children:x.symbol})]})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(Z,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0",onClick:O=>{O.stopPropagation(),a(x.id)},"data-testid":`watchlist-toggle-${x.id}`,children:i.jsx(Zr,{className:q("w-4 h-4",s(x.id)?"fill-yellow-400 text-yellow-400":"text-gray-400")})}),I]})]}),i.jsxs("div",{children:[i.jsx("p",{className:q("text-xl font-bold mb-1 transition-all duration-500",E&&x.price_change_percentage_24h>0&&"text-green-400 scale-105",E&&x.price_change_percentage_24h<0&&"text-red-400 scale-105",!E&&"group-hover:text-accent-blue"),"data-testid":`live-ticker-coin-price-${x.id}`,children:Ye(x.current_price)}),i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"text-xs text-gray-400",children:[i.jsxs("span",{className:"text-green-400",children:["H: ",Ye(x.high_24h)]}),i.jsx("span",{className:"mx-1 text-gray-500",children:"|"}),i.jsxs("span",{className:"text-red-400",children:["L: ",Ye(x.low_24h)]})]}),i.jsxs("span",{className:"text-xs font-semibold text-gray-300",children:["#",x.market_cap_rank]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:q("text-sm font-medium transition-all duration-300",x.price_change_percentage_24h>0?"text-green-400":"text-red-400",E&&"animate-pulse font-bold"),"data-testid":`live-ticker-coin-change-${x.id}`,children:wr(x.price_change_percentage_24h)}),i.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[i.jsxs("div",{children:["MCap: ",Ye(x.market_cap)]}),i.jsxs("div",{children:["Vol: ",Ye(x.total_volume)]})]})]}),i.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700/50",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[i.jsx("span",{children:"Circulating:"}),i.jsx("span",{children:Qa(x.circulating_supply)})]}),x.max_supply&&i.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[i.jsx("span",{children:"Max Supply:"}),i.jsx("span",{children:Qa(x.max_supply)})]})]})]}),i.jsxs("div",{className:"mt-3 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i.jsxs(Z,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7 bg-primary-800/50 border-gray-600 hover:bg-accent-blue hover:border-accent-blue",onClick:O=>{O.stopPropagation(),t==null||t(x.id)},children:[i.jsx(Kl,{className:"w-3 h-3 mr-1"}),"View"]}),i.jsx(Z,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7 bg-primary-800/50 border-gray-600 hover:bg-green-500 hover:border-green-500",onClick:O=>{O.stopPropagation()},children:"Trade"})]})]},x.id)}):l&&o.length===0?i.jsx("div",{className:"col-span-full text-center py-12 text-gray-400","data-testid":"live-ticker-no-watchlist",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(Zr,{className:"w-12 h-12 text-gray-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:"No coins in your watchlist"}),i.jsx("p",{className:"text-sm max-w-md text-center",children:"Add coins to your watchlist to track them here. Click the star icon on any coin to add it to your watchlist."})]})}):i.jsx("div",{className:"col-span-full text-center py-8 text-gray-400","data-testid":"live-ticker-no-data",children:i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-accent-blue border-t-transparent rounded-full animate-spin"}),i.jsx("p",{children:"Loading live price data..."})]})})})]})})})}function tW({onCoinClick:t}){const{data:e,isLoading:n,refetch:r}=yk();ic();const[s,a]=p.useState(new Date),[o,l]=p.useState(new Set);p.useEffect(()=>{const h=setInterval(()=>{a(new Date),r()},1e3);return()=>clearInterval(h)},[r]);const[c,u]=p.useState(new Map);return p.useEffect(()=>{if(!e)return;const h=new Set,f=new Map;if(e.forEach(m=>{const y=c.get(m.id);f.set(m.id,m.current_price),y!==void 0&&y!==m.current_price&&h.add(m.id)}),u(f),l(h),h.size>0){const m=setTimeout(()=>{l(new Set)},1500);return()=>clearTimeout(m)}},[e==null?void 0:e.map(h=>`${h.id}:${h.current_price}`).join("|")]),i.jsx("div",{className:"liquid-bg border-b border-white/10 sticky top-0 z-40 w-full -mt-1","data-testid":"live-price-banner",children:i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"flex items-center px-4 py-3",children:i.jsx("div",{className:"flex-1 overflow-hidden",children:i.jsx("div",{className:"flex items-center space-x-4 animate-slide",children:n?Array.from({length:10}).map((h,f)=>i.jsxs("div",{className:"flex items-center space-x-2 min-w-max",children:[i.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full skeleton"}),i.jsx("div",{className:"w-12 sm:w-16 h-3 sm:h-4 skeleton rounded"})]},f)):e&&e.length>0?[...e.slice(0,10),...e.slice(0,10)].map((h,f)=>{const m=o.has(h.id);return i.jsxs("div",{className:q("flex items-center space-x-2 min-w-max cursor-pointer group transition-all duration-500 hover:bg-white/10 rounded-lg px-2 py-1",m&&h.price_change_percentage_24h>0&&"bg-green-500/20 border border-green-400/30 shadow-lg shadow-green-400/20",m&&h.price_change_percentage_24h<0&&"bg-red-500/20 border border-red-400/30 shadow-lg shadow-red-400/20"),onClick:()=>t==null?void 0:t(h.id),"data-testid":`banner-coin-${h.id}-${f}`,children:[i.jsx("img",{src:h.image,alt:h.name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full flex-shrink-0"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold text-white/90 whitespace-nowrap",children:h.symbol.toUpperCase()}),i.jsxs("span",{className:q("text-xs sm:text-sm font-bold transition-all duration-500 whitespace-nowrap",m&&h.price_change_percentage_24h>0&&"text-green-400 scale-110 drop-shadow-lg",m&&h.price_change_percentage_24h<0&&"text-red-400 scale-110 drop-shadow-lg",!m&&"text-white"),children:["$",typeof h.current_price=="number"?h.current_price.toLocaleString("en-US",{minimumFractionDigits:h.current_price>=1?2:6,maximumFractionDigits:h.current_price>=1?2:6}):"0.00"]})]},`${h.id}-${f}`)}):null})})})})})}var ww="Dialog",[AR,nK]=Hn(ww),[nW,Rr]=AR(ww),kR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,h]=Oi({prop:r,defaultProp:s,onChange:a});return i.jsx(nW,{scope:e,triggerRef:l,contentRef:c,contentId:qr(),titleId:qr(),descriptionId:qr(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};kR.displayName=ww;var RR="DialogTrigger",rW=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Rr(RR,n),a=Re(e,s.triggerRef);return i.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Nw(s.open),...r,ref:a,onClick:Y(t.onClick,s.onOpenToggle)})});rW.displayName=RR;var _w="DialogPortal",[sW,PR]=AR(_w,{forceMount:void 0}),DR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Rr(_w,e);return i.jsx(sW,{scope:e,forceMount:n,children:p.Children.map(r,o=>i.jsx(gn,{present:n||a.open,children:i.jsx(nd,{asChild:!0,container:s,children:o})}))})};DR.displayName=_w;var Yf="DialogOverlay",MR=p.forwardRef((t,e)=>{const n=PR(Yf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Rr(Yf,t.__scopeDialog);return a.modal?i.jsx(gn,{present:r||a.open,children:i.jsx(aW,{...s,ref:e})}):null});MR.displayName=Yf;var iW=$a("DialogOverlay.RemoveScroll"),aW=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Rr(Yf,n);return i.jsx(up,{as:iW,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(fe.div,{"data-state":Nw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ya="DialogContent",OR=p.forwardRef((t,e)=>{const n=PR(Ya,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Rr(Ya,t.__scopeDialog);return i.jsx(gn,{present:r||a.open,children:a.modal?i.jsx(oW,{...s,ref:e}):i.jsx(lW,{...s,ref:e})})});OR.displayName=Ya;var oW=p.forwardRef((t,e)=>{const n=Rr(Ya,t.__scopeDialog),r=p.useRef(null),s=Re(e,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return dw(a)},[]),i.jsx(LR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Y(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Y(t.onFocusOutside,a=>a.preventDefault())})}),lW=p.forwardRef((t,e)=>{const n=Rr(Ya,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(LR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),LR=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=Rr(Ya,n),c=p.useRef(null),u=Re(e,c);return uw(),i.jsxs(i.Fragment,{children:[i.jsx(ap,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(ql,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Nw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(cW,{titleId:l.titleId}),i.jsx(dW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),bw="DialogTitle",VR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Rr(bw,n);return i.jsx(fe.h2,{id:s.titleId,...r,ref:e})});VR.displayName=bw;var FR="DialogDescription",UR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Rr(FR,n);return i.jsx(fe.p,{id:s.descriptionId,...r,ref:e})});UR.displayName=FR;var $R="DialogClose",zR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Rr($R,n);return i.jsx(fe.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,()=>s.onOpenChange(!1))})});zR.displayName=$R;function Nw(t){return t?"open":"closed"}var BR="DialogTitleWarning",[rK,HR]=I3(BR,{contentName:Ya,titleName:bw,docsSlug:"dialog"}),cW=({titleId:t})=>{const e=HR(BR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},uW="DialogDescriptionWarning",dW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HR(uW).contentName}}.`;return p.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},hW=kR,fW=DR,WR=MR,qR=OR,KR=VR,GR=UR,mW=zR;const Gc=hW,pW=fW,QR=p.forwardRef(({className:t,...e},n)=>i.jsx(WR,{ref:n,className:q("fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));QR.displayName=WR.displayName;const Bo=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(pW,{children:[i.jsx(QR,{}),i.jsxs(qR,{ref:r,className:q("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(mW,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Zo,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bo.displayName=qR.displayName;const _a=({className:t,...e})=>i.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});_a.displayName="DialogHeader";const ba=p.forwardRef(({className:t,...e},n)=>i.jsx(KR,{ref:n,className:q("text-lg font-semibold leading-none tracking-tight",t),...e}));ba.displayName=KR.displayName;const mu=p.forwardRef(({className:t,...e},n)=>i.jsx(GR,{ref:n,className:q("text-sm text-muted-foreground",t),...e}));mu.displayName=GR.displayName;const gW=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let Bt=sessionStorage.getItem("app_session_id");Bt||(Bt=gW(),sessionStorage.setItem("app_session_id",Bt));const Ew=()=>{const{user:t}=Gs(),e=p.useRef(Date.now()),n=c=>(window.activityCache||(window.activityCache=new Set),window.activityCache.has(c)?!1:(window.activityCache.add(c),setTimeout(()=>{var u;(u=window.activityCache)==null||u.delete(c)},5e3),!0)),r=async(c,u)=>{if(!(t!=null&&t.uid)||!Bt)return;const h=`page_view_${t.uid}_${c}_${Bt}`;if(n(h))try{await fetch("/api/track/page-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.uid,sessionId:Bt,pageUrl:c,referrer:u||document.referrer,userAgent:navigator.userAgent})})}catch(f){console.error("Failed to track page view:",f)}},s=async(c,u,h)=>{if(!(t!=null&&t.uid)||!Bt)return;const f=`coin_view_${t.uid}_${c}_${Bt}`;if(n(f))try{await fetch("/api/track/coin-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.uid,sessionId:Bt,coinId:c,coinName:u,timeSpent:h,userAgent:navigator.userAgent})})}catch(m){console.error("Failed to track coin view:",m)}},a=async(c,u,h)=>{if(!(t!=null&&t.uid)||!Bt)return;const f=`chart_view_${t.uid}_${c}_${h}_${Bt}`;if(n(f))try{await fetch("/api/track/chart-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.uid,sessionId:Bt,coinId:c,coinName:u,timeframe:h,userAgent:navigator.userAgent})})}catch(m){console.error("Failed to track chart view:",m)}},o=async()=>{if(!(!(t!=null&&t.uid)||!Bt))try{await fetch("/api/track/session-start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.uid,sessionId:Bt,userAgent:navigator.userAgent,ipAddress:"unknown"})})}catch(c){console.error("Failed to start session:",c)}},l=async()=>{if(!Bt)return;const c=Math.floor((Date.now()-e.current)/1e3);try{await fetch("/api/track/session-end",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:Bt,duration:c})})}catch(u){console.error("Failed to end session:",u)}};return p.useEffect(()=>{t!=null&&t.uid&&(r(window.location.pathname),o())},[t==null?void 0:t.uid,window.location.pathname]),p.useEffect(()=>{const c=()=>{l()};return window.addEventListener("beforeunload",c),()=>{window.removeEventListener("beforeunload",c),l()}},[]),{trackPageView:r,trackCoinView:s,trackChartView:a,startSession:o,endSession:l,sessionId:Bt}},be=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));be.displayName="Card";const lt=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("flex flex-col space-y-1.5 p-6",t),...e}));lt.displayName="CardHeader";const ct=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("text-2xl font-semibold leading-none tracking-tight",t),...e}));ct.displayName="CardTitle";const Mr=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("text-sm text-muted-foreground",t),...e}));Mr.displayName="CardDescription";const Ie=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("p-6 pt-0",t),...e}));Ie.displayName="CardContent";const xW=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("flex items-center p-6 pt-0",t),...e}));xW.displayName="CardFooter";const yW=sd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $e({className:t,variant:e,...n}){return i.jsx("div",{className:q(yW({variant:e}),t),...n})}const NE=[{label:"15m",value:.01,interval:"hourly"},{label:"1H",value:.04,interval:"hourly"},{label:"4H",value:.17,interval:"hourly"},{label:"1D",value:1,interval:"daily"},{label:"7D",value:7,interval:"daily"},{label:"30D",value:30,interval:"daily"}],vW=[{label:"Line",value:"line",icon:jL},{label:"Area",value:"area",icon:Kl},{label:"Candle",value:"candle",icon:rr}];function Xf({coinId:t,coinName:e,currentPrice:n,priceChange24h:r}){const s=p.useRef(null),[a,o]=p.useState(1),[l,c]=p.useState("daily"),[u,h]=p.useState("area"),[f,m]=p.useState(null),[y,j]=p.useState(null),[w,N]=p.useState(null),{trackChartView:v}=Ew(),{data:x,isLoading:E,error:I,refetch:O}=xk(t,a,l);p.useEffect(()=>{const T=setInterval(()=>{O()},1e4);return()=>clearInterval(T)},[O]),p.useEffect(()=>{var T;if(t&&e){const S=((T=NE.find(P=>P.value===a))==null?void 0:T.label)||"unknown";v(t,e,`${S}-${u}`)}},[t,e,a,u,v]);const D=()=>{if(!(x!=null&&x.prices)||!s.current)return;const T=s.current,S=T.getContext("2d");if(!S)return;const P=window.devicePixelRatio||1,M=T.getBoundingClientRect();T.width=M.width*P,T.height=M.height*P,S.scale(P,P);const A={top:20,right:60,bottom:40,left:60},H=M.width-A.left-A.right,te=M.height-A.top-A.bottom;S.fillStyle="rgba(255, 255, 255, 0.02)",S.fillRect(0,0,M.width,M.height);const W=x.prices;if(W.length===0)return;const le=W.map(([,de])=>de),V=Math.min(...le),U=Math.max(...le),G=U-V,X=G*.1,oe=W[0][0],De=W[W.length-1][0]-oe,ke=de=>A.left+(de-oe)/De*H,ze=de=>A.top+(U+X-de)/(G+2*X)*te;S.strokeStyle="rgba(255, 255, 255, 0.1)",S.lineWidth=1;const re=8;for(let de=0;de<=re;de++){const xe=V-X+(G+2*X)*de/re,Je=ze(xe);S.beginPath(),S.moveTo(A.left,Je),S.lineTo(A.left+H,Je),S.stroke(),S.fillStyle="rgba(255, 255, 255, 0.7)",S.font="11px Inter, sans-serif",S.textAlign="right",S.fillText(`$${xe.toLocaleString(void 0,{maximumFractionDigits:2})}`,A.left-10,Je+3)}const Me=6;for(let de=0;de<=Me;de++){const xe=oe+De*de/Me,Je=ke(xe);S.beginPath(),S.moveTo(Je,A.top),S.lineTo(Je,A.top+te),S.stroke(),S.fillStyle="rgba(255, 255, 255, 0.7)",S.font="11px Inter, sans-serif",S.textAlign="center";const Dt=new Date(xe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",...a>=7?{month:"short",day:"numeric"}:{}});S.fillText(Dt,Je,A.top+te+20)}if(u==="area"){const de=S.createLinearGradient(0,A.top,0,A.top+te);de.addColorStop(0,"rgba(255, 255, 255, 0.3)"),de.addColorStop(1,"rgba(255, 255, 255, 0.05)"),S.beginPath(),S.moveTo(ke(W[0][0]),ze(W[0][1]));for(let xe=1;xe<W.length;xe++)S.lineTo(ke(W[xe][0]),ze(W[xe][1]));S.lineTo(ke(W[W.length-1][0]),A.top+te),S.lineTo(ke(W[0][0]),A.top+te),S.closePath(),S.fillStyle=de,S.fill()}S.strokeStyle=r>=0?"rgba(74, 222, 128, 0.9)":"rgba(248, 113, 113, 0.9)",S.lineWidth=2,S.lineCap="round",S.lineJoin="round",S.beginPath(),S.moveTo(ke(W[0][0]),ze(W[0][1]));for(let de=1;de<W.length;de++)S.lineTo(ke(W[de][0]),ze(W[de][1]));S.stroke();const ue=W[W.length-1][1],Se=ze(ue);S.fillStyle=r>=0?"rgba(74, 222, 128, 1)":"rgba(248, 113, 113, 1)",S.beginPath(),S.arc(ke(W[W.length-1][0]),Se,4,0,2*Math.PI),S.fill(),S.fillStyle="rgba(255, 255, 255, 0.95)",S.font="bold 12px Inter, sans-serif",S.textAlign="left",S.fillText(`$${ue.toLocaleString(void 0,{maximumFractionDigits:2})}`,A.left+H+10,Se+4),w&&f&&y&&(S.strokeStyle="rgba(255, 255, 255, 0.5)",S.lineWidth=1,S.setLineDash([5,5]),S.beginPath(),S.moveTo(w.x,A.top),S.lineTo(w.x,A.top+te),S.stroke(),S.beginPath(),S.moveTo(A.left,w.y),S.lineTo(A.left+H,w.y),S.stroke(),S.setLineDash([]))},C=T=>{if(!(x!=null&&x.prices)||!s.current)return;const P=s.current.getBoundingClientRect(),M=T.clientX-P.left,A=T.clientY-P.top,H={top:20,right:60,bottom:40,left:60},te=P.width-H.left-H.right;if(M>=H.left&&M<=H.left+te){const W=x.prices,le=W[W.length-1][0]-W[0][0],V=(M-H.left)/te,U=W[0][0]+le*V;let G=0,X=Math.abs(W[0][0]-U);for(let De=1;De<W.length;De++){const ke=Math.abs(W[De][0]-U);ke<X&&(X=ke,G=De)}const[oe,_e]=W[G];m(_e),j(new Date(oe).toLocaleString()),N({x:M,y:A})}},_=()=>{m(null),j(null),N(null)};return p.useEffect(()=>{D()},[x,u,w]),I?i.jsx(be,{className:"p-6 bg-white/5 backdrop-blur border-white/10",children:i.jsxs("div",{className:"text-center text-white/70",children:[i.jsx("p",{children:"Unable to load real market data"}),i.jsx("p",{className:"text-sm",children:"Please check your internet connection"})]})}):i.jsxs(be,{className:"overflow-hidden bg-white/5 backdrop-blur border-white/10",children:[i.jsxs("div",{className:"p-4 border-b border-white/10",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e," Price Chart"]}),i.jsxs($e,{variant:r>=0?"default":"destructive",className:"bg-white/10",children:[r>=0?i.jsx(ut,{size:12}):i.jsx(no,{size:12}),r.toFixed(2),"%"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",(f==null?void 0:f.toLocaleString(void 0,{maximumFractionDigits:2}))||n.toLocaleString(void 0,{maximumFractionDigits:2})]}),y&&i.jsx("div",{className:"text-sm text-white/70",children:y})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[i.jsx("div",{className:"flex flex-wrap gap-1",children:NE.map(({label:T,value:S,interval:P})=>i.jsx(Z,{variant:a===S?"default":"outline",size:"sm",onClick:()=>{o(S),c(P)},className:`
                  bg-white/10 border-white/20 text-white hover:bg-white/20 transition-all
                  ${a===S?"bg-white/30 shadow-lg":""}
                `,"data-testid":`timeframe-${T}`,children:T},T))}),i.jsx("div",{className:"flex gap-1",children:vW.map(({label:T,value:S,icon:P})=>i.jsxs(Z,{variant:u===S?"default":"outline",size:"sm",onClick:()=>h(S),className:`
                  bg-white/10 border-white/20 text-white hover:bg-white/20 transition-all
                  ${u===S?"bg-white/30 shadow-lg":""}
                `,"data-testid":`chart-type-${S}`,children:[i.jsx(P,{size:14}),i.jsx("span",{className:"hidden sm:inline ml-1",children:T})]},S))})]})]}),i.jsxs("div",{className:"relative",children:[E&&i.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-10",children:i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"})}),i.jsx("canvas",{ref:s,className:"w-full h-[400px] cursor-crosshair",onMouseMove:C,onMouseLeave:_,"data-testid":"price-chart-canvas"})]}),i.jsx("div",{className:"p-3 border-t border-white/10 bg-white/5",children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-white/60",children:"Volume 24h"}),i.jsx("div",{className:"text-white font-medium",children:"Real-time data"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white/60",children:"Market Cap"}),i.jsx("div",{className:"text-white font-medium",children:"Live updates"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white/60",children:"Data Source"}),i.jsx("div",{className:"text-white font-medium",children:"CoinGecko API"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white/60",children:"Update Frequency"}),i.jsx("div",{className:"text-white font-medium",children:"10 seconds"})]})]})})]})}function jw({coinId:t,isOpen:e,onClose:n}){const{data:r,isLoading:s}=A7(t),{data:a}=xk(t,30),{watchlist:o,toggleWatchlist:l}=ic(),c=f=>o.includes(f);if(!t||!e)return null;const u=f=>f>70?"bg-red-500 text-white":f<30?"bg-green-500 text-white":"bg-yellow-500 text-black",h=a?cw(a.prices.map(([f,m])=>m)):50;return i.jsx(Gc,{open:e,onOpenChange:n,children:i.jsxs(Bo,{className:"max-w-4xl max-h-[90vh] overflow-y-auto glass-card border-gray-700","data-testid":"coin-modal",children:[i.jsxs(_a,{className:"sr-only",children:[i.jsxs(ba,{children:[(r==null?void 0:r.name)||"Cryptocurrency"," Details"]}),i.jsxs(mu,{children:["Detailed information about ",(r==null?void 0:r.name)||"cryptocurrency"," including price charts, market data, and technical indicators."]})]}),s?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full skeleton"}),i.jsxs("div",{children:[i.jsx("div",{className:"w-32 h-6 skeleton rounded mb-2"}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]})]}),i.jsx(Z,{variant:"ghost",size:"icon",onClick:n,className:"text-gray-400 hover:text-white","data-testid":"close-modal",children:i.jsx(a1,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Array.from({length:3}).map((f,m)=>i.jsxs("div",{className:"glass-card rounded-lg p-4",children:[i.jsx("div",{className:"w-20 h-4 skeleton rounded mb-2"}),i.jsx("div",{className:"w-24 h-6 skeleton rounded"})]},m))}),i.jsx("div",{className:"h-64 skeleton rounded-lg"})]}):r?i.jsxs("div",{className:"p-6",children:[i.jsxs(_a,{className:"flex flex-row justify-between items-start mb-6",children:[i.jsx(ba,{asChild:!0,children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("img",{src:r.image.large,alt:r.name,className:"w-12 h-12 rounded-full","data-testid":"modal-coin-image"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold","data-testid":"modal-coin-name",children:r.name}),i.jsx("p",{className:"text-gray-400 uppercase text-sm","data-testid":"modal-coin-symbol",children:r.symbol})]})]})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[t&&i.jsx(Z,{size:"sm",variant:"ghost",className:"w-8 h-8 p-0",onClick:f=>{f.stopPropagation(),l(t)},"data-testid":`modal-watchlist-toggle-${t}`,children:i.jsx(Zr,{className:q("w-5 h-5",c(t)?"fill-yellow-400 text-yellow-400":"text-gray-400")})}),i.jsx(Z,{variant:"ghost",size:"icon",onClick:n,className:"text-gray-400 hover:text-white","data-testid":"close-modal",children:i.jsx(a1,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsxs(Qe,{className:"p-4",children:[i.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Price"}),i.jsx("p",{className:"text-2xl font-bold","data-testid":"modal-current-price",children:Ye(r.market_data.current_price.usd)})]}),i.jsxs(Qe,{className:"p-4",children:[i.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Market Cap"}),i.jsx("p",{className:"text-xl font-semibold","data-testid":"modal-market-cap",children:Ye(r.market_data.market_cap.usd)})]}),i.jsxs(Qe,{className:"p-4",children:[i.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"24h Volume"}),i.jsx("p",{className:"text-xl font-semibold","data-testid":"modal-volume",children:Ye(r.market_data.total_volume.usd)})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx(Xf,{coinId:t,coinName:r.name,currentPrice:r.market_data.current_price.usd,priceChange24h:r.market_data.price_change_percentage_24h})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"market-data-title",children:"Market Data"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"24h High"}),i.jsx("span",{"data-testid":"modal-high-24h",children:Ye(r.market_data.high_24h.usd)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"24h Low"}),i.jsx("span",{"data-testid":"modal-low-24h",children:Ye(r.market_data.low_24h.usd)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Circulating Supply"}),i.jsxs("span",{"data-testid":"modal-circulating-supply",children:[Qa(r.market_data.circulating_supply)," ",r.symbol.toUpperCase()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Total Supply"}),i.jsx("span",{"data-testid":"modal-total-supply",children:r.market_data.total_supply?`${Qa(r.market_data.total_supply)} ${r.symbol.toUpperCase()}`:"N/A"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"technical-indicators-title",children:"Technical Indicators"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"RSI (14)"}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u(h)}`,"data-testid":"modal-rsi",children:h.toFixed(1)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Market Rank"}),i.jsxs("span",{"data-testid":"modal-rank",children:["#",r.market_cap_rank]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"All Time High"}),i.jsx("span",{"data-testid":"modal-ath",children:Ye(r.market_data.ath.usd)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"ATH Date"}),i.jsx("span",{"data-testid":"modal-ath-date",children:new Date(r.market_data.ath_date.usd).toLocaleDateString()})]})]})]})]})]}):i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"text-gray-400","data-testid":"modal-error",children:"Failed to load coin details"})})]})})}function wW({onCoinClick:t}){const[e,n]=p.useState("trending"),[r,s]=p.useState(0),{data:a,isLoading:o,error:l}=ho(),{watchlist:c,toggleWatchlist:u,isInWatchlist:h}=ic(),f=6;if(o)return i.jsx(Qe,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex space-x-2",children:[1,2,3].map(I=>i.jsx("div",{className:"w-20 h-8 skeleton rounded"},I))}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((I,O)=>i.jsxs("div",{className:"p-4 border border-gray-700 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 skeleton rounded-full"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-20 h-4 skeleton rounded"}),i.jsx("div",{className:"w-16 h-3 skeleton rounded"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-24 h-5 skeleton rounded"}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]})]},O))})]})});if(l||!a)return i.jsx(Qe,{className:"p-6",children:i.jsx("div",{className:"text-center text-gray-400",children:i.jsx("p",{children:"Unable to load trending data"})})});const y=(()=>{switch(e){case"trending":return[...a].sort((I,O)=>O.total_volume*(1/O.market_cap_rank||1)-I.total_volume*(1/I.market_cap_rank||1));case"gainers":return[...a].filter(I=>I.price_change_percentage_24h>0).sort((I,O)=>O.price_change_percentage_24h-I.price_change_percentage_24h);case"losers":return[...a].filter(I=>I.price_change_percentage_24h<0).sort((I,O)=>I.price_change_percentage_24h-O.price_change_percentage_24h);default:return a}})(),j=Math.ceil(y.length/f),w=y.slice(r*f,(r+1)*f),N=I=>{n(I),s(0)},v=()=>{r<j-1&&s(r+1)},x=()=>{r>0&&s(r-1)},E=()=>{const O=[],D=[];for(let C=Math.max(2,r-2);C<=Math.min(j-1,r+2);C++)O.push(C);return r-2>2?D.push(1,"..."):D.push(1),D.push(...O),r+2<j-1?D.push("...",j):j>1&&D.push(j),D};return i.jsx("section",{className:"py-8 lg:py-12","data-testid":"trending-section",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs(Qe,{className:"backdrop-blur-xl bg-white/5 border border-white/10 shadow-2xl",children:[i.jsx("div",{className:"p-6 lg:p-8 border-b border-white/10",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-white via-blue-200 to-purple-200 bg-clip-text text-transparent",children:"Market Highlights"}),i.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Discover trending cryptocurrencies, top performers, and market movers in real-time"})]}),i.jsx("div",{className:"flex justify-center pt-4",children:i.jsx("div",{className:"glass-card bg-white/5 border border-white/20 rounded-2xl p-1.5 backdrop-blur-[25px]",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>N("trending"),className:q("px-4 py-2 rounded-xl font-medium transition-all duration-300 relative overflow-hidden",e==="trending"?"bg-gradient-to-r from-accent-blue to-blue-600 text-white shadow-lg shadow-blue-500/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-white/10"),"data-testid":"trending-tab",children:[i.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Trending"})]}),e==="trending"&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20 animate-pulse"})]}),i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>N("gainers"),className:q("px-4 py-2 rounded-xl font-medium transition-all duration-300 relative overflow-hidden",e==="gainers"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-white/10"),"data-testid":"gainers-tab",children:[i.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[i.jsx(ut,{className:"w-4 h-4"}),i.jsx("span",{children:"Top Gainers"})]}),e==="gainers"&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/20 to-emerald-600/20 animate-pulse"})]}),i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>N("losers"),className:q("px-4 py-2 rounded-xl font-medium transition-all duration-300 relative overflow-hidden",e==="losers"?"bg-gradient-to-r from-red-500 to-rose-600 text-white shadow-lg shadow-red-500/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-white/10"),"data-testid":"losers-tab",children:[i.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[i.jsx(no,{className:"w-4 h-4"}),i.jsx("span",{children:"Top Losers"})]}),e==="losers"&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/20 to-rose-600/20 animate-pulse"})]})]})})})]})}),i.jsxs("div",{className:"p-6 lg:p-8",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 lg:gap-6 mb-8",children:w.map((I,O)=>i.jsxs("div",{className:"group relative glass-card bg-white/5 backdrop-blur-[25px] border border-white/20 rounded-2xl p-5 lg:p-6 hover:border-accent-blue/40 hover:bg-white/10 transition-all duration-300 cursor-pointer hover:scale-[1.02] hover:shadow-xl hover:shadow-accent-blue/20 overflow-hidden",onClick:()=>t(I.id),"data-testid":`trending-coin-${I.id}`,children:[i.jsx("div",{className:"absolute top-3 right-3 w-7 h-7 bg-gradient-to-r from-accent-blue to-purple-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg z-10",children:r*f+O+1}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:I.image,alt:I.name,className:"w-12 h-12 lg:w-14 lg:h-14 rounded-full ring-2 ring-white/10 group-hover:ring-accent-blue/30 transition-all duration-300","data-testid":`trending-coin-image-${I.id}`}),i.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-white text-base lg:text-lg truncate group-hover:text-accent-blue transition-colors duration-300","data-testid":`trending-coin-name-${I.id}`,children:I.name}),i.jsx("p",{className:"text-sm text-gray-400 uppercase font-medium","data-testid":`trending-coin-symbol-${I.id}`,children:I.symbol})]})]}),i.jsx(Z,{size:"sm",variant:"ghost",className:"w-9 h-9 p-0 rounded-full hover:bg-white/10 transition-all duration-300",onClick:D=>{D.stopPropagation(),u(I.id)},"data-testid":`trending-watchlist-${I.id}`,children:i.jsx(Zr,{className:q("w-5 h-5 transition-all duration-300",h(I.id)?"fill-yellow-400 text-yellow-400 scale-110":"text-gray-400 hover:text-yellow-400 hover:scale-110")})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xl lg:text-2xl font-bold text-white group-hover:text-accent-blue transition-colors duration-300","data-testid":`trending-coin-price-${I.id}`,children:Ye(I.current_price)}),i.jsxs($e,{variant:"outline",className:q("px-3 py-1 text-sm font-medium border-2 transition-all duration-300",I.price_change_percentage_24h>=0?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 text-green-400 border-green-500/40 shadow-green-500/20":"bg-gradient-to-r from-red-500/20 to-rose-500/20 text-red-400 border-red-500/40 shadow-red-500/20"),"data-testid":`trending-coin-change-${I.id}`,children:[I.price_change_percentage_24h>=0?"+":"",wr(I.price_change_percentage_24h)]})]}),i.jsxs("div",{className:"space-y-2 pt-2 border-t border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Market Cap"}),i.jsx("span",{className:"text-sm font-semibold text-gray-200","data-testid":`trending-coin-mcap-${I.id}`,children:Ye(I.market_cap)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Volume 24h"}),i.jsx("span",{className:"text-sm font-semibold text-gray-200","data-testid":`trending-coin-volume-${I.id}`,children:Ye(I.total_volume)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Rank"}),i.jsxs("span",{className:"text-sm font-semibold text-gray-200",children:["#",I.market_cap_rank]})]})]})]}),i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-accent-blue/5 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]},I.id))}),j>1&&i.jsx("div",{className:"border-t border-white/10 pt-8",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-4 lg:space-y-0",children:[i.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-2",children:[i.jsx("span",{children:"Showing"}),i.jsxs("span",{className:"font-semibold text-white",children:[r*f+1,"-",Math.min((r+1)*f,y.length)]}),i.jsx("span",{children:"of"}),i.jsx("span",{className:"font-semibold text-white",children:y.length}),i.jsx("span",{children:"results"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[r>2&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>s(0),className:"glass-card bg-white/5 border-white/20 text-gray-300 hover:text-white hover:bg-white/10 transition-all duration-300",children:"First"}),i.jsx(c1,{className:"w-4 h-4 text-gray-500"})]}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:x,disabled:r===0,className:"glass-card bg-white/5 border-white/20 text-gray-300 hover:text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-300 flex items-center space-x-2","data-testid":"trending-prev-page",children:[i.jsx(Xv,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),i.jsx("div",{className:"flex space-x-1",children:E().map((I,O)=>i.jsx("div",{children:I==="..."?i.jsx("div",{className:"px-3 py-2 text-gray-500",children:"..."}):i.jsx(Z,{variant:r===I-1?"default":"outline",size:"sm",onClick:()=>s(I-1),className:q("w-10 h-10 p-0 transition-all duration-300",r===I-1?"bg-gradient-to-r from-accent-blue to-blue-600 text-white shadow-lg shadow-blue-500/25 scale-110":"glass-card bg-white/5 border-white/20 text-gray-300 hover:text-white hover:bg-white/10 hover:scale-105"),"data-testid":`trending-page-${I}`,children:I})},O))}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:v,disabled:r===j-1,className:"glass-card bg-white/5 border-white/20 text-gray-300 hover:text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-300 flex items-center space-x-2","data-testid":"trending-next-page",children:[i.jsx("span",{className:"hidden sm:inline",children:"Next"}),i.jsx(Cl,{className:"w-4 h-4"})]}),r<j-3&&i.jsxs(i.Fragment,{children:[i.jsx(c1,{className:"w-4 h-4 text-gray-500"}),i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>s(j-1),className:"glass-card bg-white/5 border-white/20 text-gray-300 hover:text-white hover:bg-white/10 transition-all duration-300",children:"Last"})]})]})]})})]})]})})})}const _W=()=>{const t=td(),[e,n]=p.useState(!1);return{forceRefresh:async()=>{n(!0);try{t.clear(),await t.refetchQueries({type:"active",exact:!1}),await t.invalidateQueries(),console.log(" Force refresh completed - all coin prices and data updated instantly!")}catch(s){console.error("Error during force refresh:",s)}finally{setTimeout(()=>n(!1),1e3)}},isRefreshing:e}};function bW(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),{forceRefresh:s,isRefreshing:a}=_W(),o=u=>{e(u),r(!0)},l=()=>{e(null),r(!1)},c=()=>{s()};return i.jsxs("div",{className:"min-h-screen gradient-bg","data-testid":"dashboard-page",children:[i.jsx(tW,{onCoinClick:o}),i.jsx("section",{className:"py-8","data-testid":"hero-section",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6",children:i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 bg-gradient-to-r from-accent-blue to-accent-green bg-clip-text text-transparent glow-text floating","data-testid":"hero-title",children:"Real-Time Crypto Dashboard"}),i.jsx("p",{className:"text-lg text-gray-300 fade-in","data-testid":"hero-subtitle",children:"Track live cryptocurrency prices and market movements"})]})})}),i.jsx("section",{className:"py-6","data-testid":"live-ticker-section",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Live Market Updates"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time price movements and market trends"})]}),i.jsx(eW,{onCoinClick:o})]})}),i.jsx("section",{className:"py-6","data-testid":"refresh-section",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6",children:i.jsxs("div",{className:"text-center",children:[i.jsxs(Z,{onClick:c,disabled:a,className:"glass-card bg-white/10 hover:bg-white/20 border-white/20 text-white px-8 py-3","data-testid":"global-refresh-button",children:[i.jsx(Il,{className:`w-5 h-5 mr-2 ${a?"animate-spin":""}`}),a?"Refreshing...":"Refresh All Data"]}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Update all coin prices and charts instantly"})]})})}),i.jsx(wW,{onCoinClick:o}),i.jsx("footer",{className:"mt-16 bg-gray-900/30 border-t border-white/10",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-accent-blue to-accent-green rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),i.jsx("span",{className:"text-xl font-bold text-white",children:"CryptoLiquid"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Real-time cryptocurrency market data and insights"}),i.jsxs("div",{className:"text-xs text-gray-500",children:[i.jsx("p",{children:"Market data provided by CoinGecko API"}),i.jsx("p",{className:"mt-1",children:" 2025 CryptoLiquid. Built with modern web technologies."})]})]})})}),i.jsx(jw,{coinId:t,isOpen:n,onClose:l})]})}function Fy(t,[e,n]){return Math.min(n,Math.max(e,t))}function YR(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var NW=[" ","Enter","ArrowUp","ArrowDown"],EW=[" ","Enter"],bd="Select",[fp,mp,jW]=vm(bd),[ac,sK]=Hn(bd,[jW,Xl]),pp=Xl(),[TW,ta]=ac(bd),[SW,CW]=ac(bd),XR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:y,form:j}=t,w=pp(e),[N,v]=p.useState(null),[x,E]=p.useState(null),[I,O]=p.useState(!1),D=vd(u),[C=!1,_]=Oi({prop:r,defaultProp:s,onChange:a}),[T,S]=Oi({prop:o,defaultProp:l,onChange:c}),P=p.useRef(null),M=N?j||!!N.closest("form"):!0,[A,H]=p.useState(new Set),te=Array.from(A).map(W=>W.props.value).join(";");return i.jsx(PC,{...w,children:i.jsxs(TW,{required:y,scope:e,trigger:N,onTriggerChange:v,valueNode:x,onValueNodeChange:E,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:qr(),value:T,onValueChange:S,open:C,onOpenChange:_,dir:D,triggerPointerDownPosRef:P,disabled:m,children:[i.jsx(fp.Provider,{scope:e,children:i.jsx(SW,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(W=>{H(le=>new Set(le).add(W))},[]),onNativeOptionRemove:p.useCallback(W=>{H(le=>{const V=new Set(le);return V.delete(W),V})},[]),children:n})}),M?i.jsxs(bP,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:W=>S(W.target.value),disabled:m,form:j,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(A)]},te):null]})})};XR.displayName=bd;var JR="SelectTrigger",ZR=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=pp(n),o=ta(JR,n),l=o.disabled||r,c=Re(e,o.onTriggerChange),u=mp(n),h=p.useRef("touch"),[f,m,y]=NP(w=>{const N=u().filter(E=>!E.disabled),v=N.find(E=>E.value===o.value),x=EP(N,w,v);x!==void 0&&o.onValueChange(x.value)}),j=w=>{l||(o.onOpenChange(!0),y()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(l0,{asChild:!0,...a,children:i.jsx(fe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_P(o.value)?"":void 0,...s,ref:c,onClick:Y(s.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&j(w)}),onPointerDown:Y(s.onPointerDown,w=>{h.current=w.pointerType;const N=w.target;N.hasPointerCapture(w.pointerId)&&N.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(j(w),w.preventDefault())}),onKeyDown:Y(s.onKeyDown,w=>{const N=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(N&&w.key===" ")&&NW.includes(w.key)&&(j(),w.preventDefault())})})})});ZR.displayName=JR;var eP="SelectValue",tP=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=ta(eP,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,f=Re(e,c.onValueNodeChange);return St(()=>{u(h)},[u,h]),i.jsx(fe.span,{...l,ref:f,style:{pointerEvents:"none"},children:_P(c.value)?i.jsx(i.Fragment,{children:o}):a})});tP.displayName=eP;var IW="SelectIcon",nP=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(fe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});nP.displayName=IW;var AW="SelectPortal",rP=t=>i.jsx(nd,{asChild:!0,...t});rP.displayName=AW;var Xa="SelectContent",sP=p.forwardRef((t,e)=>{const n=ta(Xa,t.__scopeSelect),[r,s]=p.useState();if(St(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?eo.createPortal(i.jsx(iP,{scope:t.__scopeSelect,children:i.jsx(fp.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(aP,{...t,ref:e})});sP.displayName=Xa;var dr=10,[iP,na]=ac(Xa),kW="SelectContentImpl",RW=$a("SelectContent.RemoveScroll"),aP=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:j,hideWhenDetached:w,avoidCollisions:N,...v}=t,x=ta(Xa,n),[E,I]=p.useState(null),[O,D]=p.useState(null),C=Re(e,re=>I(re)),[_,T]=p.useState(null),[S,P]=p.useState(null),M=mp(n),[A,H]=p.useState(!1),te=p.useRef(!1);p.useEffect(()=>{if(E)return dw(E)},[E]),uw();const W=p.useCallback(re=>{const[Me,...ue]=M().map(xe=>xe.ref.current),[Se]=ue.slice(-1),de=document.activeElement;for(const xe of re)if(xe===de||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===Me&&O&&(O.scrollTop=0),xe===Se&&O&&(O.scrollTop=O.scrollHeight),xe==null||xe.focus(),document.activeElement!==de))return},[M,O]),le=p.useCallback(()=>W([_,E]),[W,_,E]);p.useEffect(()=>{A&&le()},[A,le]);const{onOpenChange:V,triggerPointerDownPosRef:U}=x;p.useEffect(()=>{if(E){let re={x:0,y:0};const Me=Se=>{var de,xe;re={x:Math.abs(Math.round(Se.pageX)-(((de=U.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((xe=U.current)==null?void 0:xe.y)??0))}},ue=Se=>{re.x<=10&&re.y<=10?Se.preventDefault():E.contains(Se.target)||V(!1),document.removeEventListener("pointermove",Me),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",ue,{capture:!0})}}},[E,V,U]),p.useEffect(()=>{const re=()=>V(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[V]);const[G,X]=NP(re=>{const Me=M().filter(de=>!de.disabled),ue=Me.find(de=>de.ref.current===document.activeElement),Se=EP(Me,re,ue);Se&&setTimeout(()=>Se.ref.current.focus())}),oe=p.useCallback((re,Me,ue)=>{const Se=!te.current&&!ue;(x.value!==void 0&&x.value===Me||Se)&&(T(re),Se&&(te.current=!0))},[x.value]),_e=p.useCallback(()=>E==null?void 0:E.focus(),[E]),De=p.useCallback((re,Me,ue)=>{const Se=!te.current&&!ue;(x.value!==void 0&&x.value===Me||Se)&&P(re)},[x.value]),ke=r==="popper"?Uy:oP,ze=ke===Uy?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:j,hideWhenDetached:w,avoidCollisions:N}:{};return i.jsx(iP,{scope:n,content:E,viewport:O,onViewportChange:D,itemRefCallback:oe,selectedItem:_,onItemLeave:_e,itemTextRefCallback:De,focusSelectedItem:le,selectedItemText:S,position:r,isPositioned:A,searchRef:G,children:i.jsx(up,{as:RW,allowPinchZoom:!0,children:i.jsx(ap,{asChild:!0,trapped:x.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Y(s,re=>{var Me;(Me=x.trigger)==null||Me.focus({preventScroll:!0}),re.preventDefault()}),children:i.jsx(ql,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(ke,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:re=>re.preventDefault(),...v,...ze,onPlaced:()=>H(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Y(v.onKeyDown,re=>{const Me=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!Me&&re.key.length===1&&X(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Se=M().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const de=re.target,xe=Se.indexOf(de);Se=Se.slice(xe+1)}setTimeout(()=>W(Se)),re.preventDefault()}})})})})})})});aP.displayName=kW;var PW="SelectItemAlignedPosition",oP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=ta(Xa,n),o=na(Xa,n),[l,c]=p.useState(null),[u,h]=p.useState(null),f=Re(e,C=>h(C)),m=mp(n),y=p.useRef(!1),j=p.useRef(!0),{viewport:w,selectedItem:N,selectedItemText:v,focusSelectedItem:x}=o,E=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&N&&v){const C=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),S=v.getBoundingClientRect();if(a.dir!=="rtl"){const de=S.left-_.left,xe=T.left-de,Je=C.left-xe,Dt=C.width+Je,qn=Math.max(Dt,_.width),Pr=window.innerWidth-dr,os=Fy(xe,[dr,Math.max(dr,Pr-qn)]);l.style.minWidth=Dt+"px",l.style.left=os+"px"}else{const de=_.right-S.right,xe=window.innerWidth-T.right-de,Je=window.innerWidth-C.right-xe,Dt=C.width+Je,qn=Math.max(Dt,_.width),Pr=window.innerWidth-dr,os=Fy(xe,[dr,Math.max(dr,Pr-qn)]);l.style.minWidth=Dt+"px",l.style.right=os+"px"}const P=m(),M=window.innerHeight-dr*2,A=w.scrollHeight,H=window.getComputedStyle(u),te=parseInt(H.borderTopWidth,10),W=parseInt(H.paddingTop,10),le=parseInt(H.borderBottomWidth,10),V=parseInt(H.paddingBottom,10),U=te+W+A+V+le,G=Math.min(N.offsetHeight*5,U),X=window.getComputedStyle(w),oe=parseInt(X.paddingTop,10),_e=parseInt(X.paddingBottom,10),De=C.top+C.height/2-dr,ke=M-De,ze=N.offsetHeight/2,re=N.offsetTop+ze,Me=te+W+re,ue=U-Me;if(Me<=De){const de=P.length>0&&N===P[P.length-1].ref.current;l.style.bottom="0px";const xe=u.clientHeight-w.offsetTop-w.offsetHeight,Je=Math.max(ke,ze+(de?_e:0)+xe+le),Dt=Me+Je;l.style.height=Dt+"px"}else{const de=P.length>0&&N===P[0].ref.current;l.style.top="0px";const Je=Math.max(De,te+w.offsetTop+(de?oe:0)+ze)+ue;l.style.height=Je+"px",w.scrollTop=Me-De+w.offsetTop}l.style.margin=`${dr}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,N,v,a.dir,r]);St(()=>E(),[E]);const[I,O]=p.useState();St(()=>{u&&O(window.getComputedStyle(u).zIndex)},[u]);const D=p.useCallback(C=>{C&&j.current===!0&&(E(),x==null||x(),j.current=!1)},[E,x]);return i.jsx(MW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:i.jsx(fe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});oP.displayName=PW;var DW="SelectPopperPosition",Uy=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=dr,...a}=t,o=pp(n);return i.jsx(c0,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Uy.displayName=DW;var[MW,Tw]=ac(Xa,{}),$y="SelectViewport",lP=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=na($y,n),o=Tw($y,n),l=Re(e,a.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(fp.Slot,{scope:n,children:i.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Y(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const j=window.innerHeight-dr*2,w=parseFloat(f.style.minHeight),N=parseFloat(f.style.height),v=Math.max(w,N);if(v<j){const x=v+y,E=Math.min(j,x),I=x-E;f.style.height=E+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});lP.displayName=$y;var cP="SelectGroup",[OW,LW]=ac(cP),VW=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=qr();return i.jsx(OW,{scope:n,id:s,children:i.jsx(fe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});VW.displayName=cP;var uP="SelectLabel",dP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=LW(uP,n);return i.jsx(fe.div,{id:s.id,...r,ref:e})});dP.displayName=uP;var Jf="SelectItem",[FW,hP]=ac(Jf),fP=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=ta(Jf,n),c=na(Jf,n),u=l.value===r,[h,f]=p.useState(a??""),[m,y]=p.useState(!1),j=Re(e,x=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,x,r,s)}),w=qr(),N=p.useRef("touch"),v=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(FW,{scope:n,value:r,disabled:s,textId:w,isSelected:u,onItemTextChange:p.useCallback(x=>{f(E=>E||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(fp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:i.jsx(fe.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:j,onFocus:Y(o.onFocus,()=>y(!0)),onBlur:Y(o.onBlur,()=>y(!1)),onClick:Y(o.onClick,()=>{N.current!=="mouse"&&v()}),onPointerUp:Y(o.onPointerUp,()=>{N.current==="mouse"&&v()}),onPointerDown:Y(o.onPointerDown,x=>{N.current=x.pointerType}),onPointerMove:Y(o.onPointerMove,x=>{var E;N.current=x.pointerType,s?(E=c.onItemLeave)==null||E.call(c):N.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(o.onPointerLeave,x=>{var E;x.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:Y(o.onKeyDown,x=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&x.key===" "||(EW.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});fP.displayName=Jf;var Qc="SelectItemText",mP=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=ta(Qc,n),l=na(Qc,n),c=hP(Qc,n),u=CW(Qc,n),[h,f]=p.useState(null),m=Re(e,v=>f(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),y=h==null?void 0:h.textContent,j=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:w,onNativeOptionRemove:N}=u;return St(()=>(w(j),()=>N(j)),[w,N,j]),i.jsxs(i.Fragment,{children:[i.jsx(fe.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?eo.createPortal(a.children,o.valueNode):null]})});mP.displayName=Qc;var pP="SelectItemIndicator",gP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return hP(pP,n).isSelected?i.jsx(fe.span,{"aria-hidden":!0,...r,ref:e}):null});gP.displayName=pP;var zy="SelectScrollUpButton",xP=p.forwardRef((t,e)=>{const n=na(zy,t.__scopeSelect),r=Tw(zy,t.__scopeSelect),[s,a]=p.useState(!1),o=Re(e,r.onScrollButtonChange);return St(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(vP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});xP.displayName=zy;var By="SelectScrollDownButton",yP=p.forwardRef((t,e)=>{const n=na(By,t.__scopeSelect),r=Tw(By,t.__scopeSelect),[s,a]=p.useState(!1),o=Re(e,r.onScrollButtonChange);return St(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(vP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yP.displayName=By;var vP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=na("SelectScrollButton",n),o=p.useRef(null),l=mp(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),St(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(fe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Y(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Y(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Y(s.onPointerLeave,()=>{c()})})}),UW="SelectSeparator",wP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(fe.div,{"aria-hidden":!0,...r,ref:e})});wP.displayName=UW;var Hy="SelectArrow",$W=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pp(n),a=ta(Hy,n),o=na(Hy,n);return a.open&&o.position==="popper"?i.jsx(u0,{...s,...r,ref:e}):null});$W.displayName=Hy;function _P(t){return t===""||t===void 0}var bP=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),a=Re(e,s),o=YR(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),i.jsx(rd,{asChild:!0,children:i.jsx("select",{...r,ref:a,defaultValue:n})})});bP.displayName="BubbleSelect";function NP(t){const e=ot(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function EP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=zW(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function zW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var BW=XR,jP=ZR,HW=tP,WW=nP,qW=rP,TP=sP,KW=lP,SP=dP,CP=fP,GW=mP,QW=gP,IP=xP,AP=yP,kP=wP;const Ri=BW,Pi=HW,ks=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(jP,{ref:r,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(WW,{asChild:!0,children:i.jsx(XS,{className:"h-4 w-4 opacity-50"})})]}));ks.displayName=jP.displayName;const RP=p.forwardRef(({className:t,...e},n)=>i.jsx(IP,{ref:n,className:q("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(SL,{className:"h-4 w-4"})}));RP.displayName=IP.displayName;const PP=p.forwardRef(({className:t,...e},n)=>i.jsx(AP,{ref:n,className:q("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(XS,{className:"h-4 w-4"})}));PP.displayName=AP.displayName;const Rs=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(qW,{children:i.jsxs(TP,{ref:s,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(RP,{}),i.jsx(KW,{className:q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(PP,{})]})}));Rs.displayName=TP.displayName;const YW=p.forwardRef(({className:t,...e},n)=>i.jsx(SP,{ref:n,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));YW.displayName=SP.displayName;const Ne=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(CP,{ref:r,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(QW,{children:i.jsx(YS,{className:"h-4 w-4"})})}),i.jsx(GW,{children:e})]}));Ne.displayName=CP.displayName;const XW=p.forwardRef(({className:t,...e},n)=>i.jsx(kP,{ref:n,className:q("-mx-1 my-1 h-px bg-muted",t),...e}));XW.displayName=kP.displayName;const _h=20;function JW(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),[s,a]=p.useState("market_cap"),[o,l]=p.useState(""),[c,u]=p.useState(1),{data:h,isLoading:f}=ho(1,500),{isInWatchlist:m,toggleWatchlist:y}=ic();Ew();const j=(_,T)=>{e(_),r(!0)},w=()=>{e(null),r(!1)},N=_=>_>70?"bg-red-500 text-white":_<30?"bg-green-500 text-white":"bg-yellow-500 text-black",v=h==null?void 0:h.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())||_.symbol.toLowerCase().includes(o.toLowerCase())).sort((_,T)=>{switch(s){case"price":return T.current_price-_.current_price;case"volume":return T.total_volume-_.total_volume;case"change":return T.price_change_percentage_24h-_.price_change_percentage_24h;case"market_cap":default:return(T.market_cap||0)-(_.market_cap||0)}}),x=Math.ceil(((v==null?void 0:v.length)||0)/_h),E=(c-1)*_h,I=E+_h,O=v==null?void 0:v.slice(E,I),D=_=>{u(_),window.scrollTo({top:0,behavior:"smooth"})},C=()=>{const _=[];let S=Math.max(1,c-Math.floor(2.5)),P=Math.min(x,S+5-1);P-S+1<5&&(S=Math.max(1,P-5+1)),_.push(i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>D(c-1),disabled:c===1,className:"glass-card border-gray-600","data-testid":"pagination-prev",children:i.jsx(Xv,{className:"w-4 h-4"})},"prev"));for(let M=S;M<=P;M++)_.push(i.jsx(Z,{variant:c===M?"default":"outline",size:"sm",onClick:()=>D(M),className:c===M?"bg-accent-blue text-white":"glass-card border-gray-600","data-testid":`pagination-${M}`,children:M},M));return _.push(i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>D(c+1),disabled:c===x,className:"glass-card border-gray-600","data-testid":"pagination-next",children:i.jsx(Cl,{className:"w-4 h-4"})},"next")),_};return i.jsxs("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"enhanced-markets-page",children:[i.jsx("section",{className:"py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold","data-testid":"markets-title",children:"Cryptocurrency Markets"}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]}),i.jsx("p",{className:"text-gray-400","data-testid":"markets-subtitle",children:"Real-time market data for all cryptocurrencies with advanced filtering"})]}),i.jsxs(Qe,{className:"overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-700",children:i.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[i.jsxs("h2",{className:"text-xl font-bold","data-testid":"market-overview-title",children:["Market Overview (",(v==null?void 0:v.length)||0," coins)"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{placeholder:"Search coins...",value:o,onChange:_=>{l(_.target.value),u(1)},className:"glass-card pl-10 w-64 border-gray-600","data-testid":"markets-search"})]}),i.jsxs(Ri,{value:s,onValueChange:_=>a(_),children:[i.jsx(ks,{className:"glass-card w-48 border-gray-600","data-testid":"markets-sort",children:i.jsx(Pi,{})}),i.jsxs(Rs,{className:"glass-card border-gray-700",children:[i.jsx(Ne,{value:"market_cap",children:"Sort by Market Cap"}),i.jsx(Ne,{value:"price",children:"Sort by Price"}),i.jsx(Ne,{value:"volume",children:"Sort by Volume"}),i.jsx(Ne,{value:"change",children:"Sort by Change"})]})]})]})]})}),i.jsx("div",{className:"overflow-x-auto","data-testid":"markets-table",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-primary-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400 uppercase tracking-wider",children:"#"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Price"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"1h %"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"24h %"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"7d %"}),i.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Chart"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Market Cap"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Volume"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Supply"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400 uppercase tracking-wider",children:"RSI"}),i.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Watch"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-700",children:f?Array.from({length:_h}).map((_,T)=>i.jsxs("tr",{className:"hover:bg-primary-700","data-testid":`markets-skeleton-${T}`,children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("div",{className:"w-8 h-4 skeleton rounded"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full skeleton"}),i.jsxs("div",{children:[i.jsx("div",{className:"w-20 h-4 skeleton rounded mb-1"}),i.jsx("div",{className:"w-16 h-3 skeleton rounded"})]})]})}),Array.from({length:9}).map((S,P)=>i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:i.jsx("div",{className:"w-20 h-4 skeleton rounded ml-auto"})},P))]},T)):O&&O.length>0?O.map((_,T)=>{var M;const S=cw((M=_.sparkline_in_7d)==null?void 0:M.price),P=E+T+1;return i.jsxs("tr",{className:"transition-all duration-300 hover:bg-white/10 cursor-pointer hover:scale-[1.01] hover:shadow-lg backdrop-blur-sm",onClick:()=>j(_.id),"data-testid":`markets-row-${_.id}`,children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium","data-testid":`markets-rank-${_.id}`,children:_.market_cap_rank||P}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:_.image,alt:_.name,className:"w-10 h-10 rounded-full","data-testid":`markets-image-${_.id}`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-white","data-testid":`markets-name-${_.id}`,children:_.name}),i.jsx("div",{className:"text-sm text-gray-400 uppercase","data-testid":`markets-symbol-${_.id}`,children:_.symbol})]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[i.jsx("div",{className:"text-sm font-bold text-white","data-testid":`markets-price-${_.id}`,children:Ye(_.current_price)}),i.jsxs("div",{className:"text-xs text-gray-400",children:["$",_.current_price.toFixed(8)]})]}),i.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium ${(_.price_change_percentage_1h||0)>0?"text-green-400":"text-red-400"}`,"data-testid":`markets-change-1h-${_.id}`,children:_.price_change_percentage_1h?wr(_.price_change_percentage_1h):"N/A"}),i.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium ${_.price_change_percentage_24h>0?"text-green-400":"text-red-400"}`,"data-testid":`markets-change-24h-${_.id}`,children:i.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[_.price_change_percentage_24h>0?i.jsx(ut,{className:"w-4 h-4"}):i.jsx(no,{className:"w-4 h-4"}),i.jsx("span",{children:wr(_.price_change_percentage_24h)})]})}),i.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-right text-sm ${_.price_change_percentage_7d?_.price_change_percentage_7d>0?"text-green-400":"text-red-400":"text-gray-400"}`,"data-testid":`markets-change-7d-${_.id}`,children:_.price_change_percentage_7d?wr(_.price_change_percentage_7d):"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("div",{className:"w-20 h-10 mx-auto bg-slate-800/30 border border-slate-700 rounded flex items-center justify-center",children:i.jsx("span",{className:"text-xs text-slate-500 cursor-pointer hover:text-accent-blue",onClick:()=>j(_.id),children:"View Chart"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-white","data-testid":`markets-mcap-${_.id}`,children:Ye(_.market_cap)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-white","data-testid":`markets-volume-${_.id}`,children:Ye(_.total_volume)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-white","data-testid":`markets-supply-${_.id}`,children:[i.jsxs("div",{children:[Qa(_.circulating_supply)," ",_.symbol.toUpperCase()]}),_.max_supply&&i.jsxs("div",{className:"text-xs text-gray-400",children:["Max: ",Qa(_.max_supply)]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N(S)}`,"data-testid":`markets-rsi-${_.id}`,children:S.toFixed(1)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx(Z,{size:"sm",variant:"ghost",className:"w-8 h-8 p-0",onClick:A=>{A.stopPropagation(),y(_.id)},"data-testid":`watchlist-toggle-${_.id}`,children:i.jsx(Zr,{className:q("w-4 h-4",m(_.id)?"fill-yellow-400 text-yellow-400":"text-gray-400")})})})]},_.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"px-6 py-8 text-center text-gray-400","data-testid":"markets-no-data",children:o?"No coins found matching your search":"No market data available"})})})]})}),x>1&&i.jsx("div",{className:"p-6 border-t border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-400","data-testid":"pagination-info",children:["Showing ",E+1," to ",Math.min(I,(v==null?void 0:v.length)||0)," of ",(v==null?void 0:v.length)||0," results"]}),i.jsx("div",{className:"flex items-center space-x-2","data-testid":"pagination-controls",children:C()})]})})]})]})}),i.jsx(jw,{coinId:t,isOpen:n,onClose:w})]})}function ZW(){return i.jsx(JW,{})}const eq=[{label:"24H",days:1},{label:"7D",days:7},{label:"30D",days:30}];function tq(){var o,l,c;const[t,e]=p.useState(1),[n,r]=p.useState("bitcoin"),{data:s}=ho(),a=(s==null?void 0:s.slice(0,8))||[];return i.jsx(Qe,{className:"p-6",children:i.jsxs("div",{className:"flex flex-col space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Kl,{className:"w-5 h-5 text-accent-blue"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Market Charts"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(au,{className:"w-4 h-4 text-gray-400"}),i.jsx("div",{className:"flex space-x-1 bg-slate-800/50 rounded-lg p-1",children:eq.map(u=>i.jsx(Z,{variant:t===u.days?"default":"ghost",size:"sm",onClick:()=>e(u.days),className:`text-xs ${t===u.days?"bg-accent-blue text-white":"text-gray-400 hover:text-white hover:bg-slate-700"}`,children:u.label},u.days))})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(u=>i.jsxs(Z,{variant:n===u.id?"default":"outline",size:"sm",onClick:()=>r(u.id),className:`flex items-center space-x-2 ${n===u.id?"bg-accent-blue/20 border-accent-blue text-accent-blue":"border-gray-600 text-gray-300 hover:border-gray-500 hover:text-white"}`,children:[i.jsx("img",{src:u.image,alt:u.name,className:"w-4 h-4 rounded-full"}),i.jsx("span",{className:"font-medium",children:u.symbol.toUpperCase()}),i.jsxs("div",{className:"flex items-center space-x-1",children:[u.price_change_percentage_24h>0?i.jsx(ut,{className:"w-3 h-3 text-green-400"}):i.jsx(ut,{className:"w-3 h-3 text-red-400 rotate-180"}),i.jsxs("span",{className:`text-xs ${u.price_change_percentage_24h>0?"text-green-400":"text-red-400"}`,children:[Math.abs(u.price_change_percentage_24h).toFixed(1),"%"]})]})]},u.id))}),i.jsx("div",{className:"mt-6",children:i.jsx(Xf,{coinId:n,coinName:((o=a.find(u=>u.id===n))==null?void 0:o.name)||"Cryptocurrency",currentPrice:((l=a.find(u=>u.id===n))==null?void 0:l.current_price)||0,priceChange24h:((c=a.find(u=>u.id===n))==null?void 0:c.price_change_percentage_24h)||0})}),i.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),i.jsx("span",{children:"Price Increase"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),i.jsx("span",{children:"Price Decrease"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),i.jsx("span",{children:"Current Price"})]})]})]})})}function nq(){var o,l,c,u;const{data:t,isLoading:e}=ho(),{data:n}=ip(),r=(t==null?void 0:t.slice(0,10).map(h=>{var y;const f=h!=null&&h.current_price?cw([h.current_price]):50;let m="neutral";return f>70?m="overbought":f<30&&(m="oversold"),{symbol:((y=h==null?void 0:h.symbol)==null?void 0:y.toUpperCase())||"N/A",name:(h==null?void 0:h.name)||"Unknown",image:(h==null?void 0:h.image)||"",rsi:f,trend:m}}).filter(Boolean))||[],s=h=>h>70?"bg-red-500":h<30?"bg-green-500":"bg-yellow-500",a=h=>{switch(h){case"overbought":return"text-red-400";case"oversold":return"text-green-400";default:return"text-yellow-400"}};return i.jsx("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"analytics-page",children:i.jsx("section",{className:"py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold","data-testid":"analytics-title",children:"Market Analytics"}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10 ml-auto",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]}),i.jsx("p",{className:"text-gray-400","data-testid":"analytics-subtitle",children:"Advanced cryptocurrency market analysis and indicators"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(tq,{})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center","data-testid":"rsi-indicators-title",children:[i.jsx(rr,{className:"text-accent-blue mr-2"}),"RSI Indicators"]}),i.jsx("div",{className:"space-y-4","data-testid":"rsi-indicators-list",children:e?Array.from({length:10}).map((h,f)=>i.jsxs("div",{className:"flex items-center justify-between p-3 glass-card rounded-lg","data-testid":`rsi-skeleton-${f}`,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full skeleton"}),i.jsx("div",{className:"w-12 h-4 skeleton rounded"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 h-2 skeleton rounded"}),i.jsx("div",{className:"w-12 h-4 skeleton rounded"})]})]},f)):r.length>0?r.map(h=>i.jsxs("div",{className:"flex items-center justify-between p-3 glass-card rounded-lg hover:bg-primary-700 transition-colors","data-testid":`rsi-item-${h.symbol.toLowerCase()}`,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:h.image,alt:h.name,className:"w-8 h-8 rounded-full","data-testid":`rsi-image-${h.symbol.toLowerCase()}`}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium","data-testid":`rsi-symbol-${h.symbol.toLowerCase()}`,children:h.symbol}),i.jsx("div",{className:`text-xs ${a(h.trend)}`,"data-testid":`rsi-trend-${h.symbol.toLowerCase()}`,children:h.trend.charAt(0).toUpperCase()+h.trend.slice(1)})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2","data-testid":`rsi-bar-${h.symbol.toLowerCase()}`,children:i.jsx("div",{className:`h-2 rounded-full ${s(h.rsi)}`,style:{width:`${Math.min(h.rsi,100)}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12 text-right","data-testid":`rsi-value-${h.symbol.toLowerCase()}`,children:h.rsi.toFixed(1)})]})]},h.symbol)):i.jsx("div",{className:"text-center py-8 text-gray-400","data-testid":"rsi-no-data",children:"No RSI data available"})})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center","data-testid":"market-sentiment-title",children:[i.jsx(ut,{className:"text-accent-green mr-2"}),"Market Sentiment"]}),i.jsxs("div",{className:"space-y-6","data-testid":"market-sentiment-content",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"sentiment-distribution-title",children:"Sentiment Distribution"}),i.jsx("div",{className:"space-y-3",children:[{label:"Very Bullish",value:15,color:"bg-green-500"},{label:"Bullish",value:25,color:"bg-green-400"},{label:"Neutral",value:30,color:"bg-yellow-500"},{label:"Bearish",value:20,color:"bg-orange-500"},{label:"Very Bearish",value:10,color:"bg-red-500"}].map(h=>i.jsxs("div",{className:"flex items-center justify-between","data-testid":`sentiment-${h.label.toLowerCase().replace(/\s+/g,"-")}`,children:[i.jsx("span",{className:"text-sm text-gray-300",children:h.label}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full ${h.color}`,style:{width:`${h.value}%`}})}),i.jsxs("span",{className:"text-sm font-medium w-8 text-right",children:[h.value,"%"]})]})]},h.label))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"fear-greed-index-title",children:"Fear & Greed Index"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-red-500 to-green-500 mb-3",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:"45"})}),i.jsx("p",{className:"text-sm text-yellow-400",children:"Neutral"})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"market-overview-title",children:"Market Overview"}),i.jsx("div",{className:"h-64",children:i.jsx(Xf,{coinId:"bitcoin",coinName:"Bitcoin Market Overview",currentPrice:((o=t==null?void 0:t[0])==null?void 0:o.current_price)||0,priceChange24h:((l=t==null?void 0:t[0])==null?void 0:l.price_change_percentage_24h)||0})})]})]})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center","data-testid":"volume-analysis-title",children:[i.jsx(Kl,{className:"text-accent-blue mr-2"}),"Volume Analysis"]}),i.jsx("div",{className:"h-64",children:i.jsx(Xf,{coinId:"ethereum",coinName:"Ethereum Volume Analysis",currentPrice:((c=t==null?void 0:t[1])==null?void 0:c.current_price)||0,priceChange24h:((u=t==null?void 0:t[1])==null?void 0:u.price_change_percentage_24h)||0})}),i.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4","data-testid":"volume-stats",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Global 24h Volume"}),i.jsx("p",{className:"text-lg font-semibold","data-testid":"avg-daily-volume",children:n?Ye(n.totalVolume):"$0"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Volume Change"}),i.jsx("p",{className:`text-lg font-semibold ${((n==null?void 0:n.volumeChange24h)||0)>0?"text-green-400":"text-red-400"}`,"data-testid":"volume-change",children:n!=null&&n.volumeChange24h?`${n.volumeChange24h>0?"+":""}${n.volumeChange24h.toFixed(2)}%`:"N/A"})]})]})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center","data-testid":"advanced-metrics-title",children:[i.jsx(LL,{className:"text-accent-yellow mr-2"}),"Advanced Metrics"]}),i.jsxs("div",{className:"space-y-6","data-testid":"advanced-metrics-content",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"market-dominance-title",children:"Market Dominance"}),i.jsx("div",{className:"space-y-3",children:t==null?void 0:t.slice(0,3).map((h,f)=>{const m=["bg-orange-500","bg-blue-500","bg-purple-500"],y=h.market_cap/((n==null?void 0:n.totalMarketCap)||1)*100;return{name:h.name,symbol:h.symbol.toUpperCase(),dominance:Number(y.toFixed(1)),color:m[f]||"bg-gray-500"}}).map(h=>i.jsxs("div",{className:"flex items-center justify-between","data-testid":`dominance-${h.symbol.toLowerCase()}`,children:[i.jsx("span",{className:"text-sm font-medium",children:h.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full ${h.color}`,style:{width:`${h.dominance}%`}})}),i.jsxs("span",{className:"text-sm font-medium w-12 text-right",children:[h.dominance,"%"]})]})]},h.symbol))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4","data-testid":"key-indicators-title",children:"Key Indicators"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-3 glass-card rounded-lg","data-testid":"total-mcap-indicator",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Total MCap"}),i.jsx("p",{className:"text-sm font-semibold",children:n?Ye(n.totalMarketCap):"$0"})]}),i.jsxs("div",{className:"text-center p-3 glass-card rounded-lg","data-testid":"total-volume-indicator",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"24h Volume"}),i.jsx("p",{className:"text-sm font-semibold",children:n?Ye(n.totalVolume):"$0"})]}),i.jsxs("div",{className:"text-center p-3 glass-card rounded-lg","data-testid":"active-cryptos-indicator",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Active Cryptos"}),i.jsx("p",{className:"text-sm font-semibold",children:n?n.activeCryptos.toLocaleString():"0"})]}),i.jsxs("div",{className:"text-center p-3 glass-card rounded-lg","data-testid":"btc-dominance-indicator",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"BTC Dominance"}),i.jsx("p",{className:"text-sm font-semibold",children:n?`${n.btcDominance.toFixed(1)}%`:"0%"})]})]})]})]})]})]})]})})})}var Sw="Tabs",[rq,iK]=Hn(Sw,[lp]),DP=lp(),[sq,Cw]=rq(Sw),MP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=vd(l),[f,m]=Oi({prop:r,onChange:s,defaultProp:a});return i.jsx(sq,{scope:n,baseId:qr(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:i.jsx(fe.div,{dir:h,"data-orientation":o,...u,ref:e})})});MP.displayName=Sw;var OP="TabsList",LP=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=Cw(OP,n),o=DP(n);return i.jsx(Sk,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(fe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});LP.displayName=OP;var VP="TabsTrigger",FP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=Cw(VP,n),l=DP(n),c=zP(o.baseId,r),u=BP(o.baseId,r),h=r===o.value;return i.jsx(Ck,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(fe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:Y(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Y(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Y(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});FP.displayName=VP;var UP="TabsContent",$P=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=Cw(UP,n),c=zP(l.baseId,r),u=BP(l.baseId,r),h=r===l.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(gn,{present:s||h,children:({present:m})=>i.jsx(fe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});$P.displayName=UP;function zP(t,e){return`${t}-trigger-${e}`}function BP(t,e){return`${t}-content-${e}`}var iq=MP,HP=LP,WP=FP,qP=$P;const Iw=iq,gp=p.forwardRef(({className:t,...e},n)=>i.jsx(HP,{ref:n,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));gp.displayName=HP.displayName;const Xn=p.forwardRef(({className:t,...e},n)=>i.jsx(WP,{ref:n,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Xn.displayName=WP.displayName;const Jn=p.forwardRef(({className:t,...e},n)=>i.jsx(qP,{ref:n,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Jn.displayName=qP.displayName;function aq(){const[,t]=zv(),{user:e,loading:n}=Gs(),{toast:r}=to(),[s,a]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(""),[h,f]=p.useState(""),[m,y]=p.useState(!1);p.useEffect(()=>{!n&&e&&t("/")},[e,n]);const j=async N=>{if(N.preventDefault(),!s||!o){r({title:"Validation Error",description:"Please fill in all fields",variant:"destructive"});return}try{y(!0),await nw(s,o),r({title:"Welcome back!",description:"Successfully signed in"}),t("/")}catch(v){console.error("Email sign-in error:",v),r({title:"Sign-in Error",description:v.message||"Failed to sign in",variant:"destructive"})}finally{y(!1)}},w=async N=>{if(N.preventDefault(),!s||!o||!c||!h){r({title:"Validation Error",description:"Please fill in all fields",variant:"destructive"});return}if(o!==c){r({title:"Validation Error",description:"Passwords do not match",variant:"destructive"});return}if(o.length<6){r({title:"Validation Error",description:"Password must be at least 6 characters",variant:"destructive"});return}try{y(!0),await tw(s,o),r({title:"Account Created!",description:"Welcome to CryptoLiquid! Please check your email to verify your account."}),t("/")}catch(v){console.error("Email sign-up error:",v),r({title:"Sign-up Error",description:v.message||"Failed to create account",variant:"destructive"})}finally{y(!1)}};return n?i.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center","data-testid":"auth-loading",children:i.jsx("div",{className:"w-8 h-8 border-4 border-accent-blue border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4","data-testid":"auth-page",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-accent-blue to-accent-green rounded-lg flex items-center justify-center",children:i.jsx(ut,{className:"w-6 h-6 text-white"})}),i.jsx("span",{className:"text-2xl font-bold text-white",children:"CryptoLiquid"})]}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2","data-testid":"auth-title",children:"Welcome"}),i.jsx("p",{className:"text-gray-400","data-testid":"auth-subtitle",children:"Sign in to track your favorite cryptocurrencies"})]}),i.jsx("div",{className:"glass-card p-6 rounded-lg border border-gray-700",children:i.jsxs(Iw,{defaultValue:"signin",className:"w-full",children:[i.jsxs(gp,{className:"grid w-full grid-cols-2 glass-card border-gray-700 bg-primary-800/50",children:[i.jsx(Xn,{value:"signin","data-testid":"signin-tab",className:"data-[state=active]:bg-accent-blue/20 data-[state=active]:text-accent-blue text-gray-300",children:"Sign In"}),i.jsx(Xn,{value:"signup","data-testid":"signup-tab",className:"data-[state=active]:bg-accent-blue/20 data-[state=active]:text-accent-blue text-gray-300",children:"Sign Up"})]}),i.jsx(Jn,{value:"signin",className:"space-y-4 mt-6",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signin-email",className:"text-white",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Nf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signin-email",type:"email",placeholder:"Enter your email",value:s,onChange:N=>a(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signin-email-input"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signin-password",className:"text-white",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(xg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signin-password",type:"password",placeholder:"Enter your password",value:o,onChange:N=>l(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signin-password-input"})]})]}),i.jsx(Z,{type:"submit",className:"w-full bg-accent-blue hover:bg-accent-blue/90 text-white",disabled:m,"data-testid":"signin-email-button",children:m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Sign In"}),i.jsx(o1,{className:"w-4 h-4"})]})})]})}),i.jsx(Jn,{value:"signup",className:"space-y-4 mt-6",children:i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signup-name",className:"text-white",children:"Full Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signup-name",type:"text",placeholder:"Enter your full name",value:h,onChange:N=>f(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signup-name-input"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signup-email",className:"text-white",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Nf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signup-email",type:"email",placeholder:"Enter your email",value:s,onChange:N=>a(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signup-email-input"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signup-password",className:"text-white",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(xg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signup-password",type:"password",placeholder:"Create a password",value:o,onChange:N=>l(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signup-password-input"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"signup-confirm-password",className:"text-white",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(xg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx(ht,{id:"signup-confirm-password",type:"password",placeholder:"Confirm your password",value:c,onChange:N=>u(N.target.value),className:"glass-card border-gray-600 pl-10","data-testid":"signup-confirm-password-input"})]})]}),i.jsx(Z,{type:"submit",className:"w-full bg-accent-blue hover:bg-accent-blue/90 text-white",disabled:m,"data-testid":"signup-email-button",children:m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Creating account..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Create Account"}),i.jsx(o1,{className:"w-4 h-4"})]})})]})})]})}),i.jsx("div",{className:"text-center mt-6",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"By signing in, you agree to our terms of service and privacy policy"})})]})})}function oq(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:i.jsx(be,{className:"w-full max-w-md mx-4",children:i.jsxs(Ie,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(CL,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function lq(){const{data:t,isLoading:e,refetch:n}=ho(1,100),[r,s]=p.useState("24h"),[a,o]=p.useState("market_cap"),[l,c]=p.useState(new Date);p.useEffect(()=>{const v=setInterval(()=>{n(),c(new Date)},1e4);return()=>clearInterval(v)},[n]);const u=[{key:"1h",label:"1 Hour"},{key:"24h",label:"24 Hours"},{key:"7d",label:"7 Days"},{key:"30d",label:"30 Days"}],h=v=>v>10?"bg-green-500":v>5?"bg-green-400":v>2?"bg-green-300":v>0?"bg-green-200":v>-2?"bg-red-200":v>-5?"bg-red-300":v>-10?"bg-red-400":"bg-red-500",f=v=>{switch(r){case"1h":return v.price_change_percentage_1h||0;case"24h":return v.price_change_percentage_24h||0;case"7d":return v.price_change_percentage_7d||0;default:return v.price_change_percentage_24h||0}},m=()=>{if(!t)return[];let v=[...t];switch(a){case"market_cap":v.sort((x,E)=>E.market_cap-x.market_cap);break;case"volume":v.sort((x,E)=>(E.total_volume||0)-(x.total_volume||0));break;case"price":v.sort((x,E)=>E.current_price-x.current_price);break;case"change":v.sort((x,E)=>f(E)-f(x));break}return v},y=v=>Math.abs(v)>5?"text-white":"text-gray-900",j=(v,x)=>{const E=v/x;return E>.5?"w-32 h-24":E>.2?"w-28 h-20":E>.1?"w-24 h-16":E>.05?"w-20 h-14":"w-16 h-12"},w=m(),N=w.length>0?(()=>{switch(a){case"market_cap":return Math.max(...w.map(v=>v.market_cap));case"volume":return Math.max(...w.map(v=>v.total_volume||0));case"price":return Math.max(...w.map(v=>v.current_price));default:return Math.max(...w.map(v=>v.market_cap))}})():0;return i.jsx("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"heatmap-page",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-accent-blue to-accent-green bg-clip-text text-transparent",children:"Market Heatmap"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>{n(),c(new Date)},className:"flex items-center space-x-2 text-white hover:bg-white/10",disabled:e,children:[i.jsx(Il,{className:q("w-4 h-4",e&&"animate-spin")}),i.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-gray-300 text-lg",children:"Visualize cryptocurrency market performance at a glance"}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Last updated: ",l.toLocaleTimeString()]})]})]}),i.jsx(Qe,{className:"p-6 mb-8",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(eC,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Time Frame:"})]}),i.jsx("div",{className:"flex space-x-2",children:u.map(v=>i.jsx(Z,{variant:r===v.key?"default":"ghost",size:"sm",onClick:()=>s(v.key),className:q("text-xs",r===v.key?"bg-accent-blue text-white":"text-gray-400 hover:text-white"),children:v.label},v.key))})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_L,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Size by:"})]}),i.jsxs("select",{value:a,onChange:v=>o(v.target.value),className:"bg-primary-800 border border-gray-600 rounded px-3 py-1 text-sm text-white focus:outline-none focus:border-accent-blue",children:[i.jsx("option",{value:"market_cap",children:"Market Cap"}),i.jsx("option",{value:"volume",children:"Volume"}),i.jsx("option",{value:"price",children:"Price"}),i.jsx("option",{value:"change",children:"Price Change"})]})]})]})}),i.jsx(Qe,{className:"p-4 mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Performance:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"-10%+"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-red-300 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"-5%"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-red-200 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"0%"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-green-200 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"0%"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-green-300 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"+5%"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-400",children:"+10%+"})]})]})]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Size represents market capitalization"})]})}),i.jsx(Qe,{className:"p-6",children:e?i.jsx("div",{className:"flex justify-center items-center h-96",children:i.jsx("div",{className:"w-8 h-8 border-2 border-accent-blue border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:w.slice(0,100).map(v=>{const x=f(v),E=a==="market_cap"?v.market_cap:a==="volume"?v.total_volume||0:a==="price"?v.current_price:v.market_cap;return i.jsxs("div",{className:q("rounded-lg p-3 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-lg flex flex-col justify-between",h(x),j(E,N),y(x)),"data-testid":`heatmap-coin-${v.id}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-xs uppercase truncate",children:v.symbol}),i.jsxs("div",{className:"text-xs truncate opacity-80",children:["#",v.market_cap_rank]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-xs font-semibold",children:Ye(v.current_price)}),i.jsx("div",{className:"text-xs font-bold",children:wr(x)})]})]},v.id)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[i.jsxs(Qe,{className:"p-6 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(ut,{className:"w-6 h-6 text-green-400 mr-2"}),i.jsx("span",{className:"text-lg font-bold text-green-400",children:w.filter(v=>f(v)>0).length||0})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Gainers (",r,")"]})]}),i.jsxs(Qe,{className:"p-6 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(no,{className:"w-6 h-6 text-red-400 mr-2"}),i.jsx("span",{className:"text-lg font-bold text-red-400",children:w.filter(v=>f(v)<0).length||0})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Losers (",r,")"]})]}),i.jsxs(Qe,{className:"p-6 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(Kl,{className:"w-6 h-6 text-accent-blue mr-2"}),i.jsx("span",{className:"text-lg font-bold text-accent-blue",children:w.length||0})]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Total Coins"})]})]})]})})}function cq(){const{data:t,isLoading:e}=ip(),{data:n,isLoading:r}=ho(1,100);p.useState("market_cap");const a=(()=>{if(!n)return{sentiment:"neutral",score:50};const c=n.filter(f=>f.price_change_percentage_24h>0).length;n.filter(f=>f.price_change_percentage_24h<0).length;const u=n.length,h=c/u*100;return h>60?{sentiment:"bullish",score:Math.round(h)}:h<40?{sentiment:"bearish",score:Math.round(h)}:{sentiment:"neutral",score:Math.round(h)}})(),o=c=>{switch(c){case"bullish":return"text-green-400";case"bearish":return"text-red-400";default:return"text-yellow-400"}},l=c=>{switch(c){case"bullish":return"bg-green-400/20 border-green-400/30";case"bearish":return"bg-red-400/20 border-red-400/30";default:return"bg-yellow-400/20 border-yellow-400/30"}};return i.jsx("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"global-insights-page",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-accent-blue to-accent-green bg-clip-text text-transparent",children:"Global Market Insights"}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]}),i.jsx("p",{className:"text-gray-300 text-lg",children:"Comprehensive overview of the global cryptocurrency market"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs(Qe,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-accent-blue to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(ZS,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Market Cap"}),e?i.jsx("div",{className:"w-20 h-6 skeleton rounded"}):i.jsx("div",{className:"text-xl font-bold text-white",children:t?Ye(t.totalMarketCap):"N/A"})]})]}),!e&&t&&i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{className:q("text-sm font-semibold",t.marketCapChange24h>0?"text-green-400":"text-red-400"),children:[wr(t.marketCapChange24h)," (24h)"]})})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-accent-green to-yellow-500 rounded-lg flex items-center justify-center",children:i.jsx(rr,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"24h Volume"}),e?i.jsx("div",{className:"w-20 h-6 skeleton rounded"}):i.jsx("div",{className:"text-xl font-bold text-white",children:t?Ye(t.totalVolume):"N/A"})]})]}),!e&&t&&i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{className:q("text-sm font-semibold",t.volumeChange24h>0?"text-green-400":"text-red-400"),children:[wr(t.volumeChange24h)," (24h)"]})})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:i.jsx(Yn,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Active Coins"}),e?i.jsx("div",{className:"w-20 h-6 skeleton rounded"}):i.jsx("div",{className:"text-xl font-bold text-white",children:t?Qa(t.activeCryptos):"N/A"})]})]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Tracked globally"})]}),i.jsxs(Qe,{className:q("p-6 border",l(a.sentiment)),children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:i.jsx(bm,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Market Sentiment"}),i.jsx("div",{className:q("text-xl font-bold capitalize",o(a.sentiment)),children:a.sentiment})]})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[a.score,"% bullish signals"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[i.jsx(ut,{className:"w-5 h-5 text-green-400 mr-2"}),"Top Gainers (24h)"]}),r?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((c,u)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full skeleton"}),i.jsx("div",{className:"w-20 h-4 skeleton rounded"})]}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]},u))}):i.jsx("div",{className:"space-y-3",children:n==null?void 0:n.filter(c=>c.price_change_percentage_24h>0).sort((c,u)=>u.price_change_percentage_24h-c.price_change_percentage_24h).slice(0,5).map(c=>i.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:c.image,alt:c.name,className:"w-8 h-8 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:c.symbol.toUpperCase()}),i.jsx("div",{className:"text-sm text-gray-400",children:c.name})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-green-400",children:wr(c.price_change_percentage_24h)}),i.jsx("div",{className:"text-sm text-gray-400",children:Ye(c.current_price)})]})]},c.id))})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[i.jsx(no,{className:"w-5 h-5 text-red-400 mr-2"}),"Top Losers (24h)"]}),r?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((c,u)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full skeleton"}),i.jsx("div",{className:"w-20 h-4 skeleton rounded"})]}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]},u))}):i.jsx("div",{className:"space-y-3",children:n==null?void 0:n.filter(c=>c.price_change_percentage_24h<0).sort((c,u)=>c.price_change_percentage_24h-u.price_change_percentage_24h).slice(0,5).map(c=>i.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:c.image,alt:c.name,className:"w-8 h-8 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:c.symbol.toUpperCase()}),i.jsx("div",{className:"text-sm text-gray-400",children:c.name})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-red-400",children:wr(c.price_change_percentage_24h)}),i.jsx("div",{className:"text-sm text-gray-400",children:Ye(c.current_price)})]})]},c.id))})]})]}),i.jsxs(Qe,{className:"p-6",children:[i.jsxs("h3",{className:"text-lg font-bold mb-6 flex items-center",children:[i.jsx(rr,{className:"w-5 h-5 text-accent-blue mr-2"}),"Market Cap Distribution"]}),r?i.jsx("div",{className:"flex justify-center items-center h-40",children:i.jsx("div",{className:"w-8 h-8 border-2 border-accent-blue border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:n==null?void 0:n.slice(0,10).map((c,u)=>{const h=c.market_cap/((t==null?void 0:t.totalMarketCap)||1)*100;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("span",{className:"text-sm text-gray-400",children:["#",u+1]}),i.jsx("img",{src:c.image,alt:c.name,className:"w-6 h-6 rounded-full"}),i.jsx("span",{className:"font-semibold text-white",children:c.name}),i.jsxs("span",{className:"text-sm text-gray-400",children:["(",c.symbol.toUpperCase(),")"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-semibold text-white",children:[h.toFixed(2),"%"]}),i.jsx("div",{className:"text-xs text-gray-400",children:Ye(c.market_cap)})]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-accent-blue to-accent-green h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(h*2,100)}%`}})})]},c.id)})})]})]})})}const KP=p.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));KP.displayName="Textarea";var uq="Separator",EE="horizontal",dq=["horizontal","vertical"],GP=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=EE,...s}=t,a=hq(r)?r:EE,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(fe.div,{"data-orientation":a,...l,...s,ref:e})});GP.displayName=uq;function hq(t){return dq.includes(t)}var QP=GP;const Pa=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(QP,{ref:s,decorative:n,orientation:e,className:q("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Pa.displayName=QP.displayName;function fq(){var A,H,te,W,le;const{user:t}=Gs(),{data:e,isLoading:n,refetch:r}=lw(),{toast:s}=to(),a=p.useRef(null),[o,l]=p.useState(!1),[c,u]=p.useState("profile"),[h,f]=p.useState(!1),[m,y]=p.useState(!1),[j,w]=p.useState(!1),[N,v]=p.useState(!1),[x,E]=p.useState({displayName:"",bio:"",location:"",website:""}),[I,O]=p.useState({theme:"dark",currency:"USD",language:"en",notifications:{email:!0,push:!0,priceAlerts:!1},privacy:{profileVisible:!0,activityVisible:!0}}),[D,C]=p.useState({totalPortfolioValue:0,totalGainLoss:0,totalGainLossPercentage:0,favoriteCoins:[],tradingExperience:"beginner"});if(ms.useEffect(()=>{e&&(E({displayName:e.displayName||"",bio:e.bio||"",location:e.location||"",website:e.website||""}),e.preferences&&O(e.preferences),e.stats&&C(e.stats))},[e]),!t)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4",children:i.jsx(be,{className:"w-full max-w-md liquid-bg backdrop-blur-xl border border-white/10",children:i.jsxs(Ie,{className:"p-6 text-center",children:[i.jsx(Lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Sign In Required"}),i.jsx("p",{className:"text-gray-300",children:"Please sign in to view your profile."})]})})});const _=(V,U)=>{E(G=>({...G,[V]:U}))},T=async()=>{if(t){f(!0);try{await ok(t.uid,x),await r(),l(!1),s({title:"Profile Updated",description:"Your profile has been successfully updated."})}catch(V){console.error("Error updating profile:",V),s({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{f(!1)}}},S=async V=>{var G;const U=(G=V.target.files)==null?void 0:G[0];if(!(!U||!t)){if(U.size>5*1024*1024){s({title:"File Too Large",description:"Please choose an image smaller than 5MB.",variant:"destructive"});return}if(!U.type.startsWith("image/")){s({title:"Invalid File Type",description:"Please choose an image file.",variant:"destructive"});return}y(!0),w(!1);try{console.log("Starting avatar upload process...");const X=await lk(t.uid,U);console.log("Upload completed, URL:",X),w(!0),await r(),setTimeout(()=>{w(!1),s({title:" Avatar Updated!",description:"Your profile picture has been updated successfully and saved to database.",className:"border-green-500/50 bg-green-500/10"})},1e3)}catch(X){console.error("Error uploading avatar:",X),w(!1);const oe=X instanceof Error?X.message:"Unknown error occurred";s({title:"Upload Failed",description:`Failed to upload avatar: ${oe}. Please check your internet connection and try again.`,variant:"destructive"})}finally{y(!1)}}},P=async()=>{if(!(!t||!(e!=null&&e.avatarURL||e!=null&&e.photoURL)))try{await ck(t.uid),await r(),s({title:"Avatar Removed",description:"Your profile picture has been removed."})}catch(V){console.error("Error deleting avatar:",V),s({title:"Error",description:"Failed to remove avatar. Please try again.",variant:"destructive"})}},M=async()=>{if(t){v(!0);try{await hk(t.uid),s({title:"Verification Email Sent",description:"Please check your email inbox for the verification link."})}catch(V){console.error("Error resending verification email:",V);const U=V instanceof Error?V.message:"Failed to send verification email";s({title:"Error",description:U,variant:"destructive"})}finally{v(!1)}}};return n?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading profile..."})}):(e!=null&&e.createdAt&&new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsx(be,{className:"liquid-bg backdrop-blur-[25px] border border-white/20 shadow-[0_8px_32px_rgba(255,255,255,0.1)]",children:i.jsx(Ie,{className:"p-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:q("relative w-32 h-32 md:w-40 md:h-40 rounded-full transition-all duration-500 group cursor-pointer","bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-sm","border-4 border-white/30 shadow-[0_20px_40px_rgba(255,255,255,0.1)]","hover:scale-105 hover:shadow-[0_25px_50px_rgba(255,255,255,0.15)]",m?"border-accent-blue animate-pulse shadow-[0_20px_40px_rgba(0,255,255,0.3)]":"",j?"border-green-400 scale-110 shadow-[0_20px_40px_rgba(34,197,94,0.4)]":""),onClick:()=>{var V;return!m&&((V=a.current)==null?void 0:V.click())},children:[i.jsxs(Pn,{className:"w-full h-full",children:[i.jsx(tr,{src:(e==null?void 0:e.avatarURL)||(e==null?void 0:e.photoURL)||void 0,alt:(e==null?void 0:e.displayName)||"User Avatar",className:q("object-cover w-full h-full transition-all duration-500","group-hover:brightness-110",m?"opacity-60 blur-sm":"opacity-100")}),i.jsx(Dn,{className:q("w-full h-full bg-gradient-to-br from-accent-blue/20 to-purple-500/20","text-white text-3xl md:text-4xl font-bold transition-all duration-500","backdrop-blur-sm border border-white/20",m?"opacity-60":"opacity-100"),children:((e==null?void 0:e.displayName)||t.email||"U").charAt(0).toUpperCase()})]}),i.jsx("div",{className:q("absolute inset-0 rounded-full transition-all duration-300 pointer-events-none","bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100")})]}),m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full backdrop-blur-lg",children:i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(g1,{className:"w-8 h-8 text-accent-blue animate-bounce"}),i.jsx("div",{className:"absolute inset-0 animate-ping",children:i.jsx(g1,{className:"w-8 h-8 text-accent-blue opacity-30"})})]}),i.jsx("div",{className:"text-sm text-white font-medium",children:"Uploading..."}),i.jsx("div",{className:"w-16 h-2 bg-white/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-accent-blue to-purple-400 rounded-full animate-pulse w-full"})})]})}),j&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-500/30 rounded-full backdrop-blur-lg animate-in fade-in-0 zoom-in-95 duration-500",children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ys,{className:"w-12 h-12 text-green-400 animate-in zoom-in-50 duration-500"}),i.jsx("div",{className:"absolute inset-0 animate-ping",children:i.jsx(ys,{className:"w-12 h-12 text-green-400 opacity-20"})})]}),i.jsx("div",{className:"text-sm text-green-400 font-medium",children:"Success!"})]})})]}),i.jsxs("div",{className:"absolute -bottom-4 -right-4 flex gap-3",children:[i.jsx(Z,{size:"sm",variant:"outline",className:q("w-14 h-14 p-0 transition-all duration-300 rounded-full","backdrop-blur-lg border-2 shadow-lg hover:scale-110",m?"bg-accent-blue/30 border-accent-blue/60 animate-pulse shadow-[0_8px_24px_rgba(0,255,255,0.4)]":"bg-white/20 border-white/30 hover:bg-white/30 shadow-[0_8px_24px_rgba(255,255,255,0.2)]",j&&"bg-green-500/30 border-green-500/60 shadow-[0_8px_24px_rgba(34,197,94,0.4)]"),onClick:()=>{var V;return!m&&((V=a.current)==null?void 0:V.click())},disabled:m,children:m?i.jsx(h1,{className:"w-6 h-6 text-accent-blue animate-spin"}):j?i.jsx(ys,{className:"w-6 h-6 text-green-400"}):i.jsx(l1,{className:"w-6 h-6 text-white"})}),((e==null?void 0:e.avatarURL)||(e==null?void 0:e.photoURL))&&i.jsx(Z,{size:"sm",variant:"outline",className:q("w-14 h-14 p-0 rounded-full transition-all duration-300","bg-red-500/20 border-2 border-red-500/40 backdrop-blur-lg","hover:bg-red-500/30 hover:scale-110 shadow-[0_8px_24px_rgba(239,68,68,0.3)]"),onClick:P,children:i.jsx(Eo,{className:"w-6 h-6 text-red-400"})})]}),i.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:S,className:"hidden"})]}),i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:(e==null?void 0:e.displayName)||((A=t.email)==null?void 0:A.split("@")[0])||"User"}),(e==null?void 0:e.emailVerified)&&i.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[i.jsx(ys,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-300 mb-2",children:[i.jsx(Nf,{className:"w-4 h-4"}),i.jsx("span",{children:t.email}),!(e!=null&&e.emailVerified)&&i.jsxs(i.Fragment,{children:[i.jsx($e,{variant:"secondary",className:"bg-yellow-600/20 text-yellow-400 border-yellow-600/30 ml-2",children:"Unverified"}),i.jsx(Z,{size:"sm",variant:"outline",className:"bg-yellow-600/20 border-yellow-600/30 text-yellow-400 hover:bg-yellow-600/30 ml-2",onClick:M,disabled:N,"data-testid":"button-resend-verification",children:N?i.jsxs(i.Fragment,{children:[i.jsx(h1,{className:"w-3 h-3 mr-1 animate-spin"}),"Sending..."]}):"Resend Verification"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"liquid-bg backdrop-blur-[25px] rounded-2xl p-6 border border-white/25 shadow-[0_12px_40px_rgba(255,255,255,0.12)] relative overflow-hidden mb-4",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-blue/5 via-purple-500/3 to-accent-blue/5"}),i.jsx("div",{className:"absolute top-0 left-1/4 w-32 h-1 bg-gradient-to-r from-transparent via-accent-blue/40 to-transparent blur-sm"}),i.jsxs("div",{className:"relative flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-accent-blue to-purple-500 shadow-lg animate-pulse"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"Member Dashboard"})]}),i.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"Live Status"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(e==null?void 0:e.createdAt)&&i.jsx("div",{className:"group liquid-bg backdrop-blur-[20px] rounded-xl p-5 border border-white/20 hover:border-accent-blue/50 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent-blue/20 flex items-center justify-center group-hover:bg-accent-blue/30 transition-colors shadow-inner",children:i.jsx(au,{className:"w-6 h-6 text-accent-blue"})}),i.jsx("div",{className:"text-white font-semibold text-sm mb-1",children:"Member Since"}),i.jsx("div",{className:"text-gray-300 text-xs font-medium",children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",year:"2-digit"})})]})}),(e==null?void 0:e.lastLoginAt)&&i.jsx("div",{className:"group liquid-bg backdrop-blur-[20px] rounded-xl p-5 border border-white/20 hover:border-green-400/50 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-green-500/20 flex items-center justify-center group-hover:bg-green-500/30 transition-colors shadow-inner",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"})}),i.jsx("div",{className:"text-white font-semibold text-sm mb-1",children:"Active"}),i.jsx("div",{className:"text-gray-300 text-xs font-medium",children:new Date(e.lastLoginAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})}),(e==null?void 0:e.lastUpdated)&&i.jsx("div",{className:"group liquid-bg backdrop-blur-[20px] rounded-xl p-5 border border-white/20 hover:border-purple-400/50 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/30 transition-colors shadow-inner",children:i.jsx(Lt,{className:"w-6 h-6 text-purple-400"})}),i.jsx("div",{className:"text-white font-semibold text-sm mb-1",children:"Updated"}),i.jsx("div",{className:"text-gray-300 text-xs font-medium",children:new Date(e.lastUpdated).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})}),i.jsx("div",{className:"group liquid-bg backdrop-blur-[20px] rounded-xl p-5 border border-white/20 hover:border-amber-400/50 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/30 transition-colors shadow-inner",children:i.jsx(ut,{className:"w-6 h-6 text-amber-400"})}),i.jsx("div",{className:"text-white font-semibold text-sm mb-1",children:"Tracking"}),i.jsxs("div",{className:"text-gray-300 text-xs font-medium",children:[((H=e==null?void 0:e.watchlist)==null?void 0:H.length)||0," coins"]})]})})]}),i.jsx("div",{className:"liquid-bg backdrop-blur-[20px] rounded-xl p-4 border border-white/15 shadow-lg mt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-500/20 to-blue-500/20 flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-semibold text-sm",children:"Recent Activity"}),i.jsxs("div",{className:"text-gray-400 text-xs",children:[((te=e==null?void 0:e.activities)==null?void 0:te.length)||0," tracked actions"]})]})]}),i.jsx("div",{className:"text-gray-400 text-xs",children:"Live tracking enabled"})]})})]})]}),(e==null?void 0:e.bio)&&i.jsx("p",{className:"text-gray-300 max-w-md",children:e.bio}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[(e==null?void 0:e.location)&&i.jsxs($e,{variant:"outline",className:"border-white/20 text-gray-300",children:[i.jsx(kL,{className:"w-3 h-3 mr-1"}),e.location]}),(e==null?void 0:e.website)&&i.jsxs($e,{variant:"outline",className:"border-white/20 text-gray-300",children:[i.jsx(bm,{className:"w-3 h-3 mr-1"}),i.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-accent-blue transition-colors",children:"Website"})]}),i.jsxs($e,{variant:"outline",className:"border-accent-blue/30 text-accent-blue",children:[((W=e==null?void 0:e.watchlist)==null?void 0:W.length)||0," Coins Watched"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Z,{onClick:()=>l(!o),className:"bg-accent-blue hover:bg-accent-blue/80",children:o?"Cancel Edit":"Edit Profile"}),i.jsxs(Z,{variant:"outline",onClick:()=>u(c==="profile"?"preferences":"profile"),className:"border-white/20 text-gray-300 hover:bg-white/10",children:[i.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]})]})})}),i.jsxs(be,{className:"liquid-bg backdrop-blur-[30px] border-2 border-white/30 shadow-[0_16px_48px_rgba(255,255,255,0.15)] relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-radial from-accent-blue/10 to-transparent rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-gradient-radial from-purple-500/10 to-transparent rounded-full blur-2xl"}),i.jsxs(Ie,{className:"p-8 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-accent-blue/20 shadow-lg",children:i.jsx(ut,{className:"w-6 h-6 text-accent-blue"})}),"Recent Activity",i.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"})]}),i.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"Live Updates"})]}),i.jsxs("div",{className:"space-y-4",children:[e!=null&&e.activities&&e.activities.length>0?e.activities.map(V=>i.jsx("div",{className:"group bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-sm rounded-2xl p-5 border border-white/15 hover:border-white/30 transition-all duration-300 hover:scale-[1.01] shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow-lg ${V.type==="watchlist_add"?"bg-green-500/20 text-green-400":V.type==="watchlist_remove"?"bg-red-500/20 text-red-400":V.type==="profile_update"?"bg-blue-500/20 text-blue-400":V.type==="avatar_upload"?"bg-purple-500/20 text-purple-400":"bg-accent-blue/20 text-accent-blue"}`,children:[V.type==="watchlist_add"&&i.jsx(ut,{className:"w-5 h-5"}),V.type==="watchlist_remove"&&i.jsx(ut,{className:"w-5 h-5 rotate-180"}),V.type==="profile_update"&&i.jsx(Lt,{className:"w-5 h-5"}),V.type==="avatar_upload"&&i.jsx(l1,{className:"w-5 h-5"}),!["watchlist_add","watchlist_remove","profile_update","avatar_upload"].includes(V.type)&&i.jsx(au,{className:"w-5 h-5"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-white font-semibold text-lg group-hover:text-accent-blue transition-colors",children:V.description}),i.jsx("div",{className:"text-gray-300 text-sm mt-1",children:new Date(V.timestamp).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.jsx("div",{className:"text-gray-400 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:new Date(V.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})},V.id)):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"group bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-sm rounded-2xl p-5 border border-white/15 hover:border-white/30 transition-all duration-300 shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 shadow-lg",children:i.jsx(au,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-white font-semibold text-lg",children:"Welcome to CryptoLiquid!"}),i.jsx("div",{className:"text-gray-300 text-sm mt-1",children:"Your crypto journey begins now. Start by adding coins to your watchlist."})]})]})}),(e==null?void 0:e.watchlist)&&e.watchlist.length>0&&i.jsx("div",{className:"group bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-sm rounded-2xl p-5 border border-white/15 hover:border-white/30 transition-all duration-300 shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-blue/20 flex items-center justify-center text-accent-blue shadow-lg",children:i.jsx(ut,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-white font-semibold text-lg",children:["Added ",e.watchlist.length," coins to watchlist"]}),i.jsx("div",{className:"text-gray-300 text-sm mt-1",children:"Keep tracking your favorite cryptocurrencies"})]})]})}),(e==null?void 0:e.bio)&&i.jsx("div",{className:"group bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-sm rounded-2xl p-5 border border-white/15 hover:border-white/30 transition-all duration-300 shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 shadow-lg",children:i.jsx(Lt,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-white font-semibold text-lg",children:"Profile personalized"}),i.jsx("div",{className:"text-gray-300 text-sm mt-1",children:"Bio added to complete your profile"})]})]})})]}),(!(e!=null&&e.activities)||e.activities.length===0)&&(!(e!=null&&e.watchlist)||e.watchlist.length===0)&&!(e!=null&&e.bio)&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-500/20 flex items-center justify-center",children:i.jsx(ut,{className:"w-8 h-8 text-gray-400"})}),i.jsx("div",{className:"text-gray-400 text-lg font-medium mb-2",children:"No recent activity"}),i.jsx("div",{className:"text-gray-500 text-sm",children:"Start exploring and your activities will appear here!"})]})]})]})]}),i.jsx(be,{className:"liquid-bg backdrop-blur-[25px] border border-white/20 shadow-[0_8px_32px_rgba(255,255,255,0.1)]",children:i.jsx(Ie,{className:"p-0",children:i.jsxs("div",{className:"flex border-b border-white/10",children:[i.jsxs("button",{onClick:()=>u("profile"),className:q("flex-1 px-6 py-4 text-sm font-medium transition-colors",c==="profile"?"border-b-2 border-accent-blue text-accent-blue bg-accent-blue/10":"text-gray-400 hover:text-gray-300"),children:[i.jsx(Lt,{className:"w-4 h-4 mr-2 inline-block"}),"Profile"]}),i.jsxs("button",{onClick:()=>u("preferences"),className:q("flex-1 px-6 py-4 text-sm font-medium transition-colors",c==="preferences"?"border-b-2 border-accent-blue text-accent-blue bg-accent-blue/10":"text-gray-400 hover:text-gray-300"),children:[i.jsx(Jo,{className:"w-4 h-4 mr-2 inline-block"}),"Preferences"]}),i.jsxs("button",{onClick:()=>u("stats"),className:q("flex-1 px-6 py-4 text-sm font-medium transition-colors",c==="stats"?"border-b-2 border-accent-blue text-accent-blue bg-accent-blue/10":"text-gray-400 hover:text-gray-300"),children:[i.jsx(ut,{className:"w-4 h-4 mr-2 inline-block"}),"Trading Stats"]})]})})}),o&&c==="profile"&&i.jsxs(be,{className:"liquid-bg backdrop-blur-xl border border-white/10",children:[i.jsx(lt,{children:i.jsxs(ct,{className:"text-white flex items-center gap-2",children:[i.jsx(Lt,{className:"w-5 h-5"}),"Edit Profile Information"]})}),i.jsxs(Ie,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"displayName",className:"text-gray-300",children:"Display Name"}),i.jsx(ht,{id:"displayName",value:x.displayName,onChange:V=>_("displayName",V.target.value),placeholder:"Your display name",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"location",className:"text-gray-300",children:"Location"}),i.jsx(ht,{id:"location",value:x.location,onChange:V=>_("location",V.target.value),placeholder:"City, Country",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-400"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"website",className:"text-gray-300",children:"Website"}),i.jsx(ht,{id:"website",value:x.website,onChange:V=>_("website",V.target.value),placeholder:"https://your-website.com",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ae,{htmlFor:"bio",className:"text-gray-300",children:"Bio"}),i.jsx(KP,{id:"bio",value:x.bio,onChange:V=>_("bio",V.target.value),placeholder:"Tell us about yourself...",rows:4,className:"bg-white/5 border-white/10 text-white placeholder:text-gray-400 resize-none"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(Z,{onClick:T,disabled:h,className:"bg-accent-blue hover:bg-accent-blue/80",children:[i.jsx(ML,{className:"w-4 h-4 mr-2"}),h?"Saving...":"Save Changes"]}),i.jsx(Z,{variant:"outline",onClick:()=>l(!1),className:"border-white/20 text-gray-300 hover:bg-white/10",children:"Cancel"})]})]})]}),c==="preferences"&&i.jsxs(be,{className:"liquid-bg backdrop-blur-xl border border-white/10",children:[i.jsx(lt,{children:i.jsxs(ct,{className:"text-white flex items-center gap-2",children:[i.jsx(Jo,{className:"w-5 h-5"}),"Preferences & Settings"]})}),i.jsxs(Ie,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(PL,{className:"w-4 h-4 text-accent-blue"}),i.jsx("h3",{className:"text-white font-medium",children:"Theme & Display"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Theme"}),i.jsxs("select",{value:I.theme,onChange:V=>O({...I,theme:V.target.value}),className:"w-full mt-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"dark",children:"Dark"}),i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"auto",children:"Auto"})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Currency"}),i.jsxs("select",{value:I.currency,onChange:V=>O({...I,currency:V.target.value}),className:"w-full mt-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"USD",children:"USD - US Dollar"}),i.jsx("option",{value:"EUR",children:"EUR - Euro"}),i.jsx("option",{value:"GBP",children:"GBP - British Pound"}),i.jsx("option",{value:"BTC",children:"BTC - Bitcoin"}),i.jsx("option",{value:"ETH",children:"ETH - Ethereum"})]})]})]})]}),i.jsx(Pa,{className:"bg-white/10"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(NL,{className:"w-4 h-4 text-accent-blue"}),i.jsx("h3",{className:"text-white font-medium",children:"Notifications"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Email Notifications"}),i.jsx("input",{type:"checkbox",checked:I.notifications.email,onChange:V=>O({...I,notifications:{...I.notifications,email:V.target.checked}}),className:"w-4 h-4 text-accent-blue bg-white/5 border border-white/10 rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Push Notifications"}),i.jsx("input",{type:"checkbox",checked:I.notifications.push,onChange:V=>O({...I,notifications:{...I.notifications,push:V.target.checked}}),className:"w-4 h-4 text-accent-blue bg-white/5 border border-white/10 rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Price Alerts"}),i.jsx("input",{type:"checkbox",checked:I.notifications.priceAlerts,onChange:V=>O({...I,notifications:{...I.notifications,priceAlerts:V.target.checked}}),className:"w-4 h-4 text-accent-blue bg-white/5 border border-white/10 rounded"})]})]})]}),i.jsx(Pa,{className:"bg-white/10"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ya,{className:"w-4 h-4 text-accent-blue"}),i.jsx("h3",{className:"text-white font-medium",children:"Privacy"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Profile Visible to Others"}),i.jsx("input",{type:"checkbox",checked:I.privacy.profileVisible,onChange:V=>O({...I,privacy:{...I.privacy,profileVisible:V.target.checked}}),className:"w-4 h-4 text-accent-blue bg-white/5 border border-white/10 rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Trading Activity Visible"}),i.jsx("input",{type:"checkbox",checked:I.privacy.activityVisible,onChange:V=>O({...I,privacy:{...I.privacy,activityVisible:V.target.checked}}),className:"w-4 h-4 text-accent-blue bg-white/5 border border-white/10 rounded"})]})]})]}),i.jsx(Z,{onClick:async()=>{if(t)try{f(!0),await uk(t.uid,I),await r(),s({title:"Preferences Updated",description:"Your preferences have been saved successfully."})}catch{s({title:"Error",description:"Failed to update preferences. Please try again.",variant:"destructive"})}finally{f(!1)}},disabled:h,className:"w-full bg-accent-blue hover:bg-accent-blue/80",children:h?"Saving...":"Save Preferences"})]})]}),c==="stats"&&i.jsxs(be,{className:"liquid-bg backdrop-blur-xl border border-white/10",children:[i.jsx(lt,{children:i.jsxs(ct,{className:"text-white flex items-center gap-2",children:[i.jsx(ut,{className:"w-5 h-5"}),"Trading Statistics"]})}),i.jsxs(Ie,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ZS,{className:"w-4 h-4 text-accent-blue"}),i.jsx("h3",{className:"text-white font-medium",children:"Portfolio Overview"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Total Portfolio Value"}),i.jsx(ht,{type:"number",step:"0.01",value:D.totalPortfolioValue,onChange:V=>C({...D,totalPortfolioValue:parseFloat(V.target.value)||0}),placeholder:"0.00",className:"mt-1 bg-white/5 border-white/10 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Total Gain/Loss ($)"}),i.jsx(ht,{type:"number",step:"0.01",value:D.totalGainLoss,onChange:V=>C({...D,totalGainLoss:parseFloat(V.target.value)||0}),placeholder:"0.00",className:"mt-1 bg-white/5 border-white/10 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Total Gain/Loss (%)"}),i.jsx(ht,{type:"number",step:"0.01",value:D.totalGainLossPercentage,onChange:V=>C({...D,totalGainLossPercentage:parseFloat(V.target.value)||0}),placeholder:"0.00",className:"mt-1 bg-white/5 border-white/10 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Trading Experience"}),i.jsxs("select",{value:D.tradingExperience,onChange:V=>C({...D,tradingExperience:V.target.value}),className:"w-full mt-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white",children:[i.jsx("option",{value:"beginner",children:"Beginner"}),i.jsx("option",{value:"intermediate",children:"Intermediate"}),i.jsx("option",{value:"advanced",children:"Advanced"}),i.jsx("option",{value:"expert",children:"Expert"})]})]})]})]}),i.jsx(Pa,{className:"bg-white/10"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ut,{className:"w-4 h-4 text-accent-blue"}),i.jsx("h3",{className:"text-white font-medium",children:"Favorite Coins"})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Coin Symbols (comma-separated)"}),i.jsx(ht,{value:D.favoriteCoins.join(", "),onChange:V=>C({...D,favoriteCoins:V.target.value.split(",").map(U=>U.trim()).filter(U=>U.length>0)}),placeholder:"BTC, ETH, ADA, SOL",className:"mt-1 bg-white/5 border-white/10 text-white"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter your favorite cryptocurrency symbols separated by commas"})]})]}),i.jsx(Z,{onClick:async()=>{if(t)try{f(!0),await dk(t.uid,D),await r(),s({title:"Stats Updated",description:"Your trading statistics have been saved successfully."})}catch{s({title:"Error",description:"Failed to update stats. Please try again.",variant:"destructive"})}finally{f(!1)}},disabled:h,className:"w-full bg-accent-blue hover:bg-accent-blue/80",children:h?"Saving...":"Save Trading Stats"})]})]}),c==="profile"&&i.jsxs(be,{className:"liquid-bg backdrop-blur-xl border border-white/10",children:[i.jsx(lt,{children:i.jsx(ct,{className:"text-white",children:"Account Statistics"})}),i.jsx(Ie,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:((le=e==null?void 0:e.watchlist)==null?void 0:le.length)||0}),i.jsx("div",{className:"text-gray-400",children:"Coins Watched"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-accent-purple",children:e!=null&&e.lastLoginAt?"Active":"New"}),i.jsx("div",{className:"text-gray-400",children:"Account Status"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e!=null&&e.createdAt?new Date(e.createdAt).getFullYear():new Date().getFullYear()}),i.jsx("div",{className:"text-gray-400",children:"Member Since"})]})]})})]})]})}))}function mq(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),[s,a]=p.useState([]),{user:o}=Gs(),{watchlist:l,isLoading:c,toggleWatchlist:u}=ic();p.useEffect(()=>{if(o)try{const N=localStorage.getItem(`crypto_watchlist_${o.uid}`);if(N){const v=JSON.parse(N);a(v)}}catch(N){console.error("Error reading from localStorage:",N)}},[o]);const h=l&&l.length>0?l:s,{data:f,isLoading:m}=Vt({queryKey:["watchlist-coins",h],queryFn:async()=>h.length===0?[]:(await yd.getCoins(1,500)).filter(v=>h.includes(v.id)),enabled:h.length>0}),y=N=>{e(N),r(!0)},j=()=>{e(null),r(!1)};if(!o)return i.jsx("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"watchlist-page",children:i.jsx("section",{className:"py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold","data-testid":"watchlist-title",children:"My Watchlist"}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]}),i.jsx("p",{className:"text-gray-400","data-testid":"watchlist-subtitle",children:"Track your favorite cryptocurrencies"})]}),i.jsxs(Qe,{className:"p-12 text-center",children:[i.jsx(Zr,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Sign in to create your watchlist"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Keep track of your favorite cryptocurrencies and get personalized insights"}),i.jsx(bn,{href:"/auth",children:i.jsx(Z,{className:"bg-accent-blue hover:bg-accent-blue/90 text-white","data-testid":"sign-in-watchlist",children:"Sign In to Continue"})})]})]})})});const w=c||m;return i.jsxs("div",{className:"min-h-screen gradient-bg pt-16","data-testid":"watchlist-page",children:[i.jsx("section",{className:"py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold","data-testid":"watchlist-title",children:"My Watchlist"}),i.jsx(bn,{href:"/",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"flex items-center space-x-2 border-gray-600 text-white hover:bg-white/10",children:[i.jsx(za,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]}),i.jsxs("p",{className:"text-gray-400","data-testid":"watchlist-subtitle",children:["Track your favorite cryptocurrencies (",h.length," coins)",s.length>0&&!(l!=null&&l.length)&&i.jsx("span",{className:"text-xs text-yellow-400 ml-2",children:"(Offline mode)"})]})]}),i.jsx(Qe,{className:"overflow-hidden",children:w?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((N,v)=>i.jsxs("div",{className:"flex items-center justify-between p-4 glass-card rounded-lg","data-testid":`watchlist-skeleton-${v}`,children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full skeleton"}),i.jsxs("div",{children:[i.jsx("div",{className:"w-24 h-5 skeleton rounded mb-2"}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"w-20 h-5 skeleton rounded mb-2"}),i.jsx("div",{className:"w-16 h-4 skeleton rounded"})]})]},v))})}):f&&f.length>0?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4","data-testid":"watchlist-grid",children:f.map(N=>i.jsxs("div",{className:"glass-card rounded-lg p-4 hover-glow cursor-pointer transition-all",onClick:()=>y(N.id),"data-testid":`watchlist-coin-${N.id}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded-full","data-testid":`watchlist-coin-image-${N.id}`}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg","data-testid":`watchlist-coin-name-${N.id}`,children:N.name}),i.jsx("p",{className:"text-gray-400 uppercase text-sm","data-testid":`watchlist-coin-symbol-${N.id}`,children:N.symbol})]})]}),i.jsx(Z,{size:"sm",variant:"ghost",className:"w-8 h-8 p-0",onClick:v=>{v.stopPropagation(),u(N.id)},"data-testid":`remove-watchlist-${N.id}`,children:i.jsx(Zr,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Current Price"}),i.jsx("p",{className:"text-xl font-bold","data-testid":`watchlist-coin-price-${N.id}`,children:Ye(N.current_price)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"24h Change"}),i.jsxs("div",{className:`flex items-center text-lg font-semibold ${N.price_change_percentage_24h>0?"text-green-400":"text-red-400"}`,"data-testid":`watchlist-coin-change-${N.id}`,children:[N.price_change_percentage_24h>0?i.jsx(ut,{className:"w-4 h-4 mr-1"}):i.jsx(no,{className:"w-4 h-4 mr-1"}),wr(N.price_change_percentage_24h)]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Market Cap"}),i.jsx("p",{className:"text-lg font-medium","data-testid":`watchlist-coin-mcap-${N.id}`,children:Ye(N.market_cap)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Rank"}),i.jsxs("p",{className:"text-lg font-medium","data-testid":`watchlist-coin-rank-${N.id}`,children:["#",N.market_cap_rank]})]})]})]},N.id))})}):i.jsxs("div",{className:"p-12 text-center","data-testid":"watchlist-empty",children:[i.jsx(tC,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Your watchlist is empty"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Start adding coins to your watchlist by clicking the star icon on any cryptocurrency"}),i.jsx(Z,{onClick:()=>window.location.href="/markets",className:"bg-accent-blue hover:bg-accent-blue/90 text-white","data-testid":"browse-markets",children:"Browse Markets"})]})})]})}),i.jsx(jw,{coinId:t,isOpen:n,onClose:j})]})}function pq(){var N,v,x,E,I,O;const[t,e]=p.useState("cryptocurrency"),[n,r]=p.useState(1),[s,a]=p.useState("all"),[o,l]=p.useState("news"),c=18,{data:u,isLoading:h}=Vt({queryKey:["/api/news",t],queryFn:()=>fetch(`/api/news?category=${t}`).then(D=>D.json()),refetchInterval:3e5,staleTime:24e4}),{data:f,isLoading:m}=Vt({queryKey:["/api/social-feed",n,s],queryFn:()=>fetch(`/api/social-feed?page=${n}&limit=${c}&filter=${s}`).then(D=>D.json()),refetchInterval:6e4,staleTime:3e4}),y=D=>{const C=new Date,_=new Date(D),T=Math.floor((C.getTime()-_.getTime())/(1e3*60));return T<1?"Just now":T<60?`${T}m ago`:T<1440?`${Math.floor(T/60)}h ago`:`${Math.floor(T/1440)}d ago`},j=({article:D})=>i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl hover:shadow-3xl hover:bg-white/10 transition-all duration-300 group",children:i.jsx(Ie,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2 line-clamp-2 group-hover:text-blue-300 transition-colors",children:D.title}),i.jsx("p",{className:"text-gray-300 text-sm mb-3 line-clamp-3",children:D.description})]}),D.urlToImage&&i.jsx("img",{src:D.urlToImage,alt:D.title,className:"w-20 h-20 rounded-lg object-cover ml-4 flex-shrink-0 ring-1 ring-white/20"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(au,{className:"w-3 h-3"}),i.jsx("span",{children:y(D.publishedAt)})]}),i.jsx($e,{variant:"secondary",className:"text-xs bg-white/10 text-gray-300 border-white/20",children:D.source.name}),D.author&&i.jsxs("span",{className:"text-gray-500",children:[" ",D.author]})]}),i.jsxs(Z,{variant:"ghost",size:"sm",className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20",onClick:()=>window.open(D.url,"_blank"),"data-testid":`news-link-${D.id}`,children:[i.jsx(u1,{className:"w-3 h-3 mr-1"}),"Read"]})]})]})})}),w=({post:D})=>i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl hover:shadow-2xl hover:bg-white/8 transition-all duration-300 h-full flex flex-col",children:i.jsxs(Ie,{className:"p-4 flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm ring-2 ring-white/20 flex-shrink-0",children:D.username.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[i.jsx("span",{className:"font-semibold text-white text-sm truncate",children:D.username}),D.verified&&i.jsx(bL,{className:"w-4 h-4 text-blue-400 flex-shrink-0"})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-400",children:[i.jsx("span",{className:"truncate",children:D.handle}),i.jsx("span",{children:""}),i.jsx("span",{children:y(D.timestamp)})]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx("p",{className:"text-gray-200 text-sm leading-relaxed mb-3 flex-1",children:D.content}),D.currencies.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[D.currencies.slice(0,3).map(C=>i.jsxs($e,{variant:"outline",className:"text-xs border-blue-500/30 text-blue-400 bg-blue-500/10",children:["$",C]},C)),D.currencies.length>3&&i.jsxs($e,{variant:"outline",className:"text-xs border-gray-500/30 text-gray-400 bg-gray-500/10",children:["+",D.currencies.length-3]})]}),i.jsxs("div",{className:"flex items-center justify-between text-gray-400 text-xs mt-auto",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{className:"flex items-center space-x-1 hover:text-gray-300 hover:bg-white/10 rounded-full px-1 py-1 transition-all","data-testid":`post-comment-${D.id}`,children:[i.jsx(m1,{className:"w-3 h-3"}),i.jsx("span",{children:D.comments})]}),i.jsxs("button",{className:"flex items-center space-x-1 hover:text-green-400 hover:bg-green-500/20 rounded-full px-1 py-1 transition-all","data-testid":`post-retweet-${D.id}`,children:[i.jsx(DL,{className:"w-3 h-3"}),i.jsx("span",{children:D.retweets})]}),i.jsxs("button",{className:"flex items-center space-x-1 hover:text-red-400 hover:bg-red-500/20 rounded-full px-1 py-1 transition-all","data-testid":`post-like-${D.id}`,children:[i.jsx(tC,{className:"w-3 h-3"}),i.jsx("span",{children:D.likes})]})]}),D.url&&i.jsx(Z,{variant:"ghost",size:"sm",className:"text-blue-400 hover:text-blue-300 p-1 h-auto",onClick:()=>window.open(D.url,"_blank"),"data-testid":`post-link-${D.id}`,children:i.jsx(u1,{className:"w-3 h-3"})})]})]})]})});return i.jsx("div",{className:"min-h-screen px-4 py-6 max-w-7xl mx-auto","data-testid":"news-page",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"text-center space-y-4",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Crypto News & Social Feed"}),i.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"Stay updated with the latest cryptocurrency news, market analysis, and social sentiment from the crypto community."}),i.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(bm,{className:"w-4 h-4"}),i.jsx("span",{children:"Multiple Sources"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Il,{className:"w-4 h-4"}),i.jsx("span",{children:"Real-time Updates"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Yn,{className:"w-4 h-4"}),i.jsx("span",{children:"Social Sentiment"})]})]})]})}),i.jsxs(Iw,{defaultValue:"news",className:"w-full",onValueChange:l,children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[i.jsxs(gp,{className:"grid w-full sm:w-auto grid-cols-2 bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:[i.jsxs(Xn,{value:"news",className:"flex items-center space-x-2 data-[state=active]:bg-white/20 data-[state=active]:text-white",children:[i.jsx(ut,{className:"w-4 h-4"}),i.jsx("span",{children:"News"})]}),i.jsxs(Xn,{value:"social",className:"flex items-center space-x-2 data-[state=active]:bg-white/20 data-[state=active]:text-white",children:[i.jsx(m1,{className:"w-4 h-4"}),i.jsx("span",{children:"Social Feed"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(eC,{className:"w-4 h-4 text-gray-400"}),o==="news"?i.jsxs(Ri,{value:t,onValueChange:e,children:[i.jsx(ks,{className:"w-48 bg-white/5 backdrop-blur-xl border-white/10 shadow-xl",children:i.jsx(Pi,{})}),i.jsxs(Rs,{className:"bg-white/10 backdrop-blur-xl border-white/10 shadow-2xl",children:[i.jsx(Ne,{value:"cryptocurrency",children:"Cryptocurrency"}),i.jsx(Ne,{value:"bitcoin",children:"Bitcoin"}),i.jsx(Ne,{value:"ethereum",children:"Ethereum"}),i.jsx(Ne,{value:"blockchain",children:"Blockchain"}),i.jsx(Ne,{value:"defi",children:"DeFi"}),i.jsx(Ne,{value:"nft",children:"NFT"}),i.jsx(Ne,{value:"web3",children:"Web3"}),i.jsx(Ne,{value:"altcoin",children:"Altcoins"})]})]}):i.jsxs(Ri,{value:s,onValueChange:D=>{a(D),r(1)},children:[i.jsx(ks,{className:"w-48 bg-white/5 backdrop-blur-xl border-white/10 shadow-xl",children:i.jsx(Pi,{})}),i.jsxs(Rs,{className:"bg-white/10 backdrop-blur-xl border-white/10 shadow-2xl",children:[i.jsx(Ne,{value:"all",children:"All Posts"}),i.jsx(Ne,{value:"twitter",children:"X/Twitter Only"}),i.jsx(Ne,{value:"bitcoin",children:"Bitcoin"}),i.jsx(Ne,{value:"ethereum",children:"Ethereum"}),i.jsx(Ne,{value:"defi",children:"DeFi"}),i.jsx(Ne,{value:"nft",children:"NFT"}),i.jsx(Ne,{value:"web3",children:"Web3"}),i.jsx(Ne,{value:"altcoins",children:"Altcoins"})]})]})]})]}),i.jsx(Jn,{value:"news",className:"space-y-6",children:h?i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((D,C)=>i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 animate-pulse",children:i.jsx(Ie,{className:"p-6",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),i.jsx("div",{className:"h-3 bg-white/10 rounded w-full"}),i.jsx("div",{className:"h-3 bg-white/10 rounded w-2/3"}),i.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]})})},C))}):i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:(N=u==null?void 0:u.articles)==null?void 0:N.map(D=>i.jsx(j,{article:D},D.id||D.url))})}),i.jsx(Jn,{value:"social",className:"space-y-6",children:m?i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6",children:[...Array(c)].map((D,C)=>i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 animate-pulse",children:i.jsx(Ie,{className:"p-4",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-3 bg-white/10 rounded w-1/4"}),i.jsx("div",{className:"h-3 bg-white/10 rounded w-full"}),i.jsx("div",{className:"h-3 bg-white/10 rounded w-3/4"})]})]})})},C))})}):i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6",children:(v=f==null?void 0:f.posts)==null?void 0:v.map(D=>i.jsx(w,{post:D},D.id))}),(f==null?void 0:f.pagination)&&f.pagination.totalPages>1&&i.jsx("div",{className:"mt-8 flex items-center justify-center space-x-4",children:i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:i.jsxs(Ie,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>r(D=>Math.max(1,D-1)),disabled:!f.pagination.hasPrevious,className:"text-white hover:bg-white/10 disabled:opacity-50","data-testid":"social-page-previous",children:[i.jsx(Xv,{className:"w-4 h-4 mr-1"}),"Previous"]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[i.jsx("span",{children:"Page"}),i.jsx("span",{className:"font-semibold text-white",children:f.pagination.currentPage}),i.jsx("span",{children:"of"}),i.jsx("span",{className:"font-semibold text-white",children:f.pagination.totalPages})]}),i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>r(D=>D+1),disabled:!f.pagination.hasNext,className:"text-white hover:bg-white/10 disabled:opacity-50","data-testid":"social-page-next",children:["Next",i.jsx(Cl,{className:"w-4 h-4 ml-1"})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-400 text-center",children:["Showing ",((x=f.posts)==null?void 0:x.length)||0," of ",f.pagination.totalPosts," posts"]})]})})})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-8",children:[i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:i.jsxs(Ie,{className:"p-6 text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:((E=u==null?void 0:u.articles)==null?void 0:E.length)||0}),i.jsx("div",{className:"text-sm text-gray-400",children:"News Articles"})]})}),i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:i.jsxs(Ie,{className:"p-6 text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:((I=f==null?void 0:f.pagination)==null?void 0:I.totalPosts)||((O=f==null?void 0:f.posts)==null?void 0:O.length)||0}),i.jsx("div",{className:"text-sm text-gray-400",children:"Social Posts"})]})}),i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:i.jsxs(Ie,{className:"p-6 text-center",children:[i.jsx(JS,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Live Updates"})]})}),i.jsx(be,{className:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl",children:i.jsxs(Ie,{className:"p-6 text-center",children:[i.jsx("div",{className:"text-xl font-bold text-white mb-2",children:t.charAt(0).toUpperCase()+t.slice(1)}),i.jsx("div",{className:"text-sm text-gray-400",children:"Category"})]})})]})]})})}const gq=sd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),YP=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:q(gq({variant:e}),t),...n}));YP.displayName="Alert";const XP=p.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:q("mb-1 font-medium leading-none tracking-tight",t),...e}));XP.displayName="AlertTitle";const JP=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:q("text-sm [&_p]:leading-relaxed",t),...e}));JP.displayName="AlertDescription";const da=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:q("w-full caption-bottom text-sm",t),...e})}));da.displayName="Table";const ha=p.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:q("[&_tr]:border-b",t),...e}));ha.displayName="TableHeader";const fa=p.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:q("[&_tr:last-child]:border-0",t),...e}));fa.displayName="TableBody";const xq=p.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));xq.displayName="TableFooter";const Ht=p.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Ht.displayName="TableRow";const Te=p.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Te.displayName="TableHead";const ye=p.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:q("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ye.displayName="TableCell";const yq=p.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:q("mt-4 text-sm text-muted-foreground",t),...e}));yq.displayName="TableCaption";var Aw="Switch",[vq,aK]=Hn(Aw),[wq,_q]=vq(Aw),ZP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[m,y]=p.useState(null),j=Re(e,E=>y(E)),w=p.useRef(!1),N=m?h||!!m.closest("form"):!0,[v=!1,x]=Oi({prop:s,defaultProp:a,onChange:u});return i.jsxs(wq,{scope:n,checked:v,disabled:l,children:[i.jsx(fe.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":n4(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:j,onClick:Y(t.onClick,E=>{x(I=>!I),N&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),N&&i.jsx(bq,{control:m,bubbles:!w.current,name:r,value:c,checked:v,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});ZP.displayName=Aw;var e4="SwitchThumb",t4=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=_q(e4,n);return i.jsx(fe.span,{"data-state":n4(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});t4.displayName=e4;var bq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=p.useRef(null),o=YR(n),l=NC(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[o,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function n4(t){return t?"checked":"unchecked"}var r4=ZP,Nq=t4;const Wy=p.forwardRef(({className:t,...e},n)=>i.jsx(r4,{className:q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Nq,{className:q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Wy.displayName=r4.displayName;function Eq(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var kw="ScrollArea",[s4,oK]=Hn(kw),[jq,lr]=s4(kw),i4=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,h]=p.useState(null),[f,m]=p.useState(null),[y,j]=p.useState(null),[w,N]=p.useState(null),[v,x]=p.useState(0),[E,I]=p.useState(0),[O,D]=p.useState(!1),[C,_]=p.useState(!1),T=Re(e,P=>c(P)),S=vd(s);return i.jsx(jq,{scope:n,type:r,dir:S,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:y,onScrollbarXChange:j,scrollbarXEnabled:O,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:N,scrollbarYEnabled:C,onScrollbarYEnabledChange:_,onCornerWidthChange:x,onCornerHeightChange:I,children:i.jsx(fe.div,{dir:S,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});i4.displayName=kw;var a4="ScrollAreaViewport",o4=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=lr(a4,n),l=p.useRef(null),c=Re(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});o4.displayName=a4;var as="ScrollAreaScrollbar",Rw=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(as,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Tq,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Sq,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(l4,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(Pw,{...r,ref:e}):null});Rw.displayName=as;var Tq=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(as,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(gn,{present:n||a,children:i.jsx(l4,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Sq=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(as,t.__scopeScrollArea),a=t.orientation==="horizontal",o=yp(()=>c("SCROLL_END"),100),[l,c]=Eq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,h=a?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const y=u[h];f!==y&&(c("SCROLL"),o()),f=y};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(gn,{present:n||l!=="hidden",children:i.jsx(Pw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Y(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Y(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),l4=p.forwardRef((t,e)=>{const n=lr(as,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=yp(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:h)}},10);return $l(n.viewport,c),$l(n.content,c),i.jsx(gn,{present:r||a,children:i.jsx(Pw,{"data-state":a?"visible":"hidden",...s,ref:e})})}),Pw=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=lr(as,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=f4(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,y){return Pq(m,o.current,l,y)}return n==="horizontal"?i.jsx(Cq,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,y=jE(m,l,s.dir);a.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?i.jsx(Iq,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,y=jE(m,l);a.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),Cq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=lr(as,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Re(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(u4,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),p4(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:em(o.paddingLeft),paddingEnd:em(o.paddingRight)}})}})}),Iq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=lr(as,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Re(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(u4,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),p4(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:em(o.paddingTop),paddingEnd:em(o.paddingBottom)}})}})}),[Aq,c4]=s4(as),u4=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=t,y=lr(as,n),[j,w]=p.useState(null),N=Re(e,T=>w(T)),v=p.useRef(null),x=p.useRef(""),E=y.viewport,I=r.content-r.viewport,O=ot(h),D=ot(c),C=yp(f,10);function _(T){if(v.current){const S=T.clientX-v.current.left,P=T.clientY-v.current.top;u({x:S,y:P})}}return p.useEffect(()=>{const T=S=>{const P=S.target;(j==null?void 0:j.contains(P))&&O(S,I)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[E,j,I,O]),p.useEffect(D,[r,D]),$l(j,C),$l(y.content,C),i.jsx(Aq,{scope:n,scrollbar:j,hasThumb:s,onThumbChange:ot(a),onThumbPointerUp:ot(o),onThumbPositionChange:D,onThumbPointerDown:ot(l),children:i.jsx(fe.div,{...m,ref:N,style:{position:"absolute",...m.style},onPointerDown:Y(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=j.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),_(T))}),onPointerMove:Y(t.onPointerMove,_),onPointerUp:Y(t.onPointerUp,T=>{const S=T.target;S.hasPointerCapture(T.pointerId)&&S.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,y.viewport&&(y.viewport.style.scrollBehavior=""),v.current=null})})})}),Zf="ScrollAreaThumb",d4=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=c4(Zf,t.__scopeScrollArea);return i.jsx(gn,{present:n||s.hasThumb,children:i.jsx(kq,{ref:e,...r})})}),kq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=lr(Zf,n),o=c4(Zf,n),{onThumbPositionChange:l}=o,c=Re(e,f=>o.onThumbChange(f)),u=p.useRef(void 0),h=yp(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(h(),!u.current){const y=Dq(f,l);u.current=y,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,h,l]),i.jsx(fe.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Y(t.onPointerDownCapture,f=>{const y=f.target.getBoundingClientRect(),j=f.clientX-y.left,w=f.clientY-y.top;o.onThumbPointerDown({x:j,y:w})}),onPointerUp:Y(t.onPointerUp,o.onThumbPointerUp)})});d4.displayName=Zf;var Dw="ScrollAreaCorner",h4=p.forwardRef((t,e)=>{const n=lr(Dw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Rq,{...t,ref:e}):null});h4.displayName=Dw;var Rq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=lr(Dw,n),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return $l(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),$l(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?i.jsx(fe.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function em(t){return t?parseInt(t,10):0}function f4(t,e){const n=t/e;return isNaN(n)?0:n}function xp(t){const e=f4(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Pq(t,e,n,r="ltr"){const s=xp(n),a=s/2,o=e||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return m4([c,u],f)(t)}function jE(t,e,n="ltr"){const r=xp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Fy(t,c);return m4([0,o],[0,l])(u)}function m4(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function p4(t,e){return t>0&&t<e}var Dq=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function yp(t,e){const n=ot(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function $l(t,e){const n=ot(e);St(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var g4=i4,Mq=o4,Oq=h4;const ma=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(g4,{ref:r,className:q("relative overflow-hidden",t),...n,children:[i.jsx(Mq,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(x4,{}),i.jsx(Oq,{})]}));ma.displayName=g4.displayName;const x4=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(Rw,{ref:r,orientation:e,className:q("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(d4,{className:"relative flex-1 rounded-full bg-border"})}));x4.displayName=Rw.displayName;const TE=async(t,e,n,r)=>{const s=await fetch("/api/admin/toggle-coin-visibility",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coinId:t,hidden:e,adminId:n,adminName:r})});if(!s.ok)throw new Error(`Failed to toggle coin visibility: ${s.statusText}`);return s.json()},Lq=async()=>{const t=await fetch("/api/admin/hidden-coins");if(!t.ok)throw new Error(`Failed to get hidden coins: ${t.statusText}`);return(await t.json()).hiddenCoins||[]},Vq=async(t=100)=>{const n=typeof t=="string"?`/api/admin/all-user-activities?timeframe=${t}&limit=1000`:`/api/admin/all-user-activities?limit=${t}`,r=await fetch(n);if(!r.ok)throw new Error(`Failed to get all user activities: ${r.statusText}`);return(await r.json()).activities||[]},Fq=()=>{const[t,e]=p.useState("all"),[n,r]=p.useState("24h"),{data:s=[],isLoading:a}=Vt({queryKey:["/api/admin/all-user-activities",n],queryFn:()=>Vq(n==="24h"?100:n==="7d"?500:1e3),enabled:!0,refetchInterval:5e3}),o=u=>{switch(u){case"login":case"session_started":return i.jsx(Yn,{className:"h-4 w-4 text-green-400"});case"page_visited":case"page_view":return i.jsx(pr,{className:"h-4 w-4 text-blue-400"});case"coin_viewed":case"coin_view":return i.jsx(Xo,{className:"h-4 w-4 text-yellow-400"});case"chart_viewed":case"chart_view":return i.jsx(rr,{className:"h-4 w-4 text-purple-400"});case"logout":case"session_ended":return i.jsx(x1,{className:"h-4 w-4 text-red-400"});default:return i.jsx(rr,{className:"h-4 w-4 text-gray-400"})}},l=u=>{switch(u){case"login":case"session_started":return"border-green-500 text-green-400";case"page_visited":case"page_view":return"border-blue-500 text-blue-400";case"coin_viewed":case"coin_view":return"border-yellow-500 text-yellow-400";case"chart_viewed":case"chart_view":return"border-purple-500 text-purple-400";case"logout":case"session_ended":return"border-red-500 text-red-400";default:return"border-gray-500 text-gray-400"}},c=t==="all"?s:s.filter(u=>u.action===t);return a?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),i.jsx("span",{className:"ml-2 text-gray-300",children:"Loading user activities..."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Filter:"}),i.jsxs(Ri,{value:t,onValueChange:e,children:[i.jsx(ks,{className:"w-40 bg-white/10 border-white/20 text-white",children:i.jsx(Pi,{})}),i.jsxs(Rs,{children:[i.jsx(Ne,{value:"all",children:"All Activities"}),i.jsx(Ne,{value:"login",children:"Logins"}),i.jsx(Ne,{value:"page_visited",children:"Page Views"}),i.jsx(Ne,{value:"coin_viewed",children:"Coin Views"}),i.jsx(Ne,{value:"chart_viewed",children:"Chart Access"}),i.jsx(Ne,{value:"session_started",children:"Sessions"}),i.jsx(Ne,{value:"logout",children:"Logouts"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"text-gray-300 text-sm",children:"Timeframe:"}),i.jsxs(Ri,{value:n,onValueChange:r,children:[i.jsx(ks,{className:"w-32 bg-white/10 border-white/20 text-white",children:i.jsx(Pi,{})}),i.jsxs(Rs,{children:[i.jsx(Ne,{value:"24h",children:"Last 24h"}),i.jsx(Ne,{value:"7d",children:"Last 7 days"}),i.jsx(Ne,{value:"30d",children:"Last 30 days"})]})]})]})]}),i.jsxs($e,{variant:"outline",className:"text-white border-white/30",children:[c.length," activities"]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(pr,{className:"h-4 w-4 text-blue-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Page Views"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:s.filter(u=>u.action==="page_visited"||u.type==="page_view").length})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Xo,{className:"h-4 w-4 text-yellow-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Coin Views"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:s.filter(u=>u.action==="coin_viewed"||u.type==="coin_view").length})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(rr,{className:"h-4 w-4 text-purple-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Chart Views"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:s.filter(u=>u.action==="chart_viewed"||u.type==="chart_view").length})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yn,{className:"h-4 w-4 text-green-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Logins"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:s.filter(u=>u.action==="login"||u.type==="login").length})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(x1,{className:"h-4 w-4 text-red-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Logouts"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:s.filter(u=>u.action==="logout"||u.type==="logout").length})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yn,{className:"h-4 w-4 text-blue-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Active Users"})]}),i.jsx("div",{className:"text-white text-2xl font-bold",children:new Set(s.map(u=>u.userId)).size})]})]}),i.jsx(ma,{className:"h-96",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"User"}),i.jsx(Te,{className:"text-gray-300",children:"Action"}),i.jsx(Te,{className:"text-gray-300",children:"Details"}),i.jsx(Te,{className:"text-gray-300",children:"Device Info"}),i.jsx(Te,{className:"text-gray-300",children:"Session ID"}),i.jsx(Te,{className:"text-gray-300",children:"Time Spent"}),i.jsx(Te,{className:"text-gray-300",children:"Timestamp"})]})}),i.jsxs(fa,{children:[c.map(u=>{var h,f,m,y,j,w,N;return i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pn,{className:"h-8 w-8",children:u.userPhotoURL?i.jsx("img",{src:u.userPhotoURL,alt:u.userName,className:"rounded-full"}):i.jsx(Dn,{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs",children:((f=(h=u.userName)==null?void 0:h.charAt(0))==null?void 0:f.toUpperCase())||((y=(m=u.userEmail)==null?void 0:m.charAt(0))==null?void 0:y.toUpperCase())||"U"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-white text-sm font-medium cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>{},children:u.userName&&u.userName!=="Unknown"?u.userName:u.userEmail&&u.userEmail!=="Unknown Email"?u.userEmail.split("@")[0]:`User-${u.userId.slice(-6)}`}),i.jsx("span",{className:"text-gray-400 text-xs",children:u.userEmail&&u.userEmail!=="Unknown Email"?u.userEmail:`ID: ${u.userId.slice(-8)}`})]})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[o(u.action),i.jsx($e,{variant:"outline",className:`text-xs ${l(u.action)}`,children:u.action.replace("_"," ")})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"text-white text-sm",children:[(u.action==="page_visited"||u.type==="page_view")&&i.jsxs("span",{children:["Visited: ",i.jsx("code",{className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs",children:u.pageUrl||u.details})]}),(u.action==="coin_viewed"||u.type==="coin_view")&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("span",{children:["Coin: ",i.jsx("code",{className:"bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded text-xs",children:((j=u.metadata)==null?void 0:j.coinName)||u.coinId||u.details})]}),u.coinId&&i.jsxs("div",{className:"text-gray-400 text-xs",children:["ID: ",u.coinId]})]}),(u.action==="chart_viewed"||u.type==="chart_view")&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("span",{children:["Chart: ",i.jsx("code",{className:"bg-purple-500/20 text-purple-300 px-2 py-1 rounded text-xs",children:((w=u.metadata)==null?void 0:w.coinName)||u.coinId})]}),i.jsxs("div",{className:"text-gray-400 text-xs",children:["Timeframe: ",((N=u.metadata)==null?void 0:N.timeframe)||"unknown"]})]}),(u.action==="session_started"||u.type==="session_start")&&i.jsx("span",{className:"text-green-300",children:"Session started"}),(u.action==="login"||u.action==="logout")&&i.jsx("span",{className:u.action==="login"?"text-green-300":"text-red-300",children:u.action==="login"?" User logged in":" User logged out"})]}),u.referrer&&u.referrer!==window.location.origin&&i.jsx("div",{className:"text-gray-400 text-xs",children:i.jsxs("span",{className:"opacity-70",children:["From: ",u.referrer]})})]})}),i.jsx(ye,{children:i.jsx("div",{className:"text-center text-xs",children:u.browserInfo?i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-white",children:u.browserInfo.includes("Chrome")?" Chrome":u.browserInfo.includes("Safari")?" Safari":u.browserInfo.includes("Firefox")?" Firefox":u.browserInfo.includes("Edge")?" Edge":" Other"}),i.jsx("div",{className:"text-gray-400",children:u.browserInfo.includes("Mobile")?" Mobile":u.browserInfo.includes("Windows")?" Windows":u.browserInfo.includes("Mac")?" Mac":u.browserInfo.includes("Linux")?" Linux":" Desktop"})]}):i.jsx("span",{className:"text-gray-500",children:"Unknown"})})}),i.jsx(ye,{children:i.jsx("div",{className:"text-center text-xs",children:i.jsx("code",{className:"bg-gray-500/20 text-gray-300 px-1 py-0.5 rounded text-xs",children:u.sessionId?u.sessionId.slice(-8):"N/A"})})}),i.jsx(ye,{children:i.jsx("div",{className:"text-center",children:u.timeSpent?i.jsxs($e,{variant:"outline",className:"bg-green-500/20 text-green-300 border-green-500/30",children:[u.timeSpent,"s"]}):u.sessionDuration?i.jsxs($e,{variant:"outline",className:"bg-blue-500/20 text-blue-300 border-blue-500/30",children:[Math.round(u.sessionDuration/6e4),"m"]}):i.jsx($e,{variant:"outline",className:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30 text-xs",children:"Active"})})}),i.jsx(ye,{children:i.jsxs("div",{className:"text-gray-400 text-xs space-y-1",children:[i.jsx("div",{children:new Date(u.timestamp).toLocaleDateString()}),i.jsx("div",{children:new Date(u.timestamp).toLocaleTimeString()})]})})]},u.id)}),c.length===0&&i.jsx(Ht,{children:i.jsxs(ye,{colSpan:7,className:"text-center text-gray-400 py-8",children:[i.jsx(rr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No user activities found for the selected timeframe"})]})})]})]})})]})};function Uq(){const[t,e]=p.useState(null);p.useEffect(()=>sw(e),[]);const{toast:n}=to(),r=td(),[s,a]=p.useState(!1),[o,l]=p.useState(!0),[c,u]=p.useState(""),[h,f]=p.useState(null),[m,y]=p.useState(!1),[j,w]=p.useState(!1),[N,v]=p.useState(!1),[x,E]=p.useState(!1),[I,O]=p.useState(null),[D,C]=p.useState(0);p.useState("users");const[_,T]=p.useState([]),[S,P]=p.useState(!1),{data:M}=Vt({queryKey:["/api/admin/hidden-coins"],queryFn:()=>Lq(),enabled:s,refetchInterval:1e4});p.useEffect(()=>{const R=M||[];JSON.stringify(_)!==JSON.stringify(R)&&(T(R),console.log("Hidden coins updated:",R))},[M]),p.useEffect(()=>{(async()=>{if(t){const Q=await aw(t.uid);a(Q),Q||n({title:"Access Denied",description:"You don't have permission to access the admin dashboard.",variant:"destructive"})}l(!1)})()},[t,n]);const{data:A=[],isLoading:H}=Vt({queryKey:["admin-users"],queryFn:fk,enabled:s,refetchInterval:1e4,refetchOnWindowFocus:!0}),{data:te}=Vt({queryKey:["/api/admin/activities"],enabled:s,refetchInterval:15e3}),{data:W}=Vt({queryKey:["/api/admin/all-user-activities"],enabled:s,refetchInterval:1e4}),le=Array.isArray(te)?te:(te==null?void 0:te.activities)||[],V=Array.isArray(W)?W:(W==null?void 0:W.activities)||[],U=[...le,...V].sort((R,Q)=>new Date(Q.timestamp||Q.createdAt).getTime()-new Date(R.timestamp||R.createdAt).getTime()).slice(0,100),{data:G=[]}=Vt({queryKey:["/api/coins"],enabled:s}),X=ua({mutationFn:async({userId:R,adminId:Q})=>{await mk(R,Q)},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-users"]}),n({title:"User Deleted",description:"User has been permanently deleted from the system."})},onError:R=>{n({title:"Error",description:`Failed to delete user: ${R.message}`,variant:"destructive"})}}),oe=ua({mutationFn:async({userId:R,adminId:Q,suspended:ce})=>{await pk(R,Q,ce)},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-users"]}),n({title:"User Status Updated",description:"User suspension status has been updated."})},onError:R=>{n({title:"Error",description:`Failed to update user status: ${R.message}`,variant:"destructive"})}}),_e=ua({mutationFn:async({userId:R,adminId:Q,newRole:ce})=>{await gk(R,Q,ce)},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-users"]}),n({title:"User Role Updated",description:"User role has been successfully updated."})},onError:R=>{n({title:"Error",description:`Failed to update user role: ${R.message}`,variant:"destructive"})}}),De=ua({mutationFn:async({userId:R,adminId:Q,userType:ce,accountType:Yt})=>{const Ee=await fetch("/api/admin/update-user-type",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:R,adminId:Q,userType:ce,accountType:Yt})});if(!Ee.ok)throw new Error("Failed to update user type");return Ee.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-users"]}),n({title:"User Type Updated",description:"User type and account settings have been updated."})},onError:R=>{n({title:"Error",description:`Failed to update user type: ${R.message}`,variant:"destructive"})}}),ke=ua({mutationFn:async({coinId:R,hidden:Q})=>{await TE(R,Q,t.uid,t.displayName||t.email)},onSuccess:(R,Q)=>{T(ce=>Q.hidden?[...ce,Q.coinId]:ce.filter(Yt=>Yt!==Q.coinId)),r.invalidateQueries({queryKey:["/api/admin/hidden-coins"]}),r.invalidateQueries({queryKey:["/api/admin/activities"]}),n({title:"Coin Visibility Updated",description:`Coin has been ${Q.hidden?"hidden from":"shown on"} the website. This change is now live for all users.`})},onError:R=>{n({title:"Error",description:`Failed to update coin visibility: ${R.message}`,variant:"destructive"})}}),ze=R=>({casual:i.jsx(Lt,{className:"h-4 w-4 text-blue-300"}),trader:i.jsx(ut,{className:"h-4 w-4 text-green-300"}),investor:i.jsx(mg,{className:"h-4 w-4 text-purple-300"}),professional:i.jsx(EL,{className:"h-4 w-4 text-orange-300"}),institutional:i.jsx(gg,{className:"h-4 w-4 text-pink-300"})})[R]||i.jsx(Lt,{className:"h-4 w-4 text-gray-300"}),re=R=>({standard:i.jsx(Lt,{className:"h-4 w-4 text-gray-300"}),premium:i.jsx(Zr,{className:"h-4 w-4 text-yellow-300"}),pro:i.jsx(oh,{className:"h-4 w-4 text-purple-300"}),enterprise:i.jsx(gg,{className:"h-4 w-4 text-blue-300"})})[R]||i.jsx(Lt,{className:"h-4 w-4 text-gray-300"}),Me=R=>({user:i.jsx(Lt,{className:"h-4 w-4 text-blue-300"}),admin:i.jsx(ya,{className:"h-4 w-4 text-yellow-300"}),super_admin:i.jsx(oh,{className:"h-4 w-4 text-red-300"})})[R]||i.jsx(Lt,{className:"h-4 w-4 text-gray-300"}),ue=R=>R.accountStatus==="deleted"||R.deletedFromAuth?{status:"Deleted",variant:"destructive",color:"text-red-500"}:!R.isActive||R.accountStatus==="suspended"?{status:"Suspended",variant:"destructive",color:"text-yellow-500"}:{status:"Active",variant:"default",color:"text-green-500"},Se=async(R,Q,ce)=>{t!=null&&t.uid&&De.mutate({userId:R,adminId:t.uid,userType:Q,accountType:ce})},de=async(R,Q)=>{t!=null&&t.uid&&_e.mutate({userId:R,adminId:t.uid,newRole:Q})},xe=A.filter(R=>R.email.toLowerCase().includes(c.toLowerCase())||R.displayName.toLowerCase().includes(c.toLowerCase())),Dt=A.filter(R=>ue(R).status==="Active").filter(R=>R.email.toLowerCase().includes(c.toLowerCase())||R.displayName.toLowerCase().includes(c.toLowerCase())),qn=()=>{C(R=>R+1),r.invalidateQueries({queryKey:["admin-users"]}),r.invalidateQueries({queryKey:["admin-activities"]}),r.invalidateQueries({queryKey:["/api/coins"]}),n({title:"Data Refreshed",description:"All dashboard data has been refreshed successfully."})};p.useEffect(()=>{if(N){const R=setInterval(()=>{r.invalidateQueries({queryKey:["admin-users"]})},6e4);return()=>clearInterval(R)}},[N,r]);const Pr=G.filter(R=>R.name.toLowerCase().includes(c.toLowerCase())||R.symbol.toLowerCase().includes(c.toLowerCase())),os=({user:R,isOpen:Q,onClose:ce})=>{var Yt;return R?i.jsx(Gc,{open:Q,onOpenChange:ce,children:i.jsxs(Bo,{className:"max-w-md bg-slate-900/95 backdrop-blur-xl border-white/30 shadow-2xl",children:[i.jsx(_a,{children:i.jsx(ba,{className:"text-white text-center",children:"User Profile"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsxs(Pn,{className:"w-20 h-20",children:[i.jsx(tr,{src:R.photoURL||"",className:"object-cover"}),i.jsx(Dn,{className:"bg-purple-600 text-white text-xl font-bold",children:R.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:R.displayName}),i.jsx("p",{className:"text-gray-300",children:R.email}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",R.uid]})]})]}),i.jsxs("div",{className:"space-y-3 border-t border-white/20 pt-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-xs",children:"Bio"}),i.jsx("p",{className:"text-white text-sm",children:R.bio||"No bio available"})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-xs",children:"Country"}),i.jsx("p",{className:"text-white text-sm",children:((Yt=R.location)==null?void 0:Yt.country)||"Not specified"})]})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-xs",children:"Member Since"}),i.jsx("p",{className:"text-white text-sm",children:new Date(R.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-xs",children:"Status"}),i.jsx($e,{variant:ue(R).variant,className:`ml-2 ${ue(R).status==="Active"?"bg-green-600 text-white":ue(R).status==="Deleted"?"bg-red-600 text-white":"bg-yellow-600 text-white"}`,children:ue(R).status})]}),i.jsxs("div",{children:[i.jsx(Ae,{className:"text-gray-300 text-xs",children:"Verification"}),i.jsx("div",{className:"flex items-center ml-2",children:R.emailVerified?i.jsx(ys,{className:"h-4 w-4 text-green-400"}):i.jsx(Zo,{className:"h-4 w-4 text-red-400"})})]})]})]})]})]})}):null},oc=({user:R,isOpen:Q,onClose:ce})=>{var Ed;const[Yt,Ee]=p.useState(""),[wt,cs]=p.useState(""),[cc,uc]=p.useState("");return p.useEffect(()=>{R&&(Ee(R.role),cs(R.userType||"casual"),uc(R.accountType||"standard"))},[R]),R?i.jsx(Gc,{open:Q,onOpenChange:ce,children:i.jsxs(Bo,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-slate-900/95 backdrop-blur-xl border-white/30 shadow-2xl",children:[i.jsxs(_a,{children:[i.jsxs(ba,{className:"text-white flex items-center gap-3",children:[i.jsxs(Pn,{className:"h-10 w-10",children:[i.jsx(tr,{src:R.photoURL||""}),i.jsx(Dn,{className:"bg-purple-600 text-white",children:R.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:R.displayName}),i.jsx("p",{className:"text-sm text-gray-400",children:R.email})]})]}),i.jsx(mu,{className:"text-gray-300",children:"Comprehensive user management and settings"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ae,{className:"text-white font-medium",children:"User Role"}),i.jsxs("div",{className:"flex items-center gap-2",children:[Me(Yt),i.jsxs(Ri,{value:Yt,onValueChange:yn=>{Ee(yn),de(R.id,yn)},disabled:_e.isPending,children:[i.jsx(ks,{className:"w-40 bg-white/10 border-white/20 text-white",children:i.jsx(Pi,{placeholder:"Select role"})}),i.jsxs(Rs,{className:"z-[10000] bg-slate-800 border-white/20",children:[i.jsx(Ne,{value:"user",children:"User"}),i.jsx(Ne,{value:"admin",children:"Admin"}),i.jsx(Ne,{value:"super_admin",children:"Super Admin"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ae,{className:"text-white font-medium",children:"User Type"}),i.jsxs("div",{className:"flex items-center gap-2",children:[ze(wt),i.jsxs(Ri,{value:wt,onValueChange:yn=>{cs(yn),Se(R.id,yn)},disabled:De.isPending,children:[i.jsx(ks,{className:"bg-white/10 border-white/20 text-white",children:i.jsx(Pi,{placeholder:"Select user type"})}),i.jsxs(Rs,{className:"z-[10000] bg-slate-800 border-white/20",children:[i.jsx(Ne,{value:"casual",children:"Casual"}),i.jsx(Ne,{value:"trader",children:"Trader"}),i.jsx(Ne,{value:"investor",children:"Investor"}),i.jsx(Ne,{value:"professional",children:"Professional"})]})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ae,{className:"text-white font-medium",children:"Account Type"}),i.jsxs("div",{className:"flex items-center gap-2",children:[re(cc),i.jsxs(Ri,{value:cc,onValueChange:yn=>{uc(yn),Se(R.id,void 0,yn)},disabled:De.isPending,children:[i.jsx(ks,{className:"bg-white/10 border-white/20 text-white",children:i.jsx(Pi,{placeholder:"Select account type"})}),i.jsxs(Rs,{className:"z-[10000] bg-slate-800 border-white/20",children:[i.jsx(Ne,{value:"standard",children:"Standard"}),i.jsx(Ne,{value:"premium",children:"Premium"}),i.jsx(Ne,{value:"pro",children:"Pro"}),i.jsx(Ne,{value:"enterprise",children:"Enterprise"})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Watchlist"}),i.jsx("p",{className:"text-xl font-bold text-white",children:((Ed=R.watchlist)==null?void 0:Ed.length)||0})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Joined"}),i.jsx("p",{className:"text-sm font-medium text-white",children:new Date(R.createdAt).toLocaleDateString()})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),i.jsx($e,{variant:ue(R).variant,className:ue(R).color,children:ue(R).status})]})]}),ue(R).status!=="Deleted"&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Z,{onClick:()=>oe.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||"",suspended:R.isActive}),disabled:oe.isPending,variant:R.isActive?"destructive":"default",size:"sm",children:[R.isActive?i.jsx(fg,{className:"h-4 w-4 mr-2"}):i.jsx(pg,{className:"h-4 w-4 mr-2"}),R.isActive?"Suspend":"Activate"]}),i.jsxs(Z,{onClick:()=>X.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||""}),disabled:X.isPending,variant:"destructive",size:"sm",children:[i.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Delete User"]})]}),ue(R).status==="Deleted"&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[i.jsx(yg,{className:"h-4 w-4"}),i.jsx("p",{className:"text-sm",children:"This account has been deleted and cannot be modified."})]})})]})]})}):null},ls=({isOpen:R,onClose:Q})=>{const ce=_.map(Ee=>G.find(cs=>cs.id===Ee)||{id:Ee,name:Ee,symbol:Ee,image:"",current_price:0,market_cap_rank:0}),Yt=async()=>{for(const Ee of _)try{await TE(Ee,!1,t.uid,t.displayName||t.email)}catch(wt){console.error(`Failed to unhide ${Ee}:`,wt)}r.invalidateQueries({queryKey:["/api/admin/hidden-coins"]}),r.invalidateQueries({queryKey:["/api/admin/activities"]}),n({title:"All Coins Unhidden",description:`${_.length} coins have been made visible to all users.`})};return i.jsx(Gc,{open:R,onOpenChange:Q,children:i.jsxs(Bo,{className:"max-w-4xl max-h-[80vh] overflow-hidden bg-slate-900/95 backdrop-blur-lg border-white/20",style:{zIndex:1e4,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[i.jsxs(_a,{children:[i.jsxs(ba,{className:"text-white flex items-center gap-2",children:[i.jsx(Uc,{className:"h-5 w-5 text-red-400"}),"Hidden Coins Management (",_.length,")"]}),i.jsx(mu,{className:"text-gray-300",children:"These coins are currently hidden from public view. Users cannot see them in listings, search, or access their data."})]}),i.jsx("div",{className:"space-y-4",children:_.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(pr,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),i.jsx("p",{className:"text-green-400 text-lg",children:"All coins are currently visible"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"No coins are hidden from public listings"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between bg-red-500/10 p-4 rounded-lg border border-red-500/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yg,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-red-400 font-medium",children:"Warning: Hidden coins impact user experience"}),i.jsx("p",{className:"text-red-300 text-sm",children:"These coins are completely inaccessible to users"})]})]}),i.jsxs(Z,{onClick:Yt,variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20","data-testid":"button-unhide-all-coins",children:[i.jsx(pr,{className:"h-4 w-4 mr-2"}),"Unhide All"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:ce.map(Ee=>i.jsx(be,{className:"bg-red-500/10 backdrop-blur-lg border-red-500/20",children:i.jsx(Ie,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[Ee.image?i.jsx("img",{src:Ee.image,alt:Ee.name,className:"w-8 h-8 rounded-full"}):i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:i.jsx(Xo,{className:"h-4 w-4 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-white",children:Ee.name}),i.jsx("p",{className:"text-sm text-red-300",children:Ee.symbol.toUpperCase()}),Ee.current_price>0&&i.jsxs("p",{className:"text-xs text-gray-400",children:["$",Ee.current_price.toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($e,{variant:"destructive",className:"text-xs",children:"HIDDEN"}),i.jsxs(Z,{onClick:()=>ke.mutate({coinId:Ee.id,hidden:!1}),disabled:ke.isPending,variant:"outline",size:"sm",className:"border-green-500/50 text-green-400 hover:bg-green-500/20","data-testid":`button-unhide-coin-${Ee.id}`,children:[i.jsx(pr,{className:"h-4 w-4 mr-1"}),"Unhide"]})]})]})})},Ee.id))})]})})]})})},lc=({isOpen:R,onClose:Q})=>i.jsx(Gc,{open:R,onOpenChange:Q,children:i.jsxs(Bo,{className:"max-w-6xl max-h-[90vh] overflow-hidden bg-slate-900/95 backdrop-blur-lg border-white/20 z-[9999]",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[i.jsxs(_a,{children:[i.jsx(ba,{className:"text-white",children:"All Users Management"}),i.jsx(mu,{className:"text-gray-300",children:"Comprehensive user management with role editing and detailed information"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($c,{className:"h-4 w-4 text-gray-400"}),i.jsx(ht,{placeholder:"Search users...",value:c,onChange:ce=>u(ce.target.value),className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400"})]}),i.jsx(ma,{className:"h-96",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xe.map(ce=>i.jsx(be,{className:"bg-white/10 backdrop-blur-lg border-white/20 hover:bg-white/15 transition-all duration-300 cursor-pointer",onClick:()=>{f(ce),y(!0)},"data-testid":`card-user-${ce.id}`,children:i.jsxs(Ie,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsxs(Pn,{className:"h-10 w-10",children:[i.jsx(tr,{src:ce.photoURL||""}),i.jsx(Dn,{className:"bg-purple-600 text-white",children:ce.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-white truncate cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>{O(ce),E(!0)},children:ce.displayName}),i.jsx("p",{className:"text-sm text-gray-400 truncate",children:ce.email})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Role:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[Me(ce.role),i.jsx("span",{className:"text-white capitalize",children:ce.role})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Type:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[ze(ce.userType||"casual"),i.jsx("span",{className:"text-white capitalize",children:ce.userType||"casual"})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Account:"}),i.jsxs("div",{className:"flex items-center gap-1",children:[re(ce.accountType||"standard"),i.jsx("span",{className:"text-white capitalize",children:ce.accountType||"standard"})]})]})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx($e,{variant:ue(ce).variant,className:`text-xs ${ue(ce).color}`,children:ue(ce).status}),i.jsx(p1,{className:"h-4 w-4 text-gray-400"})]})]})},ce.id))})})]})]})}),Nd=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Z,{variant:"outline",onClick:()=>v(!1),className:"border-white/30 text-white hover:bg-white/20",children:[i.jsx(Cl,{className:"h-4 w-4 mr-2 rotate-180"}),"Back to Dashboard"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Yn,{className:"h-8 w-8 text-white drop-shadow-lg"}),i.jsxs("h1",{className:"text-3xl font-bold text-white drop-shadow-lg",children:["Total Users (",A.length,")"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Z,{variant:"outline",onClick:qn,className:"border-white/30 text-white hover:bg-white/20","data-testid":"button-refresh-total-users",children:[i.jsx(Il,{className:"h-4 w-4 mr-2"}),"Refresh"]}),i.jsx($c,{className:"h-4 w-4 text-gray-400"}),i.jsx(ht,{placeholder:"Search users by name or email...",value:c,onChange:R=>u(R.target.value),className:"w-80 bg-white/10 border-white/20 text-white placeholder:text-gray-400"})]})]}),i.jsx("p",{className:"text-gray-200 drop-shadow-md mt-2",children:"Complete overview of all registered users"})]}),i.jsx(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:i.jsx(Ie,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"Status"}),i.jsx(Te,{className:"text-gray-300",children:"Joined"}),i.jsx(Te,{className:"text-gray-300",children:"Last Login"}),i.jsx(Te,{className:"text-gray-300 min-w-[250px]",children:"User Details"}),i.jsx(Te,{className:"text-gray-300",children:"Actions"}),i.jsx(Te,{className:"text-gray-300",children:"Type"}),i.jsx(Te,{className:"text-gray-300",children:"Account"}),i.jsx(Te,{className:"text-gray-300",children:"Role"}),i.jsx(Te,{className:"text-gray-300",children:"Watchlist"}),i.jsx(Te,{className:"text-gray-300",children:"Email Verified"})]})}),i.jsxs(fa,{children:[xe.map(R=>{var Q;return i.jsxs(Ht,{className:"border-white/20 hover:bg-white/5",children:[i.jsx(ye,{children:i.jsx($e,{variant:ue(R).variant,className:`${ue(R).status==="Active"?"bg-green-600 text-white":ue(R).status==="Deleted"?"bg-red-600 text-white":"bg-yellow-600 text-black"}`,children:ue(R).status})}),i.jsxs(ye,{children:[i.jsx("div",{className:"text-sm text-gray-300",children:new Date(R.createdAt).toLocaleDateString()}),i.jsx("div",{className:"text-xs text-gray-500",children:new Date(R.createdAt).toLocaleTimeString()})]}),i.jsxs(ye,{children:[i.jsx("div",{className:"text-sm text-gray-300",children:new Date(R.lastLoginAt).toLocaleDateString()}),i.jsx("div",{className:"text-xs text-gray-500",children:new Date(R.lastLoginAt).toLocaleTimeString()})]}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Pn,{className:"w-10 h-10",children:[i.jsx(tr,{src:R.photoURL||"",alt:R.displayName,className:"object-cover"}),i.jsx(Dn,{className:"bg-purple-600 text-white font-medium",children:R.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-medium",children:R.displayName}),i.jsx("div",{className:"text-gray-400 text-sm",children:R.email}),i.jsxs("div",{className:"text-gray-500 text-xs",children:["ID: ",R.uid]})]})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[ue(R).status==="Active"&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>oe.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||"",suspended:!0}),disabled:oe.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-yellow-600 text-yellow-400 hover:bg-yellow-600/20","data-testid":`button-suspend-user-${R.id}`,children:i.jsx(fg,{className:"h-3 w-3"})}),i.jsx(Z,{onClick:()=>X.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||""}),disabled:X.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-red-600 text-red-400 hover:bg-red-600/20","data-testid":`button-delete-user-${R.id}`,children:i.jsx(Eo,{className:"h-3 w-3"})})]}),ue(R).status==="Suspended"&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>oe.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||"",suspended:!1}),disabled:oe.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-green-600 text-green-400 hover:bg-green-600/20","data-testid":`button-activate-user-${R.id}`,children:i.jsx(pg,{className:"h-3 w-3"})}),i.jsx(Z,{onClick:()=>X.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||""}),disabled:X.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-red-600 text-red-400 hover:bg-red-600/20","data-testid":`button-delete-user-${R.id}`,children:i.jsx(Eo,{className:"h-3 w-3"})})]}),ue(R).status==="Deleted"&&i.jsx("span",{className:"text-gray-500 text-sm",children:"No actions available"})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[ze(R.userType||"casual"),i.jsx("span",{className:"text-white text-sm capitalize",children:R.userType||"casual"})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[re(R.accountType||"standard"),i.jsx("span",{className:"text-white text-sm capitalize",children:R.accountType||"standard"})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[Me(R.role),i.jsx($e,{variant:R.role==="admin"?"default":"secondary",className:`${R.role==="admin"?"bg-purple-600 text-white":"bg-gray-600 text-white"}`,children:R.role})]})}),i.jsx(ye,{children:i.jsxs($e,{variant:"outline",className:"text-white border-white/30",children:[((Q=R.watchlist)==null?void 0:Q.length)||0," coins"]})}),i.jsx(ye,{children:i.jsx("div",{className:"flex items-center justify-center",children:R.emailVerified?i.jsx(ys,{className:"h-5 w-5 text-green-400"}):i.jsx(Zo,{className:"h-5 w-5 text-red-400"})})})]},R.id)}),xe.length===0&&i.jsx(Ht,{children:i.jsxs(ye,{colSpan:10,className:"text-center text-gray-400 py-12",children:[i.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"No users found"}),i.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})]})]})})})})]})});return o?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):s?N?i.jsx(Nd,{}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(ya,{className:"h-8 w-8 text-white drop-shadow-lg"}),i.jsx("h1",{className:"text-3xl font-bold text-white drop-shadow-lg",children:"Admin Dashboard"})]}),i.jsx("p",{className:"text-gray-200 drop-shadow-md",children:"Manage users, coins, and platform settings"})]}),_.length>0&&i.jsxs(be,{className:"mb-6 bg-red-500/10 backdrop-blur-md border-red-500/30",children:[i.jsx(lt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uc,{className:"h-6 w-6 text-red-400"}),i.jsxs("div",{children:[i.jsx(ct,{className:"text-red-400",children:"Hidden Coins Alert"}),i.jsxs(Mr,{className:"text-red-300",children:[_.length," coin",_.length>1?"s are":" is"," currently hidden from public view"]})]})]}),i.jsxs(Z,{onClick:()=>P(!0),variant:"outline",className:"border-red-500/50 text-red-400 hover:bg-red-500/20","data-testid":"button-manage-hidden-coins",children:[i.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Manage Hidden Coins"]})]})}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.slice(0,6).map(R=>{const Q=G.find(ce=>ce.id===R);return i.jsxs("div",{className:"flex items-center gap-2 bg-red-500/20 px-3 py-2 rounded-lg border border-red-500/30",children:[Q?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:Q.image,alt:Q.name,className:"w-5 h-5 rounded-full"}),i.jsx("span",{className:"text-white font-medium text-sm",children:Q.name}),i.jsxs("span",{className:"text-red-300 text-xs",children:["(",Q.symbol.toUpperCase(),")"]})]}):i.jsx("span",{className:"text-red-300 text-sm",children:R}),i.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>ke.mutate({coinId:R,hidden:!1}),disabled:ke.isPending,className:"h-6 w-6 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20","data-testid":`button-quick-unhide-${R}`,children:i.jsx(pr,{className:"h-3 w-3"})})]},R)}),_.length>6&&i.jsxs("div",{className:"flex items-center px-3 py-2 text-red-300 text-sm",children:["+",_.length-6," more..."]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[i.jsxs(be,{className:"bg-white/10 backdrop-blur-lg border-white/30 hover:bg-white/15 transition-all duration-300",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-white",children:"Active Users"}),i.jsx(OL,{className:"h-4 w-4 text-white drop-shadow-lg"})]}),i.jsxs(Ie,{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:A.filter(R=>R.isActive).length}),i.jsx("p",{className:"text-xs text-gray-400",children:"Currently active"})]})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-lg border-white/30 hover:bg-white/15 transition-all duration-300 cursor-pointer",onClick:()=>v(!0),"data-testid":"card-total-users",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-white",children:"Total Users"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yn,{className:"h-4 w-4 text-white drop-shadow-lg"}),i.jsx(Cl,{className:"h-3 w-3 text-white/60"})]})]}),i.jsxs(Ie,{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:A.length}),i.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed users table"})]})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-lg border-white/30 hover:bg-white/15 transition-all duration-300",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-white",children:"Active Coins"}),i.jsx(Xo,{className:"h-4 w-4 text-white drop-shadow-lg"})]}),i.jsxs(Ie,{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:G.length}),i.jsx("p",{className:"text-xs text-gray-400",children:"Listed cryptocurrencies"})]})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-lg border-white/30 hover:bg-white/15 transition-all duration-300 cursor-pointer",onClick:()=>P(!0),children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-white",children:"Hidden Coins"}),i.jsx(Uc,{className:"h-4 w-4 text-white drop-shadow-lg"})]}),i.jsxs(Ie,{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:_.length}),i.jsx("p",{className:"text-xs text-gray-400",children:"Currently hidden - Click to manage"}),_.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[_.slice(0,3).map(R=>i.jsx($e,{variant:"secondary",className:"text-xs bg-red-600/20 text-red-300",children:R},R)),_.length>3&&i.jsxs($e,{variant:"secondary",className:"text-xs bg-red-600/20 text-red-300",children:["+",_.length-3]})]})]})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-lg border-white/30 hover:bg-white/15 transition-all duration-300",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-white",children:"Admin Actions"}),i.jsx(rr,{className:"h-4 w-4 text-white drop-shadow-lg"})]}),i.jsxs(Ie,{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:le.length}),i.jsx("p",{className:"text-xs text-gray-400",children:"Recent activities"})]})]})]}),i.jsxs(Iw,{defaultValue:"users",className:"space-y-6",children:[i.jsxs(gp,{className:"grid w-full grid-cols-7 bg-white/10 backdrop-blur-lg border-white/30",children:[i.jsxs(Xn,{value:"users",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Users"]}),i.jsxs(Xn,{value:"analytics",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(rr,{className:"h-4 w-4 mr-2"}),"Analytics"]}),i.jsxs(Xn,{value:"coins",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Coins"]}),i.jsxs(Xn,{value:"user-activities",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(pr,{className:"h-4 w-4 mr-2"}),"User Activities"]}),i.jsxs(Xn,{value:"admin-activities",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(d1,{className:"h-4 w-4 mr-2"}),"Admin Activities"]}),i.jsxs(Xn,{value:"settings",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Settings"]}),i.jsxs(Xn,{value:"activity",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70 hover:text-white transition-all",children:[i.jsx(rr,{className:"h-4 w-4 mr-2"}),"Activity"]})]}),i.jsx(Jn,{value:"users",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsx(lt,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(ct,{className:"text-white",children:"User Management"}),i.jsx(Mr,{className:"text-gray-300",children:"View and manage all registered users"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Z,{variant:"outline",onClick:qn,className:"border-white/30 text-white hover:bg-white/20","data-testid":"button-refresh-dashboard",children:[i.jsx(Il,{className:"h-4 w-4 mr-2"}),"Refresh"]}),i.jsx($c,{className:"h-4 w-4 text-gray-400"}),i.jsx(ht,{placeholder:"Search users...",value:c,onChange:R=>u(R.target.value),className:"w-64 bg-white/20 border-white/30 text-white placeholder:text-gray-400"})]})]})}),i.jsx(Ie,{children:i.jsx(ma,{className:"h-96",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"User"}),i.jsx(Te,{className:"text-gray-300",children:"Type"}),i.jsx(Te,{className:"text-gray-300",children:"Account"}),i.jsx(Te,{className:"text-gray-300",children:"Role"}),i.jsx(Te,{className:"text-gray-300",children:"Status"}),i.jsx(Te,{className:"text-gray-300",children:"Verification"}),i.jsx(Te,{className:"text-gray-300",children:"Actions"})]})}),i.jsx(fa,{children:Dt.map(R=>i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Pn,{className:"w-8 h-8",children:[i.jsx(tr,{src:R.photoURL||"",alt:R.displayName,className:"object-cover"}),i.jsx(Dn,{className:"bg-purple-600 text-white text-sm font-medium",children:R.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-medium cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>{O(R),E(!0)},"data-testid":`text-username-${R.id}`,children:R.displayName}),i.jsx("div",{className:"text-gray-400 text-sm",children:R.email}),R.emailVerified&&i.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs",children:[i.jsx(ys,{className:"h-3 w-3"}),"Verified"]})]})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[R.userType==="institutional"&&i.jsx(mg,{className:"h-4 w-4 text-purple-400"}),R.userType==="professional"&&i.jsx(oh,{className:"h-4 w-4 text-orange-400"}),R.userType==="investor"&&i.jsx(gg,{className:"h-4 w-4 text-blue-400"}),R.userType==="trader"&&i.jsx(rr,{className:"h-4 w-4 text-green-400"}),(!R.userType||R.userType==="casual")&&i.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),i.jsx($e,{variant:"outline",className:"text-white border-white/30 bg-white/10 backdrop-blur-sm",children:R.userType||"casual"})]})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[R.accountType==="enterprise"&&i.jsx(mg,{className:"h-4 w-4 text-purple-400"}),R.accountType==="pro"&&i.jsx(oh,{className:"h-4 w-4 text-orange-400"}),R.accountType==="premium"&&i.jsx(Zr,{className:"h-4 w-4 text-yellow-400"}),(!R.accountType||R.accountType==="standard")&&i.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),i.jsx($e,{variant:"outline",className:`text-white border-white/30 bg-white/10 backdrop-blur-sm ${R.accountType==="enterprise"?"border-purple-400":R.accountType==="pro"?"border-orange-400":R.accountType==="premium"?"border-yellow-400":"border-gray-400"}`,children:R.accountType||"standard"})]})}),i.jsx(ye,{children:i.jsx($e,{variant:R.role==="admin"?"default":"secondary",className:R.role==="admin"?"bg-purple-600":"",children:R.role})}),i.jsx(ye,{children:i.jsx($e,{variant:ue(R).variant,className:`text-white ${ue(R).status==="Active"?"bg-green-600":ue(R).status==="Deleted"?"bg-red-600":"bg-yellow-600"}`,children:ue(R).status})}),i.jsx(ye,{children:i.jsx("div",{className:"flex items-center justify-center",children:R.emailVerified?i.jsx(ys,{className:"h-4 w-4 text-green-400"}):i.jsx(Zo,{className:"h-4 w-4 text-red-400"})})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>{f(R),y(!0)},className:"border-white/30 text-white hover:bg-white/20","data-testid":`button-edit-user-${R.id}`,children:[i.jsx(p1,{className:"h-3 w-3 mr-1"}),"Edit"]}),ue(R).status==="Active"&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>oe.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||"",suspended:!0}),disabled:oe.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-yellow-600 text-yellow-400 hover:bg-yellow-600/20","data-testid":`button-suspend-user-${R.id}`,children:i.jsx(fg,{className:"h-3 w-3"})}),i.jsx(Z,{onClick:()=>X.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||""}),disabled:X.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-red-600 text-red-400 hover:bg-red-600/20","data-testid":`button-delete-user-${R.id}`,children:i.jsx(Eo,{className:"h-3 w-3"})})]}),ue(R).status==="Suspended"&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>oe.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||"",suspended:!1}),disabled:oe.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-green-600 text-green-400 hover:bg-green-600/20","data-testid":`button-activate-user-${R.id}`,children:i.jsx(pg,{className:"h-3 w-3"})}),i.jsx(Z,{onClick:()=>X.mutate({userId:R.id,adminId:(t==null?void 0:t.uid)||""}),disabled:X.isPending,variant:"outline",size:"sm",className:"h-8 w-8 border-red-600 text-red-400 hover:bg-red-600/20","data-testid":`button-delete-user-${R.id}`,children:i.jsx(Eo,{className:"h-3 w-3"})})]}),ue(R).status==="Deleted"&&i.jsx("span",{className:"text-gray-500 text-sm",children:"No actions available"})]})})]},R.id))})]})})})]})}),i.jsxs(Jn,{value:"analytics",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-gray-200",children:"User Types"}),i.jsx(Yn,{className:"h-4 w-4 text-purple-400"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Casual:"}),i.jsx("span",{children:A.filter(R=>R.userType==="casual"||!R.userType).length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Trader:"}),i.jsx("span",{children:A.filter(R=>R.userType==="trader").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Investor:"}),i.jsx("span",{children:A.filter(R=>R.userType==="investor").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Professional:"}),i.jsx("span",{children:A.filter(R=>R.userType==="professional").length})]})]})})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-gray-200",children:"Account Types"}),i.jsx(ya,{className:"h-4 w-4 text-purple-400"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Standard:"}),i.jsx("span",{children:A.filter(R=>R.accountType==="standard"||!R.accountType).length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Premium:"}),i.jsx("span",{children:A.filter(R=>R.accountType==="premium").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Pro:"}),i.jsx("span",{children:A.filter(R=>R.accountType==="pro").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Enterprise:"}),i.jsx("span",{children:A.filter(R=>R.accountType==="enterprise").length})]})]})})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-gray-200",children:"Verification Levels"}),i.jsx(ys,{className:"h-4 w-4 text-purple-400"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Basic:"}),i.jsx("span",{children:A.filter(R=>R.verificationLevel==="basic"||!R.verificationLevel).length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Verified:"}),i.jsx("span",{children:A.filter(R=>R.verificationLevel==="verified").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Premium:"}),i.jsx("span",{children:A.filter(R=>R.verificationLevel==="premium").length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Institutional:"}),i.jsx("span",{children:A.filter(R=>R.verificationLevel==="institutional").length})]})]})})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium text-gray-200",children:"Email Verification"}),i.jsx(Nf,{className:"h-4 w-4 text-purple-400"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Verified:"}),i.jsx("span",{className:"text-green-400",children:A.filter(R=>R.emailVerified).length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Unverified:"}),i.jsx("span",{className:"text-red-400",children:A.filter(R=>!R.emailVerified).length})]}),i.jsxs("div",{className:"flex justify-between text-gray-300",children:[i.jsx("span",{children:"Verification Rate:"}),i.jsxs("span",{className:"text-blue-400",children:[A.length>0?Math.round(A.filter(R=>R.emailVerified).length/A.length*100):0,"%"]})]})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"User Activity Overview"}),i.jsx(Mr,{className:"text-gray-300",children:"Recent user engagement and activity metrics"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-300",children:"Email Verified Users"}),i.jsxs($e,{variant:"outline",className:"text-green-400 border-green-400",children:[A.filter(R=>R.emailVerified).length," / ",A.length]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-300",children:"Active Users (Last 24h)"}),i.jsx($e,{variant:"outline",className:"text-blue-400 border-blue-400",children:A.filter(R=>{const Q=new Date(R.lastLoginAt),ce=new Date(Date.now()-24*60*60*1e3);return Q>ce}).length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-300",children:"Recent Signups (7 days)"}),i.jsx($e,{variant:"outline",className:"text-purple-400 border-purple-400",children:A.filter(R=>{const Q=new Date(R.createdAt),ce=new Date(Date.now()-7*24*60*60*1e3);return Q>ce}).length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-300",children:"Two-Factor Enabled"}),i.jsx($e,{variant:"outline",className:"text-yellow-400 border-yellow-400",children:A.filter(R=>{var Q;return(Q=R.security)==null?void 0:Q.twoFactorEnabled}).length})]})]})})]}),i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"Trading Profile Distribution"}),i.jsx(Mr,{className:"text-gray-300",children:"User experience and risk tolerance breakdown"})]}),i.jsx(Ie,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-300 mb-2 block",children:"Trading Experience"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Beginner:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q,ce;return!((Q=R.tradingProfile)!=null&&Q.experience)||((ce=R.tradingProfile)==null?void 0:ce.experience)==="beginner"}).length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Intermediate:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q;return((Q=R.tradingProfile)==null?void 0:Q.experience)==="intermediate"}).length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Advanced:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q;return((Q=R.tradingProfile)==null?void 0:Q.experience)==="advanced"}).length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Expert:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q;return((Q=R.tradingProfile)==null?void 0:Q.experience)==="expert"}).length})]})]})]}),i.jsx(Pa,{className:"bg-white/20"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-300 mb-2 block",children:"Risk Tolerance"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Conservative:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q;return((Q=R.tradingProfile)==null?void 0:Q.riskTolerance)==="conservative"}).length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Moderate:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q,ce;return!((Q=R.tradingProfile)!=null&&Q.riskTolerance)||((ce=R.tradingProfile)==null?void 0:ce.riskTolerance)==="moderate"}).length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Aggressive:"}),i.jsx("span",{className:"text-white",children:A.filter(R=>{var Q;return((Q=R.tradingProfile)==null?void 0:Q.riskTolerance)==="aggressive"}).length})]})]})]})]})})]})]})]}),i.jsx(Jn,{value:"coins",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsx(lt,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(ct,{className:"text-white",children:"Coin Management"}),i.jsx(Mr,{className:"text-gray-300",children:"Control which coins are displayed on the website"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($c,{className:"h-4 w-4 text-gray-400"}),i.jsx(ht,{placeholder:"Search coins...",value:c,onChange:R=>u(R.target.value),className:"w-64 bg-white/20 border-white/30 text-white placeholder:text-gray-400"})]})]})}),i.jsx(Ie,{children:i.jsx(ma,{className:"h-96",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"Coin"}),i.jsx(Te,{className:"text-gray-300",children:"Symbol"}),i.jsx(Te,{className:"text-gray-300",children:"Price"}),i.jsx(Te,{className:"text-gray-300",children:"Rank"}),i.jsx(Te,{className:"text-gray-300",children:"Visibility"}),i.jsx(Te,{className:"text-gray-300",children:"Actions"})]})}),i.jsx(fa,{children:Pr.map(R=>{var Q;return i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:R.image,alt:R.name,className:"w-8 h-8 rounded-full"}),i.jsx("span",{className:"text-white font-medium",children:R.name})]})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-300 uppercase",children:R.symbol})}),i.jsx(ye,{children:i.jsxs("span",{className:"text-white",children:["$",(Q=R.current_price)==null?void 0:Q.toLocaleString()]})}),i.jsx(ye,{children:i.jsxs($e,{variant:"secondary",children:["#",R.market_cap_rank]})}),i.jsx(ye,{children:i.jsx($e,{variant:_.includes(R.id)?"destructive":"default",className:_.includes(R.id)?"":"bg-green-600",children:_.includes(R.id)?"Hidden":"Visible"})}),i.jsx(ye,{children:i.jsx(Z,{size:"sm",variant:_.includes(R.id)?"default":"outline",onClick:()=>ke.mutate({coinId:R.id,hidden:!_.includes(R.id)}),disabled:ke.isPending,className:"border-white/30 text-white hover:bg-white/20","data-testid":`button-toggle-coin-${R.id}`,children:_.includes(R.id)?i.jsxs(i.Fragment,{children:[i.jsx(pr,{className:"h-4 w-4 mr-1"})," Show"]}):i.jsxs(i.Fragment,{children:[i.jsx(Uc,{className:"h-4 w-4 mr-1"})," Hide"]})})})]},R.id)})})]})})})]})}),i.jsx(Jn,{value:"user-activities",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"User Activity Tracking"}),i.jsx(Mr,{className:"text-gray-300",children:"Monitor user interactions, watchlist changes, and coin views"})]}),i.jsx(Ie,{children:i.jsx(ma,{className:"h-96",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"User"}),i.jsx(Te,{className:"text-gray-300",children:"Activity Type"}),i.jsx(Te,{className:"text-gray-300",children:"Details"}),i.jsx(Te,{className:"text-gray-300",children:"Time"}),i.jsx(Te,{className:"text-gray-300",children:"Data"})]})}),i.jsxs(fa,{children:[A.map(R=>(R.activities||[]).slice(0,5).map(Q=>{var ce;return i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center text-white text-xs",children:R.displayName.charAt(0).toUpperCase()}),i.jsx("span",{className:"text-white text-sm cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>{O(R),E(!0)},"data-testid":`text-username-activity-${R.id}`,children:R.displayName})]})}),i.jsx(ye,{children:i.jsx($e,{variant:"secondary",className:"text-xs",children:Q.type})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-300 text-sm",children:Q.description})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-400 text-xs",children:new Date(Q.timestamp).toLocaleString()})}),i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(JS,{className:"h-3 w-3 text-gray-500"}),i.jsx("span",{className:"text-gray-400 text-xs",children:((ce=Q.data)==null?void 0:ce.coinId)||"N/A"})]})})]},`${R.id}-${Q.id}`)})).flat(),A.every(R=>!R.activities||R.activities.length===0)&&i.jsx(Ht,{children:i.jsxs(ye,{colSpan:5,className:"text-center text-gray-400 py-8",children:[i.jsx(pr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No user activities tracked yet"})]})})]})]})})})]})}),i.jsx(Jn,{value:"admin-activities",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"Admin Activity Log"}),i.jsx(Mr,{className:"text-gray-300",children:"Track all administrative actions and system changes"})]}),i.jsx(Ie,{children:i.jsx(ma,{className:"h-96",children:i.jsxs(da,{children:[i.jsx(ha,{children:i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(Te,{className:"text-gray-300",children:"Admin"}),i.jsx(Te,{className:"text-gray-300",children:"Action"}),i.jsx(Te,{className:"text-gray-300",children:"Target"}),i.jsx(Te,{className:"text-gray-300",children:"Details"}),i.jsx(Te,{className:"text-gray-300",children:"Timestamp"})]})}),i.jsxs(fa,{children:[U.map(R=>{var Q;return i.jsxs(Ht,{className:"border-white/20",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ya,{className:"h-4 w-4 text-purple-400"}),i.jsx("span",{className:"text-white text-sm cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>{const ce=A.find(Yt=>Yt.uid===R.adminId);ce&&(O(ce),E(!0))},"data-testid":`text-admin-name-${R.adminId}`,children:((Q=A.find(ce=>ce.uid===R.adminId))==null?void 0:Q.displayName)||"Unknown Admin"})]})}),i.jsx(ye,{children:i.jsx($e,{variant:"outline",className:`text-xs ${R.action==="user_delete"?"border-red-500 text-red-400":R.action==="user_suspend"?"border-yellow-500 text-yellow-400":R.action==="user_role_update"?"border-purple-500 text-purple-400":"border-blue-500 text-blue-400"}`,children:R.action.replace("_"," ")})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-300 text-sm",children:R.target})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-300 text-sm",children:R.details})}),i.jsx(ye,{children:i.jsx("span",{className:"text-gray-400 text-xs",children:new Date(R.timestamp||R.createdAt).toLocaleString()})})]},R.id)}),U.length===0&&i.jsx(Ht,{children:i.jsxs(ye,{colSpan:5,className:"text-center text-gray-400 py-8",children:[i.jsx(d1,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No activities recorded yet"})]})})]})]})})})]})}),i.jsx(Jn,{value:"settings",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"Platform Settings"}),i.jsx(Mr,{className:"text-gray-300",children:"Configure global platform settings and features"})]}),i.jsxs(Ie,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Ae,{className:"text-white",children:"Maintenance Mode"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Enable maintenance mode to restrict access"})]}),i.jsx(Wy,{"data-testid":"switch-maintenance-mode"})]}),i.jsx(Pa,{className:"bg-white/20"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Ae,{className:"text-white",children:"API Rate Limiting"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Enable rate limiting for API endpoints"})]}),i.jsx(Wy,{defaultChecked:!0,"data-testid":"switch-rate-limiting"})]}),i.jsx(Pa,{className:"bg-white/20"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ae,{className:"text-white",children:"Featured Coins"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Select coins to feature on the homepage"}),i.jsx(ht,{placeholder:"bitcoin, ethereum, cardano",className:"bg-white/20 border-white/30 text-white placeholder:text-gray-400","data-testid":"input-featured-coins"})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Z,{className:"bg-purple-600 hover:bg-purple-700","data-testid":"button-save-settings",children:"Save Settings"})})]})]})}),i.jsx(Jn,{value:"activity",className:"space-y-6",children:i.jsxs(be,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[i.jsxs(lt,{children:[i.jsx(ct,{className:"text-white",children:"Complete User Activity History"}),i.jsx(Mr,{className:"text-gray-300",children:"Real-time tracking of all user interactions: logins, page views, coin watches, and chart access"})]}),i.jsx(Ie,{children:i.jsx(Fq,{})})]})})]}),i.jsx(lc,{isOpen:j,onClose:()=>w(!1)}),i.jsx(ls,{isOpen:S,onClose:()=>P(!1)}),i.jsx(oc,{user:h,isOpen:m,onClose:()=>{y(!1),f(null)}}),i.jsx(os,{user:I,isOpen:x,onClose:()=>{E(!1),O(null)}})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs(YP,{className:"max-w-md",children:[i.jsx(yg,{className:"h-4 w-4"}),i.jsx(XP,{children:"Access Denied"}),i.jsx(JP,{children:"You don't have permission to access the admin dashboard."})]})})}function $q(){return Ew(),i.jsxs(Bb,{children:[i.jsx(Kn,{path:"/auth",component:aq}),i.jsx(Kn,{path:"/*",children:i.jsxs("div",{children:[i.jsx(JH,{}),i.jsx("div",{className:"pt-16",children:i.jsx(ZH,{})}),i.jsx("main",{children:i.jsxs(Bb,{children:[i.jsx(Kn,{path:"/",component:bW}),i.jsx(Kn,{path:"/markets",component:ZW}),i.jsx(Kn,{path:"/news",component:pq}),i.jsx(Kn,{path:"/analytics",component:nq}),i.jsx(Kn,{path:"/watchlist",component:mq}),i.jsx(Kn,{path:"/heatmap",component:lq}),i.jsx(Kn,{path:"/global",component:cq}),i.jsx(Kn,{path:"/profile",component:fq}),i.jsx(Kn,{path:"/admin",component:Uq}),i.jsx(Kn,{component:oq})]})})]})})]})}function zq(){return i.jsx(u3,{client:E3,children:i.jsx(HV,{children:i.jsxs("div",{className:"min-h-screen bg-primary-900 text-white","data-testid":"app",children:[i.jsx($q,{}),i.jsx(v5,{})]})})})}XT(document.getElementById("root")).render(i.jsx(zq,{}));
